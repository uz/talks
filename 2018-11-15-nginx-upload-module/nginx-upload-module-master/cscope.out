cscope 15 $HOME/dfs/nginx/nginx-upload-module-master               0000161941
	@ngx_http_upload_module.c

6 
	~<ngx_cÚfig.h
>

7 
	~<ngx_cÜe.h
>

8 
	~<ngx_h‰p.h
>

9 
	~<ngšx.h
>

11 #ià
ngšx_v”siÚ
 >= 1011002

13 
	~<ngx_md5.h
>

15 
ngx_md5_t
 
	tMD5_CTX
;

17 
	#MD5In™
 
ngx_md5_š™


	)

18 
	#MD5Upd©e
 
ngx_md5_upd©e


	)

19 
	#MD5Fš®
 
ngx_md5_fš®


	)

21 
	#MD5_DIGEST_LENGTH
 16

	)

23 
	~<Ý’s¦/sha.h
>

27 #ià(
NGX_HAVE_OPENSSL_MD5_H
)

28 
	~<Ý’s¦/md5.h
>

30 
	~<md5.h
>

33 #ià(
NGX_OPENSSL_MD5
)

34 
	#MD5In™
 
MD5_In™


	)

35 
	#MD5Upd©e
 
MD5_Upd©e


	)

36 
	#MD5Fš®
 
MD5_Fš®


	)

39 #ià(
NGX_HAVE_OPENSSL_SHA1_H
)

40 
	~<Ý’s¦/sha.h
>

42 
	~<sha.h
>

48 
	#MULTIPART_FORM_DATA_STRING
 "muÉ¬t/fÜm-d©a"

	)

49 
	#BOUNDARY_STRING
 "bound¬y="

	)

50 
	#CONTENT_DISPOSITION_STRING
 "CÚ‹Á-Di¥os™iÚ:"

	)

51 
	#CONTENT_TYPE_STRING
 "CÚ‹Á-Ty³:"

	)

52 
	#CONTENT_RANGE_STRING
 "CÚ‹Á-Rªge:"

	)

53 
	#X_CONTENT_RANGE_STRING
 "X-CÚ‹Á-Rªge:"

	)

54 
	#SESSION_ID_STRING
 "SessiÚ-ID:"

	)

55 
	#X_SESSION_ID_STRING
 "X-SessiÚ-ID:"

	)

56 
	#FORM_DATA_STRING
 "fÜm-d©a"

	)

57 
	#ATTACHMENT_STRING
 "©chm’t"

	)

58 
	#FILENAME_STRING
 "fž’ame=\""

	)

59 
	#FIELDNAME_STRING
 "Çme=\""

	)

60 
	#BYTES_UNIT_STRING
 "by‹ "

	)

62 
	#NGX_UPLOAD_MALFORMED
 -11

	)

63 
	#NGX_UPLOAD_NOMEM
 -12

	)

64 
	#NGX_UPLOAD_IOERROR
 -13

	)

65 
	#NGX_UPLOAD_SCRIPTERROR
 -14

	)

66 
	#NGX_UPLOAD_TOOLARGE
 -15

	)

68 #iâdeà
NGX_HTTP_V2


69 
	#NGX_HTTP_V2
 0

	)

76 
	mu¶ßd_¡©e_bound¬y_£ek
,

77 
	mu¶ßd_¡©e_aá”_bound¬y
,

78 
	mu¶ßd_¡©e_h—d”s
,

79 
	mu¶ßd_¡©e_d©a
,

80 
	mu¶ßd_¡©e_fšish


81 } 
	tu¶ßd_¡©e_t
;

87 
off_t
 
	m¡¬t
, 
	m’d
, 
	mtÙ®
;

88 } 
	tngx_h‰p_u¶ßd_¿nge_t
;

94 
ngx_buf_t
 *
	mš_buf
;

95 
ngx_buf_t
 *
	mout_buf
;

96 
ngx_h‰p_u¶ßd_¿nge_t
 
	mcu¼’t_¿nge_n
;

97 
off_t
 *
	m·r£r_¡©e
;

98 
ngx_log_t
 *
	mlog
;

100 
u_ch¬
 *
	m¿nge_h—d”_bufãr
;

101 
u_ch¬
 *
	m¿nge_h—d”_bufãr_’d
;

102 
u_ch¬
 **
	m¿nge_h—d”_bufãr_pos
;

104 
	mfound_low”_bound
:1;

105 
	mcom¶‘e_¿nges
:1;

106 
	mfœ¡_¿nge
:1;

107 } 
	tngx_h‰p_u¶ßd_m”g”_¡©e_t
;

113 
ngx_bË_–t_t
 
	mv®ue
;

114 
ngx_¬¿y_t
 *
	mf›ld_Ëngths
;

115 
ngx_¬¿y_t
 *
	mf›ld_v®ues
;

116 
ngx_¬¿y_t
 *
	mv®ue_Ëngths
;

117 
ngx_¬¿y_t
 *
	mv®ue_v®ues
;

118 } 
	tngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
;

124 
ngx_h‰p_com¶ex_v®ue_t
 *
	mÇme
;

125 
ngx_h‰p_com¶ex_v®ue_t
 *
	mv®ue
;

126 } 
	tngx_h‰p_u¶ßd_h—d”_‹m¶©e_t
;

132 #ià(
NGX_PCRE
)

133 
ngx_»gex_t
 *
	m»gex
;

134 
ngx_št_t
 
	mnÿ±u»s
;

136 
ngx_¡r_t
 
	m‹xt
;

138 } 
	tngx_h‰p_u¶ßd_f›ld_fž‹r_t
;

141 
ngx_·th_t
 *
	m·th
;

142 
ngx_h‰p_com¶ex_v®ue_t
 
	mdyÇmic
;

143 
	mis_dyÇmic
:1;

144 } 
	tngx_h‰p_u¶ßd_·th_t
;

149 
	sngx_h‰p_u¶ßd_þ—nup_s
 {

150 
ngx_fd_t
 
	mfd
;

151 
u_ch¬
 *
	mfž’ame
;

152 
ngx_h‰p_h—d”s_out_t
 *
	mh—d”s_out
;

153 
ngx_¬¿y_t
 *
	mþ—nup_¡©u£s
;

154 
ngx_log_t
 *
	mlog
;

155 
	mabÜ‹d
:1;

156 } 
	tngx_u¶ßd_þ—nup_t
;

162 
ngx_¡r_t
 
	mu¾
;

163 
ngx_h‰p_com¶ex_v®ue_t
 *
	mu¾_cv
;

164 
ngx_h‰p_u¶ßd_·th_t
 *
	m¡©e_¡Üe_·th
;

165 
ngx_h‰p_u¶ßd_·th_t
 *
	m¡Üe_·th
;

166 
ngx_ušt_t
 
	m¡Üe_acûss
;

167 
size_t
 
	mbufãr_size
;

168 
size_t
 
	mm”ge_bufãr_size
;

169 
size_t
 
	m¿nge_h—d”_bufãr_size
;

170 
size_t
 
	mmax_h—d”_Ën
;

171 
size_t
 
	mmax_ouut_body_Ën
;

172 
off_t
 
	mmax_fže_size
;

173 
ngx_¬¿y_t
 *
	mf›ld_‹m¶©es
;

174 
ngx_¬¿y_t
 *
	magg»g©e_f›ld_‹m¶©es
;

175 
ngx_¬¿y_t
 *
	mf›ld_fž‹rs
;

176 
ngx_¬¿y_t
 *
	mþ—nup_¡©u£s
;

177 
ngx_¬¿y_t
 *
	mh—d”_‹m¶©es
;

178 
ngx_æag_t
 
	mfÜw¬d_¬gs
;

179 
ngx_æag_t
 
	mme_¬¿ys
;

180 
ngx_æag_t
 
	m»sumabË_u¶ßds
;

181 
ngx_æag_t
 
	mem±y_f›ld_Çmes
;

182 
size_t
 
	mlim™_¿‹
;

184 
	mmd5
:1;

185 
	msha1
:1;

186 
	msha256
:1;

187 
	msha512
:1;

188 
	müc32
:1;

189 } 
	tngx_h‰p_u¶ßd_loc_cÚf_t
;

191 
	sngx_h‰p_u¶ßd_md5_ùx_s
 {

192 
MD5_CTX
 
	mmd5
;

193 
u_ch¬
 
	mmd5_dige¡
[
MD5_DIGEST_LENGTH
 * 2];

194 } 
	tngx_h‰p_u¶ßd_md5_ùx_t
;

196 
	sngx_h‰p_u¶ßd_sha1_ùx_s
 {

197 
SHA_CTX
 
	msha1
;

198 
u_ch¬
 
	msha1_dige¡
[
SHA_DIGEST_LENGTH
 * 2];

199 } 
	tngx_h‰p_u¶ßd_sha1_ùx_t
;

201 
	sngx_h‰p_u¶ßd_sha256_ùx_s
 {

202 
SHA256_CTX
 
	msha256
;

203 
u_ch¬
 
	msha256_dige¡
[
SHA256_DIGEST_LENGTH
 * 2];

204 } 
	tngx_h‰p_u¶ßd_sha256_ùx_t
;

206 
	sngx_h‰p_u¶ßd_sha512_ùx_s
 {

207 
SHA512_CTX
 
	msha512
;

208 
u_ch¬
 
	msha512_dige¡
[
SHA512_DIGEST_LENGTH
 * 2];

209 } 
	tngx_h‰p_u¶ßd_sha512_ùx_t
;

211 
	gngx_h‰p_u¶ßd_ùx_s
;

216 
	$ngx_št_t
 (*
	tngx_h‰p_»que¡_body_d©a_hªdËr_±
)

217 (
	tngx_h‰p_u¶ßd_ùx_s
*, 
	tu_ch¬
 *, u_char*);

222 
	sngx_h‰p_u¶ßd_ùx_s
 {

223 
ngx_¡r_t
 
£ssiÚ_id
;

224 
ngx_¡r_t
 
bound¬y
;

225 
u_ch¬
 *
bound¬y_¡¬t
;

226 
u_ch¬
 *
bound¬y_pos
;

228 
u¶ßd_¡©e_t
 
¡©e
;

230 
u_ch¬
 *
h—d”_accumuÏtÜ
;

231 
u_ch¬
 *
h—d”_accumuÏtÜ_’d
;

232 
u_ch¬
 *
h—d”_accumuÏtÜ_pos
;

234 
ngx_¡r_t
 
f›ld_Çme
;

235 
ngx_¡r_t
 
fže_Çme
;

236 
ngx_¡r_t
 
cÚ‹Á_ty³
;

237 
ngx_¡r_t
 
cÚ‹Á_¿nge
;

238 
ngx_h‰p_u¶ßd_¿nge_t
 
cÚ‹Á_¿nge_n
;

240 
ngx_ušt_t
 
Üdš®
;

242 
u_ch¬
 *
ouut_bufãr
;

243 
u_ch¬
 *
ouut_bufãr_’d
;

244 
u_ch¬
 *
ouut_bufãr_pos
;

245 
u_ch¬
 *
m”ge_bufãr
;

246 
u_ch¬
 *
¿nge_h—d”_bufãr
;

247 
u_ch¬
 *
¿nge_h—d”_bufãr_pos
;

248 
u_ch¬
 *
¿nge_h—d”_bufãr_’d
;

250 
ngx_h‰p_»que¡_body_d©a_hªdËr_±
 
d©a_hªdËr
;

252 
	`ngx_št_t
 (*
¡¬t_·¹_f
)(
ngx_h‰p_u¶ßd_ùx_s
 *
u¶ßd_ùx
);

253 (*
fšish_·¹_f
)(
ngx_h‰p_u¶ßd_ùx_s
 *
u¶ßd_ùx
);

254 (*
abÜt_·¹_f
)(
ngx_h‰p_u¶ßd_ùx_s
 *
u¶ßd_ùx
);

255 
	`ngx_št_t
 (*
æush_ouut_bufãr_f
)(
ngx_h‰p_u¶ßd_ùx_s
 *
u¶ßd_ùx
, 
u_ch¬
 *
buf
, 
size_t
 
Ën
);

257 
ngx_h‰p_»que¡_t
 *
»que¡
;

258 
ngx_log_t
 *
log
;

260 
ngx_fže_t
 
ouut_fže
;

261 
ngx_fže_t
 
¡©e_fže
;

262 
ngx_chaš_t
 *
chaš
;

263 
ngx_chaš_t
 *
Ï¡
;

264 
ngx_chaš_t
 *
checkpošt
;

265 
ngx_chaš_t
 *
to_wr™e
;

266 
size_t
 
ouut_body_Ën
;

267 
size_t
 
lim™_¿‹
;

268 
ssize_t
 
»ûived
;

270 
ngx_poÞ_þ—nup_t
 *
þn
;

272 
ngx_h‰p_u¶ßd_md5_ùx_t
 *
md5_ùx
;

273 
ngx_h‰p_u¶ßd_sha1_ùx_t
 *
sha1_ùx
;

274 
ngx_h‰p_u¶ßd_sha256_ùx_t
 *
sha256_ùx
;

275 
ngx_h‰p_u¶ßd_sha512_ùx_t
 *
sha512_ùx
;

276 
ušt32_t
 
üc32
;

277 
ngx_·th_t
 *
¡Üe_·th
;

278 
ngx_·th_t
 *
¡©e_¡Üe_·th
;

280 
fœ¡_·¹
:1;

281 
disÿrd_d©a
:1;

282 
is_fže
:1;

283 
·¹Ÿl_cÚ‹Á
:1;

284 
´ev’t_ouut
:1;

285 
ÿlcuÏ‹_üc32
:1;

286 
¡¬‹d
:1;

287 
uÃncoded
:1;

288 
no_cÚ‹Á
:1;

289 
¿w_šput
:1;

290 } 
	tngx_h‰p_u¶ßd_ùx_t
;

292 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_‹¡_ex³ù
(
ngx_h‰p_»que¡_t
 *
r
);

294 #ià(
NGX_HTTP_V2
)

295 
	`ngx_h‰p_u¶ßd_»ad_ev’t_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
);

297 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
);

298 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_ÝtiÚs_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
);

299 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_body_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
);

301 *
	`ngx_h‰p_u¶ßd_ü—‹_loc_cÚf
(
ngx_cÚf_t
 *
cf
);

302 *
	`ngx_h‰p_u¶ßd_m”ge_loc_cÚf
(
ngx_cÚf_t
 *
cf
,

303 *
·»Á
, *
chžd
);

304 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_add_v¬ŸbËs
(
ngx_cÚf_t
 *
cf
);

305 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

306 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

307 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_md5_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

308 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

309 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_sha1_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

310 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

311 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_sha256_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

312 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

313 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_sha512_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

314 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

315 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_fže_size_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

316 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

317 
	`ngx_h‰p_u¶ßd_cÚ‹Á_¿nge_v¬ŸbË_£t
(
ngx_h‰p_»que¡_t
 *
r
,

318 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

319 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_cÚ‹Á_¿nge_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

320 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

321 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_üc32_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

322 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

323 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_ušt_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

324 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
);

325 *
	`ngx_h‰p_u¶ßd_·ss
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
, *
cÚf
);

327 
ngx_št_t


328 
	`ngx_h‰p_u¶ßd_´oûss_f›ld_‹m¶©es
(
ngx_h‰p_»que¡_t
 *
r
,

329 
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
 *
t
, 
ngx_¡r_t
 *
f›ld_Çme
,‚gx_¡r_ˆ*
f›ld_v®ue
);

331 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_¡¬t_hªdËr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
);

332 
	`ngx_h‰p_u¶ßd_fšish_hªdËr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
);

333 
	`ngx_h‰p_u¶ßd_abÜt_hªdËr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
);

335 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_æush_ouut_bufãr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
,

336 
u_ch¬
 *
buf
, 
size_t
 
Ën
);

337 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_­³nd_f›ld
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
,

338 
ngx_¡r_t
 *
Çme
,‚gx_¡r_ˆ*
v®ue
);

339 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_m”ge_¿nges
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
, 
ngx_h‰p_u¶ßd_¿nge_t
 *
¿nge_n
);

340 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_·r£_¿nge
(
ngx_¡r_t
 *
¿nge
, 
ngx_h‰p_u¶ßd_¿nge_t
 *
¿nge_n
);

342 
	`ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
);

343 
ngx_št_t
 
	`ngx_h‰p_do_»ad_u¶ßd_þ›Á_»que¡_body
(
ngx_h‰p_»que¡_t
 *
r
);

344 
ngx_št_t
 
	`ngx_h‰p_´oûss_»que¡_body
(
ngx_h‰p_»que¡_t
 *
r
, 
ngx_chaš_t
 *
body
);

346 
ngx_št_t
 
	`ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body
(
ngx_h‰p_»que¡_t
 *
r
);

348 *
	`ngx_h‰p_u¶ßd_£t_fÜm_f›ld
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
,

349 *
cÚf
);

350 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_ev®_·th
(
ngx_h‰p_»que¡_t
 *
r
);

351 
ngx_št_t
 
	`ngx_h‰p_u¶ßd_ev®_¡©e_·th
(
ngx_h‰p_»que¡_t
 *
r
);

352 *
	`ngx_h‰p_u¶ßd_·ss_fÜm_f›ld
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
,

353 *
cÚf
);

354 *
	`ngx_h‰p_u¶ßd_£t_·th_¦Ù
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
,

355 *
cÚf
);

356 *
	`ngx_h‰p_u¶ßd_m”ge_·th_v®ue
(
ngx_cÚf_t
 *
cf
, 
ngx_h‰p_u¶ßd_·th_t
 **
·th
,‚gx_h‰p_u¶ßd_·th_ˆ*
´ev
,

357 
ngx_·th_š™_t
 *
š™
);

358 *
	`ngx_h‰p_u¶ßd_þ—nup
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
,

359 *
cÚf
);

360 
	`ngx_u¶ßd_þ—nup_hªdËr
(*
d©a
);

362 #ià
defšed
 
ngšx_v”siÚ
 &&‚ginx_version >= 7052

363 
ngx_·th_š™_t
 
ngx_h‰p_u¶ßd_‹mp_·th
 = {

364 
	`ngx_¡ršg
(
NGX_HTTP_PROXY_TEMP_PATH
), { 1, 2, 0 }

365 
	}
};

385 
u¶ßd_š™_ùx
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
);

397 
u¶ßd_shutdown_ùx
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
);

413 
ngx_št_t
 
u¶ßd_¡¬t
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
);

429 
ngx_št_t
 
u¶ßd_·r£_»que¡_h—d”s
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
ngx_h‰p_h—d”s_š_t
 *
h—d”s_š
);

446 
ngx_št_t
 
u¶ßd_´oûss_buf
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
u_ch¬
 *
¡¬t
, u_ch¬ *
’d
);

447 
ngx_št_t
 
u¶ßd_´oûss_¿w_buf
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
u_ch¬
 *
¡¬t
, u_ch¬ *
’d
);

449 
ngx_commªd_t
 
	gngx_h‰p_u¶ßd_commªds
[] = {

454 { 
ngx_¡ršg
("upload_pass"),

455 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


456 |
NGX_CONF_TAKE1
,

457 
ngx_h‰p_u¶ßd_·ss
,

458 
NGX_HTTP_LOC_CONF_OFFSET
,

460 
NULL
 },

465 { 
ngx_¡ršg
("upload_store"),

466 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


467 |
NGX_CONF_TAKE1234
,

468 
ngx_h‰p_u¶ßd_£t_·th_¦Ù
,

469 
NGX_HTTP_LOC_CONF_OFFSET
,

470 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
¡Üe_·th
),

471 
NULL
 },

476 { 
ngx_¡ršg
("upload_state_store"),

477 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_CONF_TAKE1234
,

478 
ngx_h‰p_u¶ßd_£t_·th_¦Ù
,

479 
NGX_HTTP_LOC_CONF_OFFSET
,

480 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
¡©e_¡Üe_·th
),

481 
NULL
 },

486 { 
ngx_¡ršg
("upload_store_access"),

487 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


488 |
NGX_CONF_TAKE123
,

489 
ngx_cÚf_£t_acûss_¦Ù
,

490 
NGX_HTTP_LOC_CONF_OFFSET
,

491 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
¡Üe_acûss
),

492 
NULL
 },

498 { 
ngx_¡ršg
("upload_buffer_size"),

499 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


500 |
NGX_CONF_TAKE1
,

501 
ngx_cÚf_£t_size_¦Ù
,

502 
NGX_HTTP_LOC_CONF_OFFSET
,

503 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
bufãr_size
),

504 
NULL
 },

510 { 
ngx_¡ršg
("upload_merge_buffer_size"),

511 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_CONF_TAKE1
,

512 
ngx_cÚf_£t_size_¦Ù
,

513 
NGX_HTTP_LOC_CONF_OFFSET
,

514 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
m”ge_bufãr_size
),

515 
NULL
 },

521 { 
ngx_¡ršg
("upload_range_header_buffer_size"),

522 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_CONF_TAKE1
,

523 
ngx_cÚf_£t_size_¦Ù
,

524 
NGX_HTTP_LOC_CONF_OFFSET
,

525 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
¿nge_h—d”_bufãr_size
),

526 
NULL
 },

531 { 
ngx_¡ršg
("upload_max_part_header_len"),

532 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


533 |
NGX_CONF_TAKE1
,

534 
ngx_cÚf_£t_size_¦Ù
,

535 
NGX_HTTP_LOC_CONF_OFFSET
,

536 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
max_h—d”_Ën
),

537 
NULL
 },

542 { 
ngx_¡ršg
("upload_max_file_size"),

543 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


544 |
NGX_CONF_TAKE1
,

545 
ngx_cÚf_£t_off_¦Ù
,

546 
NGX_HTTP_LOC_CONF_OFFSET
,

547 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
max_fže_size
),

548 
NULL
 },

553 { 
ngx_¡ršg
("upload_max_output_body_len"),

554 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


555 |
NGX_CONF_TAKE1
,

556 
ngx_cÚf_£t_size_¦Ù
,

557 
NGX_HTTP_LOC_CONF_OFFSET
,

558 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
max_ouut_body_Ën
),

559 
NULL
 },

564 { 
ngx_¡ršg
("upload_set_form_field"),

565 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


566 |
NGX_CONF_TAKE2
,

567 
ngx_h‰p_u¶ßd_£t_fÜm_f›ld
,

568 
NGX_HTTP_LOC_CONF_OFFSET
,

569 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
f›ld_‹m¶©es
),

570 
NULL
},

576 { 
ngx_¡ršg
("upload_aggregate_form_field"),

577 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


578 |
NGX_CONF_TAKE2
,

579 
ngx_h‰p_u¶ßd_£t_fÜm_f›ld
,

580 
NGX_HTTP_LOC_CONF_OFFSET
,

581 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
agg»g©e_f›ld_‹m¶©es
),

582 
NULL
},

587 { 
ngx_¡ršg
("upload_pass_form_field"),

588 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


589 |
NGX_CONF_TAKE1
,

590 
ngx_h‰p_u¶ßd_·ss_fÜm_f›ld
,

591 
NGX_HTTP_LOC_CONF_OFFSET
,

593 
NULL
},

599 { 
ngx_¡ršg
("upload_cleanup"),

600 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


601 |
NGX_CONF_1MORE
,

602 
ngx_h‰p_u¶ßd_þ—nup
,

603 
NGX_HTTP_LOC_CONF_OFFSET
,

605 
NULL
},

611 { 
ngx_¡ršg
("upload_pass_args"),

612 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


613 |
NGX_CONF_FLAG
,

614 
ngx_cÚf_£t_æag_¦Ù
,

615 
NGX_HTTP_LOC_CONF_OFFSET
,

616 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
fÜw¬d_¬gs
),

617 
NULL
 },

622 { 
ngx_¡ršg
("upload_limit_rate"),

623 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LIF_CONF


624 |
NGX_CONF_TAKE1
,

625 
ngx_cÚf_£t_size_¦Ù
,

626 
NGX_HTTP_LOC_CONF_OFFSET
,

627 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
lim™_¿‹
),

628 
NULL
 },

633 { 
ngx_¡ršg
("upload_tame_arrays"),

634 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


635 |
NGX_CONF_FLAG
,

636 
ngx_cÚf_£t_æag_¦Ù
,

637 
NGX_HTTP_LOC_CONF_OFFSET
,

638 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
me_¬¿ys
),

639 
NULL
 },

644 { 
ngx_¡ršg
("upload_resumable"),

645 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


646 |
NGX_CONF_FLAG
,

647 
ngx_cÚf_£t_æag_¦Ù
,

648 
NGX_HTTP_LOC_CONF_OFFSET
,

649 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
»sumabË_u¶ßds
),

650 
NULL
 },

655 { 
ngx_¡ršg
("upload_empty_fiels_names"),

656 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


657 |
NGX_CONF_FLAG
,

658 
ngx_cÚf_£t_æag_¦Ù
,

659 
NGX_HTTP_LOC_CONF_OFFSET
,

660 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
em±y_f›ld_Çmes
),

661 
NULL
 },

666 { 
ngx_¡ršg
("upload_add_header"),

667 
NGX_HTTP_MAIN_CONF
|
NGX_HTTP_SRV_CONF
|
NGX_HTTP_LOC_CONF
|
NGX_HTTP_LMT_CONF
|
NGX_HTTP_LIF_CONF


668 |
NGX_CONF_TAKE2
,

669 
ngx_h‰p_u¶ßd_£t_fÜm_f›ld
,

670 
NGX_HTTP_LOC_CONF_OFFSET
,

671 
off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
h—d”_‹m¶©es
),

672 
NULL
},

674 
ngx_nuÎ_commªd


677 
ngx_h‰p_moduË_t
 
	gngx_h‰p_u¶ßd_moduË_ùx
 = {

678 
ngx_h‰p_u¶ßd_add_v¬ŸbËs
,

679 
NULL
,

681 
NULL
,

682 
NULL
,

684 
NULL
,

685 
NULL
,

687 
ngx_h‰p_u¶ßd_ü—‹_loc_cÚf
,

688 
ngx_h‰p_u¶ßd_m”ge_loc_cÚf


691 
ngx_moduË_t
 
	gngx_h‰p_u¶ßd_moduË
 = {

692 
NGX_MODULE_V1
,

693 &
ngx_h‰p_u¶ßd_moduË_ùx
,

694 
ngx_h‰p_u¶ßd_commªds
,

695 
NGX_HTTP_MODULE
,

696 
NULL
,

697 
NULL
,

698 
NULL
,

699 
NULL
,

700 
NULL
,

701 
NULL
,

702 
NULL
,

703 
NGX_MODULE_V1_PADDING


706 
ngx_h‰p_v¬ŸbË_t
 
	gngx_h‰p_u¶ßd_v¬ŸbËs
[] = {

708 { 
ngx_¡ršg
("u¶ßd_f›ld_Çme"), 
NULL
, 
ngx_h‰p_u¶ßd_v¬ŸbË
,

709 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
f›ld_Çme
),

710 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

712 { 
ngx_¡ršg
("upload_content_type"),

713 
NULL
,

714 
ngx_h‰p_u¶ßd_v¬ŸbË
,

715 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
cÚ‹Á_ty³
),

716 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

718 { 
ngx_¡ršg
("u¶ßd_fže_Çme"), 
NULL
, 
ngx_h‰p_u¶ßd_v¬ŸbË
,

719 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
fže_Çme
),

720 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

722 { 
ngx_¡ršg
("u¶ßd_fže_numb”"), 
NULL
, 
ngx_h‰p_u¶ßd_ušt_v¬ŸbË
,

723 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
Üdš®
),

724 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

726 { 
ngx_¡ršg
("u¶ßd_tmp_·th"), 
NULL
, 
ngx_h‰p_u¶ßd_v¬ŸbË
,

727 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
ouut_fže
.
Çme
),

728 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

730 { 
ngx_¡ršg
("upload_content_range"),

731 
ngx_h‰p_u¶ßd_cÚ‹Á_¿nge_v¬ŸbË_£t
,

732 
ngx_h‰p_u¶ßd_cÚ‹Á_¿nge_v¬ŸbË
,

733 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
cÚ‹Á_¿nge_n
),

734 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

736 { 
ngx_nuÎ_¡ršg
, 
NULL
, NULL, 0, 0, 0 }

739 
ngx_h‰p_v¬ŸbË_t
 
	gngx_h‰p_u¶ßd_agg»g©e_v¬ŸbËs
[] = {

741 { 
ngx_¡ršg
("u¶ßd_fže_md5"), 
NULL
, 
ngx_h‰p_u¶ßd_md5_v¬ŸbË
,

742 (
ušŒ_t
) "0123456789abcdef",

743 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

745 { 
ngx_¡ršg
("u¶ßd_fže_md5_uc"), 
NULL
, 
ngx_h‰p_u¶ßd_md5_v¬ŸbË
,

746 (
ušŒ_t
) "0123456789ABCDEF",

747 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

749 { 
ngx_¡ršg
("u¶ßd_fže_sha1"), 
NULL
, 
ngx_h‰p_u¶ßd_sha1_v¬ŸbË
,

750 (
ušŒ_t
) "0123456789abcdef",

751 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

753 { 
ngx_¡ršg
("u¶ßd_fže_sha1_uc"), 
NULL
, 
ngx_h‰p_u¶ßd_sha1_v¬ŸbË
,

754 (
ušŒ_t
) "0123456789ABCDEF",

755 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

757 { 
ngx_¡ršg
("u¶ßd_fže_sha256"), 
NULL
, 
ngx_h‰p_u¶ßd_sha256_v¬ŸbË
,

758 (
ušŒ_t
) "0123456789abcdef",

759 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

761 { 
ngx_¡ršg
("u¶ßd_fže_sha256_uc"), 
NULL
, 
ngx_h‰p_u¶ßd_sha256_v¬ŸbË
,

762 (
ušŒ_t
) "0123456789ABCDEF",

763 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

765 { 
ngx_¡ršg
("u¶ßd_fže_sha512"), 
NULL
, 
ngx_h‰p_u¶ßd_sha512_v¬ŸbË
,

766 (
ušŒ_t
) "0123456789abcdef",

767 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

769 { 
ngx_¡ršg
("u¶ßd_fže_sha512_uc"), 
NULL
, 
ngx_h‰p_u¶ßd_sha512_v¬ŸbË
,

770 (
ušŒ_t
) "0123456789ABCDEF",

771 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

773 { 
ngx_¡ršg
("u¶ßd_fže_üc32"), 
NULL
, 
ngx_h‰p_u¶ßd_üc32_v¬ŸbË
,

774 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
üc32
),

775 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

777 { 
ngx_¡ršg
("u¶ßd_fže_size"), 
NULL
, 
ngx_h‰p_u¶ßd_fže_size_v¬ŸbË
,

778 (
ušŒ_t
è
off£tof
(
ngx_h‰p_u¶ßd_ùx_t
, 
ouut_fže
.
off£t
),

779 
NGX_HTTP_VAR_CHANGEABLE
|
NGX_HTTP_VAR_NOCACHEABLE
|
NGX_HTTP_VAR_NOHASH
, 0 },

781 { 
ngx_nuÎ_¡ršg
, 
NULL
, NULL, 0, 0, 0 }

784 
ngx_¡r_t
 
	gngx_h‰p_u¶ßd_em±y_f›ld_v®ue
 = 
ngx_nuÎ_¡ršg
;

786 
ngx_¡r_t
 
	gngx_u¶ßd_f›ld_·¹1
 = {

787 (
CRLF
 
CONTENT_DISPOSITION_STRING
 " form-data;‚ame=\"") - 1,

788 (
u_ch¬
*)
CRLF
 
CONTENT_DISPOSITION_STRING
 " form-data;‚ame=\""

791 
ngx_¡r_t
 
	gngx_u¶ßd_f›ld_·¹2
 = {

792 ("\"" 
CRLF
 CRLF) - 1,

793 (
u_ch¬
*)"\"" 
CRLF
 CRLF

796 
ngx_št_t


797 
	$ngx_h‰p_u¶ßd_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
)

799 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
;

800 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

801 
ngx_št_t
 
rc
;

803 if(
r
->
m‘hod
 & 
NGX_HTTP_OPTIONS
)

804  
	`ngx_h‰p_u¶ßd_ÝtiÚs_hªdËr
(
r
);

806 ià(!(
r
->
m‘hod
 & 
NGX_HTTP_POST
))

807  
NGX_HTTP_NOT_ALLOWED
;

809 
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

811 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

813 ià(
u
 =ð
NULL
) {

814 
u
 = 
	`ngx_pÿÎoc
(
r
->
poÞ
, (
ngx_h‰p_u¶ßd_ùx_t
));

815 ià(
u
 =ð
NULL
) {

816  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

819 
	`ngx_h‰p_£t_ùx
(
r
, 
u
, 
ngx_h‰p_u¶ßd_moduË
);

822 if(
ulcf
->
md5
) {

823 if(
u
->
md5_ùx
 =ð
NULL
) {

824 
u
->
md5_ùx
 = 
	`ngx_·Îoc
(
r
->
poÞ
, (
ngx_h‰p_u¶ßd_md5_ùx_t
));

825 ià(
u
->
md5_ùx
 =ð
NULL
) {

826  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

830 
u
->
md5_ùx
 = 
NULL
;

832 if(
ulcf
->
sha1
) {

833 if(
u
->
sha1_ùx
 =ð
NULL
) {

834 
u
->
sha1_ùx
 = 
	`ngx_·Îoc
(
r
->
poÞ
, (
ngx_h‰p_u¶ßd_sha1_ùx_t
));

835 ià(
u
->
sha1_ùx
 =ð
NULL
) {

836  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

840 
u
->
sha1_ùx
 = 
NULL
;

842 if(
ulcf
->
sha256
) {

843 if(
u
->
sha256_ùx
 =ð
NULL
) {

844 
u
->
sha256_ùx
 = 
	`ngx_·Îoc
(
r
->
poÞ
, (
ngx_h‰p_u¶ßd_sha256_ùx_t
));

845 ià(
u
->
sha256_ùx
 =ð
NULL
) {

846  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

850 
u
->
sha256_ùx
 = 
NULL
;

852 if(
ulcf
->
sha512
) {

853 if(
u
->
sha512_ùx
 =ð
NULL
) {

854 
u
->
sha512_ùx
 = 
	`ngx_·Îoc
(
r
->
poÞ
, (
ngx_h‰p_u¶ßd_sha512_ùx_t
));

855 ià(
u
->
sha512_ùx
 =ð
NULL
) {

856  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

860 
u
->
sha512_ùx
 = 
NULL
;

862 
u
->
ÿlcuÏ‹_üc32
 = 
ulcf
->
üc32
;

864 
u
->
»que¡
 = 
r
;

865 
u
->
log
 = 
r
->
cÚÃùiÚ
->log;

866 
u
->
chaš
 = u->
Ï¡
 = u->
checkpošt
 = 
NULL
;

867 
u
->
ouut_body_Ën
 = 0;

869 
u
->
´ev’t_ouut
 = 0;

870 
u
->
no_cÚ‹Á
 = 1;

871 
u
->
lim™_¿‹
 = 
ulcf
->limit_rate;

872 
u
->
»ûived
 = 0;

873 
u
->
Üdš®
 = 0;

875 
	`u¶ßd_š™_ùx
(
u
);

877 
rc
 = 
	`u¶ßd_·r£_»que¡_h—d”s
(
u
, &
r
->
h—d”s_š
);

879 if(
rc
 !ð
NGX_OK
) {

880 
	`u¶ßd_shutdown_ùx
(
u
);

881  
rc
;

884 
rc
 = 
	`ngx_h‰p_u¶ßd_ev®_·th
(
r
);

886 if(
rc
 !ð
NGX_OK
) {

887 
	`u¶ßd_shutdown_ùx
(
u
);

888  
rc
;

891 
rc
 = 
	`ngx_h‰p_u¶ßd_ev®_¡©e_·th
(
r
);

893 if(
rc
 !ð
NGX_OK
) {

894 
	`u¶ßd_shutdown_ùx
(
u
);

895  
rc
;

898 ià(
	`ngx_h‰p_u¶ßd_‹¡_ex³ù
(
r
è!ð
NGX_OK
) {

899 
	`u¶ßd_shutdown_ùx
(
u
);

900  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

903 if(
	`u¶ßd_¡¬t
(
u
, 
ulcf
è!ð
NGX_OK
)

904  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

906 #ià(
NGX_HTTP_V2
)

907 ià(
r
->
¡»am
) {

908 
r
->
»que¡_body_no_bufãršg
 = 1;

910 
rc
 = 
	`ngx_h‰p_»ad_þ›Á_»que¡_body
(
r
, 
ngx_h‰p_u¶ßd_»ad_ev’t_hªdËr
);

912 ià(
rc
 >ð
NGX_HTTP_SPECIAL_RESPONSE
) {

913 
	`u¶ßd_shutdown_ùx
(
u
);

914  
rc
;

917  
NGX_DONE
;

921 
rc
 = 
	`ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body
(
r
);

923 ià(
rc
 >ð
NGX_HTTP_SPECIAL_RESPONSE
) {

924  
rc
;

927  
NGX_DONE
;

928 
	}
}

930 #ià(
NGX_HTTP_V2
)

932 
	$ngx_h‰p_u¶ßd_»ad_ev’t_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
)

934 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

935 
ngx_h‰p_»que¡_body_t
 *
rb
;

936 
ngx_št_t
 
rc
;

937 
ngx_chaš_t
 *
š
;

938 
ssize_t
 
n
, 
lim™
, 
buf_»ad_size
, 
Ãxt_buf_size
, 
»maššg
;

939 
ngx_m£c_t
 
d–ay
;

940 
ngx_ev’t_t
 *
»v
;

942 ià(
ngx_ex™šg
 || 
ngx_‹rmš©e
) {

943 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
NGX_HTTP_CLOSE
);

947 
»v
 = 
r
->
cÚÃùiÚ
->
»ad
;

948 
rb
 = 
r
->
»que¡_body
;

950 ià(
rb
 =ð
NULL
) {

951 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
NGX_HTTP_INTERNAL_SERVER_ERROR
);

955 
r
->
»ad_ev’t_hªdËr
 = 
ngx_h‰p_u¶ßd_»ad_ev’t_hªdËr
;

957 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

960 
buf_»ad_size
 = 0;

962 
š
 = 
rb
->
bufs
 ; in; iÀðš->
Ãxt
) {

963 
n
 = 
š
->
buf
->
Ï¡
 - in->buf->
pos
;

965 
rc
 = 
u
->
	`d©a_hªdËr
(u, 
š
->
buf
->
pos
, in->buf->po + 
n
);

967 
š
->
buf
->
pos
 +ð
n
;

968 
u
->
»ûived
 +ð
n
;

969 
buf_»ad_size
 +ð
n
;

971 ià(
rc
 !ð
NGX_OK
) {

972 
”r
;

975 
rb
->
bufs
 = 
NULL
;

978 ià(!
r
->
»adšg_body
) {

979 
rc
 = 
u
->
	`d©a_hªdËr
(u, 
NULL
, NULL);

980 ià(
rc
 =ð
NGX_OK
) {

983 
”r
;

989 ià(
u
->
lim™_¿‹
) {

990 
»maššg
 = ((
ssize_t
è
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
è- 
u
->
»ûived
;

991 
Ãxt_buf_size
 = (
buf_»ad_size
 > 
»maššg
) ?„emaining : buf_read_size;

992 
lim™
 = 
u
->
lim™_¿‹
 * (
	`ngx_time
(è- 
r
->
¡¬t_£c
 + 1è- (u->
»ûived
 + 
Ãxt_buf_size
);

993 ià(
lim™
 < 0) {

994 
»v
->
d–ayed
 = 1;

995 
	`ngx_add_tim”
(
»v
, (
ngx_m£c_t
è((
lim™
 * -1000 / 
u
->
lim™_¿‹
) + 1));

1000 
rc
 = 
	`ngx_h‰p_»ad_unbufã»d_»que¡_body
(
r
);

1002 ià(
rc
 >ð
NGX_HTTP_SPECIAL_RESPONSE
) {

1003 
”r
;

1006 ià(
rb
->
bufs
 =ð
NULL
) {

1012 ià(
u
->
lim™_¿‹
) {

1013 
buf_»ad_size
 = 0;

1014 
š
 = 
rb
->
bufs
 ; in; iÀðš->
Ãxt
) {

1015 
buf_»ad_size
 +ð(
š
->
buf
->
Ï¡
 - in->buf->
pos
);

1017 
d–ay
 = (
ngx_m£c_t
è(
buf_»ad_size
 * 1000 / 
u
->
lim™_¿‹
 + 1);

1018 ià(
d–ay
 > 0) {

1019 
»v
->
d–ayed
 = 1;

1020 
	`ngx_add_tim”
(
»v
, 
d–ay
);

1027 
rc
 = 
	`ngx_h‰p_u¶ßd_body_hªdËr
(
r
);

1029 
”r
:

1030 
rc
) {

1031 
NGX_UPLOAD_MALFORMED
:

1032 
rc
 = 
NGX_HTTP_BAD_REQUEST
;

1034 
NGX_UPLOAD_TOOLARGE
:

1035 
rc
 = 
NGX_HTTP_REQUEST_ENTITY_TOO_LARGE
;

1037 
NGX_UPLOAD_IOERROR
:

1038 
rc
 = 
NGX_HTTP_SERVICE_UNAVAILABLE
;

1040 
NGX_UPLOAD_NOMEM
:

1041 
NGX_UPLOAD_SCRIPTERROR
:

1042 
rc
 = 
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1045 ià(
rc
 >ð
NGX_HTTP_SPECIAL_RESPONSE
) {

1046 
	`u¶ßd_shutdown_ùx
(
u
);

1047 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
rc
);

1049 
	}
}

1052 
ngx_št_t
 
	$ngx_h‰p_u¶ßd_add_h—d”s
(
ngx_h‰p_»que¡_t
 *
r
, 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
) {

1053 
ngx_¡r_t
 
Çme
;

1054 
ngx_¡r_t
 
v®ue
;

1055 
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
 *
t
;

1056 
ngx_bË_–t_t
 *
h
;

1057 
ngx_ušt_t
 
i
;

1059 ià(
ulcf
->
h—d”_‹m¶©es
 !ð
NULL
) {

1060 
t
 = 
ulcf
->
h—d”_‹m¶©es
->
–ts
;

1061 
i
 = 0; i < 
ulcf
->
h—d”_‹m¶©es
->
ÃÉs
; i++) {

1062 ià(
	`ngx_h‰p_u¶ßd_´oûss_f›ld_‹m¶©es
(
r
, &
t
[
i
], &
Çme
, &
v®ue
è!ð
NGX_OK
) {

1063  
NGX_ERROR
;

1066 if(
Çme
.
Ën
 !ð0 && 
v®ue
.len != 0) {

1067 
h
 = 
	`ngx_li¡_push
(&
r
->
h—d”s_out
.
h—d”s
);

1068 if(
h
 =ð
NULL
) {

1069  
NGX_ERROR
;

1072 
h
->
hash
 = 1;

1073 
h
->
key
.
Ën
 = 
Çme
.len;

1074 
h
->
key
.
d©a
 = 
Çme
.data;

1075 
h
->
v®ue
.
Ën
 = value.len;

1076 
h
->
v®ue
.
d©a
 = value.data;

1081  
NGX_OK
;

1082 
	}
}

1084 
ngx_št_t


1085 
	$ngx_h‰p_u¶ßd_ev®_·th
(
ngx_h‰p_»que¡_t
 *
r
) {

1086 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

1087 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
;

1088 
ngx_¡r_t
 
v®ue
;

1090 
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1091 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1093 if(
ulcf
->
¡Üe_·th
->
is_dyÇmic
) {

1094 
u
->
¡Üe_·th
 = 
	`ngx_pÿÎoc
(
r
->
poÞ
, (
ngx_·th_t
));

1095 if(
u
->
¡Üe_·th
 =ð
NULL
) {

1096  
NGX_ERROR
;

1099 
	`ngx_memýy
(
u
->
¡Üe_·th
, 
ulcf
->¡Üe_·th->
·th
, (
ngx_·th_t
));

1101 if(
	`ngx_h‰p_com¶ex_v®ue
(
r
, &
ulcf
->
¡Üe_·th
->
dyÇmic
, &
v®ue
è!ð
NGX_OK
) {

1102  
NGX_ERROR
;

1105 
u
->
¡Üe_·th
->
Çme
.
d©a
 = 
v®ue
.data;

1106 
u
->
¡Üe_·th
->
Çme
.
Ën
 = 
v®ue
.len;

1109 
u
->
¡Üe_·th
 = 
ulcf
->¡Üe_·th->
·th
;

1112  
NGX_OK
;

1113 
	}
}

1115 
ngx_št_t


1116 
	$ngx_h‰p_u¶ßd_ev®_¡©e_·th
(
ngx_h‰p_»que¡_t
 *
r
) {

1117 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

1118 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
;

1119 
ngx_¡r_t
 
v®ue
;

1121 
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1122 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1124 if(
ulcf
->
¡©e_¡Üe_·th
->
is_dyÇmic
) {

1125 
u
->
¡©e_¡Üe_·th
 = 
	`ngx_pÿÎoc
(
r
->
poÞ
, (
ngx_·th_t
));

1126 if(
u
->
¡Üe_·th
 =ð
NULL
) {

1127  
NGX_ERROR
;

1130 
	`ngx_memýy
(
u
->
¡©e_¡Üe_·th
, 
ulcf
->¡©e_¡Üe_·th->
·th
, (
ngx_·th_t
));

1132 if(
	`ngx_h‰p_com¶ex_v®ue
(
r
, &
ulcf
->
¡©e_¡Üe_·th
->
dyÇmic
, &
v®ue
è!ð
NGX_OK
) {

1133  
NGX_ERROR
;

1136 
u
->
¡©e_¡Üe_·th
->
Çme
.
d©a
 = 
v®ue
.data;

1137 
u
->
¡©e_¡Üe_·th
->
Çme
.
Ën
 = 
v®ue
.len;

1140 
u
->
¡©e_¡Üe_·th
 = 
ulcf
->¡©e_¡Üe_·th->
·th
;

1143  
NGX_OK
;

1144 
	}
}

1146 
ngx_št_t
 
	$ngx_h‰p_u¶ßd_ÝtiÚs_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
) {

1147 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
;

1149 
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1151 
r
->
h—d”s_out
.
¡©us
 = 
NGX_HTTP_OK
;

1153 if(
	`ngx_h‰p_u¶ßd_add_h—d”s
(
r
, 
ulcf
è!ð
NGX_OK
) {

1154  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1157 
r
->
h—d”_Úly
 = 1;

1158 
r
->
h—d”s_out
.
cÚ‹Á_Ëngth_n
 = 0;

1159 
r
->
®low_¿nges
 = 0;

1161  
	`ngx_h‰p_£nd_h—d”
(
r
);

1162 
	}
}

1164 
ngx_št_t
 
	$ngx_h‰p_u¶ßd_body_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
) {

1165 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1166 
ngx_h‰p_u¶ßd_ùx_t
 *
ùx
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1168 
ngx_¡r_t
 
¬gs
;

1169 
ngx_ušt_t
 
æags
;

1170 
ngx_št_t
 
rc
;

1171 
ngx_¡r_t
 
uri
;

1172 
ngx_buf_t
 *
b
;

1173 
ngx_chaš_t
 *
þ
, 
out
;

1174 
ngx_¡r_t
 
dummy
 = 
	`ngx_¡ršg
("<ngx_upload_module_dummy>");

1175 
ngx_bË_–t_t
 *
h
;

1177 if(
ùx
->
´ev’t_ouut
) {

1178 
r
->
h—d”s_out
.
¡©us
 = 
NGX_HTTP_CREATED
;

1183 if(
ùx
->
¿nge_h—d”_bufãr_pos
 !ðùx->
¿nge_h—d”_bufãr
) {

1184 
h
 = 
	`ngx_li¡_push
(&
r
->
h—d”s_out
.
h—d”s
);

1185 ià(
h
 =ð
NULL
) {

1186  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1189 
h
->
hash
 = 1;

1190 
h
->
key
.
Ën
 = ("Range") - 1;

1191 
h
->
key
.
d©a
 = (
u_ch¬
 *) "Range";

1192 
h
->
v®ue
.
Ën
 = 
ùx
->
¿nge_h—d”_bufãr_pos
 - ctx->
¿nge_h—d”_bufãr
;

1193 
h
->
v®ue
.
d©a
 = 
ùx
->
¿nge_h—d”_bufãr
;

1195 
b
 = 
	`ngx_pÿÎoc
(
r
->
poÞ
, (
ngx_buf_t
));

1196 ià(
b
 =ð
NULL
) {

1197  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1200 
r
->
h—d”s_out
.
cÚ‹Á_Ëngth_n
 = 
h
->
v®ue
.
Ën
;

1202 
r
->
®low_¿nges
 = 0;

1204 
rc
 = 
	`ngx_h‰p_£nd_h—d”
(
r
);

1206 if(
rc
 =ð
NGX_ERROR
) {

1207  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1210 if(
rc
 > 
NGX_OK
) {

1211  
rc
;

1214 
b
->
š_fže
 = 0;

1215 
b
->
memÜy
 = 1;

1216 
b
->
Ï¡_buf
 = b->
Ï¡_š_chaš
 = b->
æush
 = 1;

1218 
b
->
¡¬t
 = b->
pos
 = 
ùx
->
¿nge_h—d”_bufãr
;

1219 
b
->
Ï¡
 = 
ùx
->
¿nge_h—d”_bufãr_pos
;

1220 
b
->
’d
 = 
ùx
->
¿nge_h—d”_bufãr_’d
;

1222 
out
.
buf
 = 
b
;

1223 
out
.
Ãxt
 = 
NULL
;

1225 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
	`ngx_h‰p_ouut_fž‹r
Ô, &
out
));

1228 
r
->
h—d”_Úly
 = 1;

1229 
r
->
h—d”s_out
.
cÚ‹Á_Ëngth_n
 = 0;

1231 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
	`ngx_h‰p_£nd_h—d”
(r));

1234  
NGX_OK
;

1237 if(
ulcf
->
max_ouut_body_Ën
 != 0) {

1238 if(
ùx
->
ouut_body_Ën
 + ctx->
bound¬y
.
Ën
 + 4 > 
ulcf
->
max_ouut_body_Ën
)

1239  
NGX_HTTP_REQUEST_ENTITY_TOO_LARGE
;

1242 if(
ùx
->
no_cÚ‹Á
) {

1243 
rc
 = 
	`ngx_h‰p_u¶ßd_­³nd_f›ld
(
ùx
, &
dummy
, &
ngx_h‰p_u¶ßd_em±y_f›ld_v®ue
);

1245 if(
rc
 !ð
NGX_OK
) {

1246  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1253 
b
 = 
	`ngx_ü—‹_‹mp_buf
(
r
->
poÞ
, 
ùx
->
bound¬y
.
Ën
 + 4);

1255 ià(
b
 =ð
NULL
) {

1256  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1259 
þ
 = 
	`ngx_®loc_chaš_lšk
(
r
->
poÞ
);

1260 ià(
þ
 =ð
NULL
) {

1261  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1264 
b
->
Ï¡_š_chaš
 = 1;

1265 
b
->
Ï¡_buf
 = 1;

1267 
þ
->
buf
 = 
b
;

1268 
þ
->
Ãxt
 = 
NULL
;

1270 if(
ùx
->
chaš
 =ð
NULL
) {

1271 
ùx
->
chaš
 = 
þ
;

1272 
ùx
->
Ï¡
 = 
þ
;

1274 
ùx
->
Ï¡
->
Ãxt
 = 
þ
;

1275 
ùx
->
Ï¡
 = 
þ
;

1278 
b
->
Ï¡
 = 
	`ngx_ýymem
(b->Ï¡, 
ùx
->
bound¬y
.
d©a
, ctx->bound¬y.
Ën
);

1280 *
b
->
Ï¡
++ = '-';

1281 *
b
->
Ï¡
++ = '-';

1282 *
b
->
Ï¡
++ = 
CR
;

1283 *
b
->
Ï¡
++ = 
LF
;

1285 ià(
ulcf
->
u¾_cv
) {

1287 ià(
	`ngx_h‰p_com¶ex_v®ue
(
r
, 
ulcf
->
u¾_cv
, &
uri
è!ð
NGX_OK
) {

1288  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1291 ià(
uri
.
Ën
 == 0) {

1292 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 0,

1294 &
ulcf
->
u¾_cv
->
v®ue
);

1296  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1300 
uri
 = 
ulcf
->
u¾
;

1303 ià(
ulcf
->
fÜw¬d_¬gs
) {

1304 
¬gs
 = 
r
->args;

1307 
¬gs
.
Ën
 = 0;

1308 
¬gs
.
d©a
 = 
NULL
;

1311 
æags
 = 0;

1313 ià(
	`ngx_h‰p_·r£_un§ã_uri
(
r
, &
uri
, &
¬gs
, &
æags
è!ð
NGX_OK
) {

1314  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1317 
r
->
»que¡_body
->
bufs
 = 
ùx
->
chaš
;

1320 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
 = 0;

1322 
þ
 = 
ùx
->
chaš
 ; cÈ; cÈðþ->
Ãxt
)

1323 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
 +ð(
þ
->
buf
->
Ï¡
 - cl->buf->
pos
);

1325 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth
->
v®ue
.
d©a
 = 
	`ngx_·Îoc
Ô->
poÞ
, 
NGX_OFF_T_LEN
);

1327 ià(
r
->
h—d”s_š
.
cÚ‹Á_Ëngth
->
v®ue
.
d©a
 =ð
NULL
) {

1328  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1331 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth
->
v®ue
.
Ën
 =

1332 
	`ngx_¥rštf
(
r
->
h—d”s_š
.
cÚ‹Á_Ëngth
->
v®ue
.
d©a
, "%O",„->h—d”s_š.
cÚ‹Á_Ëngth_n
)

1333 - 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth
->
v®ue
.
d©a
;

1335 #ià
defšed
 
ngšx_v”siÚ
 &&‚ginx_version >= 8011

1336 
r
->
maš
->
couÁ
--;

1339 if(
uri
.
Ën
 !ð0 && uri.
d©a
[0] == '/') {

1340 
rc
 = 
	`ngx_h‰p_š‹º®_»dœeù
(
r
, &
uri
, &
¬gs
);

1343 
rc
 = 
	`ngx_h‰p_Çmed_loÿtiÚ
(
r
, &
uri
);

1346 ià(
rc
 =ð
NGX_ERROR
) {

1347  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

1350  
rc
;

1351 
	}
}

1353 
ngx_št_t


1354 
	$ngx_h‰p_u¶ßd_´oûss_f›ld_‹m¶©es
(

1355 
ngx_h‰p_»que¡_t
 *
r
, 
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
 *
t
,

1356 
ngx_¡r_t
 *
Çme
,‚gx_¡r_ˆ*
v®ue
)

1358 ià(
t
->
f›ld_Ëngths
 =ð
NULL
) {

1359 *
Çme
 = 
t
->
v®ue
.
key
;

1360 } ià(
	`ngx_h‰p_süt_run
(
r
, 
Çme
, 
t
->
f›ld_Ëngths
->
–ts
, 0,

1361 
t
->
f›ld_v®ues
->
–ts
è=ð
NULL
) {

1362  
NGX_UPLOAD_SCRIPTERROR
;

1365 ià(
t
->
v®ue_Ëngths
 =ð
NULL
) {

1366 *
v®ue
 = 
t
->value.value;

1367 } ià(
	`ngx_h‰p_süt_run
(
r
, 
v®ue
, 
t
->
v®ue_Ëngths
->
–ts
, 0,

1368 
t
->
v®ue_v®ues
->
–ts
è=ð
NULL
) {

1369  
NGX_UPLOAD_SCRIPTERROR
;

1371  
NGX_OK
;

1372 
	}
}

1374 
ngx_št_t
 
	$ngx_h‰p_u¶ßd_¡¬t_hªdËr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
) {

1375 
ngx_h‰p_»que¡_t
 *
r
 = 
u
->
»que¡
;

1376 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1378 
ngx_fže_t
 *
fže
 = &
u
->
ouut_fže
;

1379 
ngx_·th_t
 *
·th
 = 
u
->
¡Üe_·th
;

1380 
ngx_·th_t
 *
¡©e_·th
 = 
u
->
¡©e_¡Üe_·th
;

1381 
ušt32_t
 
n
;

1382 
ngx_ušt_t
 
i
;

1383 
ngx_št_t
 
rc
;

1384 
ngx_”r_t
 
”r
;

1385 
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
 *
t
;

1386 
ngx_h‰p_u¶ßd_f›ld_fž‹r_t
 *
f
;

1387 
ngx_¡r_t
 
f›ld_Çme
, 
f›ld_v®ue
;

1388 
ngx_ušt_t
 
·ss_f›ld
;

1389 
ngx_u¶ßd_þ—nup_t
 *
uþn
;

1391 if(
u
->
is_fže
) {

1392 
u
->
Üdš®
++;

1394 
u
->
þn
 = 
	`ngx_poÞ_þ—nup_add
(
r
->
poÞ
, (
ngx_u¶ßd_þ—nup_t
));

1396 if(
u
->
þn
 =ð
NULL
)

1397  
NGX_UPLOAD_NOMEM
;

1399 
fže
->
Çme
.
Ën
 = 
·th
->Çme.ËÀ+ 1 +…©h->ËÀ+ (
u
->
£ssiÚ_id
.len != 0 ? u->session_id.len : 10);

1401 
fže
->
Çme
.
d©a
 = 
	`ngx_·Îoc
(
u
->
»que¡
->
poÞ
, fže->Çme.
Ën
 + 1);

1403 if(
fže
->
Çme
.
d©a
 =ð
NULL
)

1404  
NGX_UPLOAD_NOMEM
;

1406 
	`ngx_memýy
(
fže
->
Çme
.
d©a
, 
·th
->Çme.d©a,…©h->Çme.
Ën
);

1408 
fže
->
log
 = 
r
->
cÚÃùiÚ
->log;

1410 if(
u
->
£ssiÚ_id
.
Ën
 != 0) {

1411 (è
	`ngx_¥rštf
(
fže
->
Çme
.
d©a
 + 
·th
->Çme.
Ën
 + 1 +…ath->len,

1412 "%V%Z", &
u
->
£ssiÚ_id
);

1414 
	`ngx_ü—‹_hashed_fž’ame
(
·th
, 
fže
->
Çme
.
d©a
, fže->Çme.
Ën
);

1416 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_CORE
, 
fže
->
log
, 0,

1417 "hashed…©h: %s", 
fže
->
Çme
.
d©a
);

1419 if(
u
->
·¹Ÿl_cÚ‹Á
) {

1420 
ngx_fže_t
 *
¡©e_fže
 = &
u
->state_file;

1421 if(
u
->
m”ge_bufãr
 =ð
NULL
) {

1422 
u
->
m”ge_bufãr
 = 
	`ngx_·Îoc
(
r
->
poÞ
, 
ulcf
->
m”ge_bufãr_size
);

1424 if(
u
->
m”ge_bufãr
 =ð
NULL
)

1425  
NGX_UPLOAD_NOMEM
;

1428 
¡©e_fže
->
Çme
.
Ën
 = 
¡©e_·th
->Çme.ËÀ+ 1 + s‹_·th->ËÀ+ 
u
->
£ssiÚ_id
.len + (".state")-1;

1429 
¡©e_fže
->
Çme
.
d©a
 = 
	`ngx_·Îoc
(
u
->
»que¡
->
poÞ
, s‹_fže->Çme.
Ën
 + 1);

1431 if(
¡©e_fže
->
Çme
.
d©a
 =ð
NULL
)

1432  
NGX_UPLOAD_NOMEM
;

1434 
	`ngx_memýy
(
¡©e_fže
->
Çme
.
d©a
, 
¡©e_·th
->Çme.d©a, s‹_·th->Çme.
Ën
);

1435 (è
	`ngx_¥rštf
(
¡©e_fže
->
Çme
.
d©a
 + 
¡©e_·th
->Çme.
Ën
 + 1 + state_path->len,

1436 "%V.¡©e%Z", &
u
->
£ssiÚ_id
);

1438 
	`ngx_ü—‹_hashed_fž’ame
(
¡©e_·th
, 
¡©e_fže
->
Çme
.
d©a
, s‹_fže->Çme.
Ën
);

1440 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_CORE
, 
fže
->
log
, 0,

1441 "hashed…©h oà¡©fže: %s", 
¡©e_fže
->
Çme
.
d©a
);

1444 
fže
->
fd
 = 
	`ngx_Ý’_fže
(fže->
Çme
.
d©a
, 
NGX_FILE_WRONLY
, 
NGX_FILE_CREATE_OR_OPEN
, 
ulcf
->
¡Üe_acûss
);

1446 ià(
fže
->
fd
 =ð
NGX_INVALID_FILE
) {

1447 
”r
 = 
ngx_”ºo
;

1449 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 
ngx_”ºo
,

1450 "çžedØü—‹ ouuˆfž\"%V\" fÜ \"%V\"", &
fže
->
Çme
, &
u
->
fže_Çme
);

1451  
NGX_UPLOAD_IOERROR
;

1454 
fže
->
off£t
 = 
u
->
cÚ‹Á_¿nge_n
.
¡¬t
;

1458 
n
 = (
ušt32_t
è
	`ngx_Ãxt_‹mp_numb”
(0);

1460 (è
	`ngx_¥rštf
(
fže
->
Çme
.
d©a
 + 
·th
->Çme.
Ën
 + 1 +…ath->len,

1461 "%010uD%Z", 
n
);

1463 
	`ngx_ü—‹_hashed_fž’ame
(
·th
, 
fže
->
Çme
.
d©a
, fže->Çme.
Ën
);

1465 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_CORE
, 
fže
->
log
, 0,

1466 "hashed…©h: %s", 
fže
->
Çme
.
d©a
);

1468 
fže
->
fd
 = 
	`ngx_Ý’_‹mpfže
(fže->
Çme
.
d©a
, 1, 
ulcf
->
¡Üe_acûss
);

1470 ià(
fže
->
fd
 !ð
NGX_INVALID_FILE
) {

1471 
fže
->
off£t
 = 0;

1475 
”r
 = 
ngx_”ºo
;

1477 ià(
”r
 =ð
NGX_EEXIST
) {

1478 
n
 = (
ušt32_t
è
	`ngx_Ãxt_‹mp_numb”
(1);

1482 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 
ngx_”ºo
,

1483 "çžedØü—‹ ouuˆfž\"%V\" fÜ \"%V\"", &
fže
->
Çme
, &
u
->
fže_Çme
);

1484  
NGX_UPLOAD_IOERROR
;

1488 
u
->
þn
->
hªdËr
 = 
ngx_u¶ßd_þ—nup_hªdËr
;

1490 
uþn
 = 
u
->
þn
->
d©a
;

1491 
uþn
->
fd
 = 
fže
->fd;

1492 
uþn
->
fž’ame
 = 
fže
->
Çme
.
d©a
;

1493 
uþn
->
log
 = 
r
->
cÚÃùiÚ
->log;

1494 
uþn
->
h—d”s_out
 = &
r
->headers_out;

1495 
uþn
->
þ—nup_¡©u£s
 = 
ulcf
->cleanup_statuses;

1496 
uþn
->
abÜ‹d
 = 0;

1498 if(
ulcf
->
f›ld_‹m¶©es
) {

1500 if(
ulcf
->
me_¬¿ys
 && 
u
->
f›ld_Çme
.
Ën
 > 2 &&

1501 
u
->
f›ld_Çme
.
d©a
[u->f›ld_Çme.
Ën
 - 1] == ']' &&

1502 
u
->
f›ld_Çme
.
d©a
[u->f›ld_Çme.
Ën
 - 2] == '[')

1504 
u
->
f›ld_Çme
.
Ën
 -= 2;

1507 
t
 = 
ulcf
->
f›ld_‹m¶©es
->
–ts
;

1508 
i
 = 0; i < 
ulcf
->
f›ld_‹m¶©es
->
ÃÉs
; i++) {

1509 
rc
 = 
	`ngx_h‰p_u¶ßd_´oûss_f›ld_‹m¶©es
(
r
, &
t
[
i
], &
f›ld_Çme
, &
f›ld_v®ue
);

1511 if(
rc
 !ð
NGX_OK
)

1512 
þ—nup_fže
;

1514 
rc
 = 
	`ngx_h‰p_u¶ßd_­³nd_f›ld
(
u
, &
f›ld_Çme
, &
f›ld_v®ue
);

1516 if(
rc
 !ð
NGX_OK
)

1517 
þ—nup_fže
;

1521 if(
u
->
md5_ùx
 !ð
NULL
)

1522 
	`MD5In™
(&
u
->
md5_ùx
->
md5
);

1524 if(
u
->
sha1_ùx
 !ð
NULL
)

1525 
	`SHA1_In™
(&
u
->
sha1_ùx
->
sha1
);

1527 if(
u
->
sha256_ùx
 !ð
NULL
)

1528 
	`SHA256_In™
(&
u
->
sha256_ùx
->
sha256
);

1530 if(
u
->
sha512_ùx
 !ð
NULL
)

1531 
	`SHA512_In™
(&
u
->
sha512_ùx
->
sha512
);

1533 if(
u
->
ÿlcuÏ‹_üc32
)

1534 
	`ngx_üc32_š™
(
u
->
üc32
);

1536 if(
u
->
·¹Ÿl_cÚ‹Á
) {

1537 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
r
->
cÚÃùiÚ
->
log
, 0

1539 , 
u
->
cÚ‹Á_¿nge_n
.
¡¬t


1540 , 
u
->
cÚ‹Á_¿nge_n
.
’d


1541 , 
u
->
cÚ‹Á_¿nge_n
.
tÙ®


1542 , &
u
->
fže_Çme


1543 , &
u
->
ouut_fže
.
Çme


1544 , &
u
->
f›ld_Çme


1545 , &
u
->
cÚ‹Á_ty³


1549 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
r
->
cÚÃùiÚ
->
log
, 0

1551 , &
u
->
fže_Çme


1552 , &
u
->
ouut_fže
.
Çme


1553 , &
u
->
f›ld_Çme


1554 , &
u
->
cÚ‹Á_ty³


1558 
·ss_f›ld
 = 0;

1560 if(
ulcf
->
f›ld_fž‹rs
) {

1561 
f
 = 
ulcf
->
f›ld_fž‹rs
->
–ts
;

1562 
i
 = 0; i < 
ulcf
->
f›ld_fž‹rs
->
ÃÉs
; i++) {

1563 #ià(
NGX_PCRE
)

1564 
rc
 = 
	`ngx_»gex_exec
(
f
[
i
].
»gex
, &
u
->
f›ld_Çme
, 
NULL
, 0);

1567 ià((
ulcf
->
em±y_f›ld_Çmes
 && 
rc
 !ð
NGX_REGEX_NO_MATCHED
 &&„ø< 0 && 
u
->
f›ld_Çme
.
Ën
 != 0)

1568 || (!
ulcf
->
em±y_f›ld_Çmes
 && 
rc
 !ð
NGX_REGEX_NO_MATCHED
 &&„c < 0))

1570  
NGX_UPLOAD_SCRIPTERROR
;

1576 if(
rc
 == 0)

1577 
·ss_f›ld
 = 1;

1579 if(
	`ngx_¡ºcmp
(
f
[
i
].
‹xt
.
d©a
, 
u
->
f›ld_Çme
.d©a, u->f›ld_Çme.
Ën
) == 0)

1580 
·ss_f›ld
 = 1;

1585 if(
·ss_f›ld
 && 
u
->
f›ld_Çme
.
Ën
 != 0) {

1591 
rc
 = 
	`ngx_h‰p_u¶ßd_­³nd_f›ld
(
u
, &u->
f›ld_Çme
, &
ngx_h‰p_u¶ßd_em±y_f›ld_v®ue
);

1593 if(
rc
 !ð
NGX_OK
)

1594  
rc
;

1596 
u
->
disÿrd_d©a
 = 1;

1599  
NGX_OK
;

1601 
þ—nup_fže
:

1602  
rc
;

1603 
	}
}

1605 
	$ngx_h‰p_u¶ßd_fšish_hªdËr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
) {

1606 
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
 *
af
;

1607 
ngx_¡r_t
 
agg»g©e_f›ld_Çme
, 
agg»g©e_f›ld_v®ue
;

1608 
ngx_h‰p_»que¡_t
 *
r
 = 
u
->
»que¡
;

1609 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1610 
ngx_ušt_t
 
i
;

1611 
ngx_št_t
 
rc
;

1612 
ngx_u¶ßd_þ—nup_t
 *
uþn
;

1614 if(
u
->
is_fže
) {

1615 
uþn
 = 
u
->
þn
->
d©a
;

1616 
uþn
->
fd
 = -1;

1618 
	`ngx_þo£_fže
(
u
->
ouut_fže
.
fd
);

1620 if(
u
->
md5_ùx
)

1621 
	`MD5Fš®
(
u
->
md5_ùx
->
md5_dige¡
, &u->md5_ùx->
md5
);

1623 if(
u
->
sha1_ùx
)

1624 
	`SHA1_Fš®
(
u
->
sha1_ùx
->
sha1_dige¡
, &u->sha1_ùx->
sha1
);

1626 if(
u
->
sha256_ùx
)

1627 
	`SHA256_Fš®
(
u
->
sha256_ùx
->
sha256_dige¡
, &u->sha256_ùx->
sha256
);

1629 if(
u
->
sha512_ùx
)

1630 
	`SHA512_Fš®
(
u
->
sha512_ùx
->
sha512_dige¡
, &u->sha512_ùx->
sha512
);

1632 if(
u
->
ÿlcuÏ‹_üc32
)

1633 
	`ngx_üc32_fš®
(
u
->
üc32
);

1635 if(
u
->
·¹Ÿl_cÚ‹Á
) {

1636 if(
u
->
ouut_fže
.
off£t
 !ðu->
cÚ‹Á_¿nge_n
.
’d
 + 1) {

1637 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 0

1639 , 
u
->
ouut_fže
.
off£t


1640 , 
u
->
cÚ‹Á_¿nge_n
.
¡¬t


1641 , 
u
->
cÚ‹Á_¿nge_n
.
’d


1642 , 
u
->
cÚ‹Á_¿nge_n
.
tÙ®


1643 , 
u
->
ouut_fže
.
Çme


1646 
rÞlback
;

1649 
rc
 = 
	`ngx_h‰p_u¶ßd_m”ge_¿nges
(
u
, &u->
cÚ‹Á_¿nge_n
);

1651 if(
rc
 =ð
NGX_ERROR
) {

1652 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 0

1656 
rÞlback
;

1659 if(
rc
 =ð
NGX_AGAIN
) {

1663 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
r
->
cÚÃùiÚ
->
log
, 0

1665 , 
u
->
cÚ‹Á_¿nge_n
.
¡¬t


1666 , 
u
->
cÚ‹Á_¿nge_n
.
’d


1667 , 
u
->
cÚ‹Á_¿nge_n
.
tÙ®


1668 , &
u
->
fže_Çme


1669 , &
u
->
ouut_fže
.
Çme


1672 
u
->
´ev’t_ouut
 = 1;

1677 if(
	`ngx_d–‘e_fže
(
u
->
¡©e_fže
.
Çme
.
d©a
è=ð
NGX_FILE_ERROR
) {

1678 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 0, "çžedØ»mov¡©fž\"%V\"", &
u
->
¡©e_fže
.
Çme
);

1680 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
r
->
cÚÃùiÚ
->
log
, 0, "»moved s‹ fž\"%V\"", &
u
->
¡©e_fže
.
Çme
);

1684 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
r
->
cÚÃùiÚ
->
log
, 0

1686 , &
u
->
fže_Çme


1687 , &
u
->
ouut_fže
.
Çme


1690 ià(
	`ngx_h‰p_u¶ßd_add_h—d”s
(
r
, 
ulcf
è!ð
NGX_OK
) {

1691 
rÞlback
;

1694 if(
ulcf
->
agg»g©e_f›ld_‹m¶©es
) {

1695 
af
 = 
ulcf
->
agg»g©e_f›ld_‹m¶©es
->
–ts
;

1696 
i
 = 0; i < 
ulcf
->
agg»g©e_f›ld_‹m¶©es
->
ÃÉs
; i++) {

1697 
rc
 = 
	`ngx_h‰p_u¶ßd_´oûss_f›ld_‹m¶©es
(
r
, &
af
[
i
], &
agg»g©e_f›ld_Çme
,

1698 &
agg»g©e_f›ld_v®ue
);

1699 ià(
rc
 !ð
NGX_OK
) {

1700 
rÞlback
;

1703 
rc
 = 
	`ngx_h‰p_u¶ßd_­³nd_f›ld
(
u
, &
agg»g©e_f›ld_Çme
, &
agg»g©e_f›ld_v®ue
);

1705 if(
rc
 !ð
NGX_OK
)

1706 
rÞlback
;

1712 
u
->
checkpošt
 = u->
Ï¡
;

1715 
rÞlback
:

1716 
	`ngx_h‰p_u¶ßd_abÜt_hªdËr
(
u
);

1717 
	}
}

1719 
	$ngx_h‰p_u¶ßd_abÜt_hªdËr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
) {

1720 
ngx_u¶ßd_þ—nup_t
 *
uþn
;

1722 if(
u
->
is_fže
) {

1731 
uþn
 = 
u
->
þn
->
d©a
;

1732 
uþn
->
fd
 = -1;

1733 
uþn
->
abÜ‹d
 = 1;

1735 
	`ngx_þo£_fže
(
u
->
ouut_fže
.
fd
);

1737 if(!
u
->
·¹Ÿl_cÚ‹Á
) {

1738 if(
	`ngx_d–‘e_fže
(
u
->
ouut_fže
.
Çme
.
d©a
è=ð
NGX_FILE_ERROR
) {

1739 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u
->
log
, 
ngx_”ºo


1741 , &
u
->
fže_Çme


1742 , &
u
->
ouut_fže
.
Çme
);

1744 
	`ngx_log_”rÜ
(
NGX_LOG_ALERT
, 
u
->
log
, 0

1746 , &
u
->
fže_Çme


1747 , &
u
->
ouut_fže
.
Çme
);

1753 if(
u
->
checkpošt
 !ð
NULL
) {

1754 
u
->
Ï¡
 = u->
checkpošt
;

1755 
u
->
Ï¡
->
Ãxt
 = 
NULL
;

1757 
u
->
chaš
 = u->
Ï¡
 = 
NULL
;

1758 
u
->
fœ¡_·¹
 = 1;

1760 
	}
}

1762 
ngx_št_t
 
	$ngx_h‰p_u¶ßd_æush_ouut_bufãr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
, 
u_ch¬
 *
buf
, 
size_t
 
Ën
) {

1763 
ngx_h‰p_»que¡_t
 *
r
 = 
u
->
»que¡
;

1764 
ngx_buf_t
 *
b
;

1765 
ngx_chaš_t
 *
þ
;

1766 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

1768 if(
u
->
is_fže
) {

1769 if(
u
->
·¹Ÿl_cÚ‹Á
) {

1770 if(
u
->
ouut_fže
.
off£t
 > u->
cÚ‹Á_¿nge_n
.
’d
)

1771  
NGX_OK
;

1773 if(
u
->
ouut_fže
.
off£t
 + (
off_t
)
Ën
 > u->
cÚ‹Á_¿nge_n
.
’d
 + 1)

1774 
Ën
 = 
u
->
cÚ‹Á_¿nge_n
.
’d
 - u->
ouut_fže
.
off£t
 + 1;

1777 if(
u
->
md5_ùx
)

1778 
	`MD5Upd©e
(&
u
->
md5_ùx
->
md5
, 
buf
, 
Ën
);

1780 if(
u
->
sha1_ùx
)

1781 
	`SHA1_Upd©e
(&
u
->
sha1_ùx
->
sha1
, 
buf
, 
Ën
);

1783 if(
u
->
sha256_ùx
)

1784 
	`SHA256_Upd©e
(&
u
->
sha256_ùx
->
sha256
, 
buf
, 
Ën
);

1786 if(
u
->
sha512_ùx
)

1787 
	`SHA512_Upd©e
(&
u
->
sha512_ùx
->
sha512
, 
buf
, 
Ën
);

1789 if(
u
->
ÿlcuÏ‹_üc32
)

1790 
	`ngx_üc32_upd©e
(&
u
->
üc32
, 
buf
, 
Ën
);

1792 if(
ulcf
->
max_fže_size
 !ð0 && !
u
->
·¹Ÿl_cÚ‹Á
) {

1793 if(
u
->
ouut_fže
.
off£t
 + (
off_t
)
Ën
 > 
ulcf
->
max_fže_size
)

1794  
NGX_UPLOAD_TOOLARGE
;

1797 if(
	`ngx_wr™e_fže
(&
u
->
ouut_fže
, 
buf
, 
Ën
, u->ouut_fže.
off£t
è=ð
NGX_ERROR
) {

1798 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 
ngx_”ºo
,

1799 "wr™tØfž\"%V\" fažed", &
u
->
ouut_fže
.
Çme
);

1800  
NGX_UPLOAD_IOERROR
;

1802  
NGX_OK
;

1804 if(
ulcf
->
max_ouut_body_Ën
 != 0) {

1805 ià(
u
->
ouut_body_Ën
 + 
Ën
 > 
ulcf
->
max_ouut_body_Ën
)

1806  
NGX_UPLOAD_TOOLARGE
;

1809 
u
->
ouut_body_Ën
 +ð
Ën
;

1811 
b
 = 
	`ngx_ü—‹_‹mp_buf
(
u
->
»que¡
->
poÞ
, 
Ën
);

1813 ià(
b
 =ð
NULL
) {

1814  
NGX_ERROR
;

1817 
þ
 = 
	`ngx_®loc_chaš_lšk
(
u
->
»que¡
->
poÞ
);

1818 ià(
þ
 =ð
NULL
) {

1819  
NGX_ERROR
;

1822 
b
->
Ï¡_š_chaš
 = 0;

1824 
þ
->
buf
 = 
b
;

1825 
þ
->
Ãxt
 = 
NULL
;

1827 
b
->
Ï¡
 = 
	`ngx_ýymem
(b->Ï¡, 
buf
, 
Ën
);

1829 if(
u
->
chaš
 =ð
NULL
) {

1830 
u
->
chaš
 = 
þ
;

1831 
u
->
Ï¡
 = 
þ
;

1833 
u
->
Ï¡
->
Ãxt
 = 
þ
;

1834 
u
->
Ï¡
 = 
þ
;

1837  
NGX_OK
;

1839 
	}
}

1842 
	$ngx_h‰p_u¶ßd_­³nd_¡r
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
, 
ngx_buf_t
 *
b
, 
ngx_chaš_t
 *
þ
, 
ngx_¡r_t
 *
s
)

1844 
b
->
¡¬t
 = b->
pos
 = 
s
->
d©a
;

1845 
b
->
’d
 = b->
Ï¡
 = 
s
->
d©a
 + s->
Ën
;

1846 
b
->
memÜy
 = 1;

1847 
b
->
‹mpÜ¬y
 = 1;

1848 
b
->
š_fže
 = 0;

1849 
b
->
Ï¡_buf
 = 0;

1851 
b
->
Ï¡_š_chaš
 = 0;

1852 
b
->
Ï¡_buf
 = 0;

1854 
þ
->
buf
 = 
b
;

1855 
þ
->
Ãxt
 = 
NULL
;

1857 if(
u
->
chaš
 =ð
NULL
) {

1858 
u
->
chaš
 = 
þ
;

1859 
u
->
Ï¡
 = 
þ
;

1861 
u
->
Ï¡
->
Ãxt
 = 
þ
;

1862 
u
->
Ï¡
 = 
þ
;

1865 
u
->
ouut_body_Ën
 +ð
s
->
Ën
;

1866 
	}
}

1868 
ngx_št_t


1869 
	$ngx_h‰p_u¶ßd_­³nd_f›ld
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
, 
ngx_¡r_t
 *
Çme
,‚gx_¡r_ˆ*
v®ue
)

1871 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
u
->
»que¡
, 
ngx_h‰p_u¶ßd_moduË
);

1872 
ngx_¡r_t
 
bound¬y
 = { 
u
->
fœ¡_·¹
 ? u->bound¬y.
Ën
 - 2 : u->boundary.len,

1873 
u
->
fœ¡_·¹
 ? u->
bound¬y
.
d©a
 + 2 : u->boundary.data };

1875 
ngx_buf_t
 *
b
;

1876 
ngx_chaš_t
 *
þ
;

1878 if(
Çme
->
Ën
 > 0) {

1879 if(
ulcf
->
max_ouut_body_Ën
 != 0) {

1880 if(
u
->
ouut_body_Ën
 + 
bound¬y
.
Ën
 + 
ngx_u¶ßd_f›ld_·¹1
.ËÀ+ 
Çme
->len

1881 + 
ngx_u¶ßd_f›ld_·¹2
.
Ën
 + 
v®ue
->ËÀ> 
ulcf
->
max_ouut_body_Ën
)

1882  
NGX_UPLOAD_TOOLARGE
;

1885 
b
 = 
	`ngx_·Îoc
(
u
->
»que¡
->
poÞ
, 
v®ue
->
Ën
 > 0 ?

1886 5 * (
ngx_buf_t
) : 4 * (ngx_buf_t));

1888 ià(
b
 =ð
NULL
) {

1889  
NGX_UPLOAD_NOMEM
;

1892 
þ
 = 
	`ngx_·Îoc
(
u
->
»que¡
->
poÞ
, 
v®ue
->
Ën
 > 0 ?

1893 5 * (
ngx_chaš_t
) : 4 * (ngx_chain_t));

1895 ià(
þ
 =ð
NULL
) {

1896  
NGX_UPLOAD_NOMEM
;

1899 
	`ngx_h‰p_u¶ßd_­³nd_¡r
(
u
, 
b
, 
þ
, &
bound¬y
);

1901 
	`ngx_h‰p_u¶ßd_­³nd_¡r
(
u
, 
b
 + 1, 
þ
 + 1, &
ngx_u¶ßd_f›ld_·¹1
);

1903 
	`ngx_h‰p_u¶ßd_­³nd_¡r
(
u
, 
b
 + 2, 
þ
 + 2, 
Çme
);

1905 
	`ngx_h‰p_u¶ßd_­³nd_¡r
(
u
, 
b
 + 3, 
þ
 + 3, &
ngx_u¶ßd_f›ld_·¹2
);

1907 if(
v®ue
->
Ën
 > 0)

1908 
	`ngx_h‰p_u¶ßd_­³nd_¡r
(
u
, 
b
 + 4, 
þ
 + 4, 
v®ue
);

1910 
u
->
ouut_body_Ën
 +ð
bound¬y
.
Ën
 + 
ngx_u¶ßd_f›ld_·¹1
.ËÀ+ 
Çme
->len

1911 + 
ngx_u¶ßd_f›ld_·¹2
.
Ën
 + 
v®ue
->len;

1913 
u
->
fœ¡_·¹
 = 0;

1915 
u
->
no_cÚ‹Á
 = 0;

1918  
NGX_OK
;

1919 
	}
}

1921 
ngx_št_t
 
	$ngx_h‰p_u¶ßd_add_¿nge
(
ngx_h‰p_u¶ßd_m”g”_¡©e_t
 *
ms
, 
ngx_h‰p_u¶ßd_¿nge_t
 *
¿nge_n
) {

1922 
ms
->
out_buf
->
Ï¡
 = 
	`ngx_¥rštf
(ms->out_buf->last, "%O-%O/%O\x0a",

1923 
¿nge_n
->
¡¬t
,

1924 
¿nge_n
->
’d
,

1925 
¿nge_n
->
tÙ®
);

1927 if(*
ms
->
¿nge_h—d”_bufãr_pos
 < ms->
¿nge_h—d”_bufãr_’d
) {

1928 *
ms
->
¿nge_h—d”_bufãr_pos
 = 
	`ngx_¥rštf
(*ms->range_header_buffer_pos,

1929 
ms
->
fœ¡_¿nge
 ? "%O-%O/%O" : ",%O-%O/%O",

1930 
¿nge_n
->
¡¬t
,

1931 
¿nge_n
->
’d
,

1932 
¿nge_n
->
tÙ®
);

1934 
ms
->
fœ¡_¿nge
 = 0;

1937  
NGX_OK
;

1938 
	}
}

1940 
ngx_št_t


1941 
	$ngx_h‰p_u¶ßd_buf_m”ge_¿nge
(
ngx_h‰p_u¶ßd_m”g”_¡©e_t
 *
ms
, 
ngx_h‰p_u¶ßd_¿nge_t
 *
¿nge_n
) {

1942 
u_ch¬
 *
p
, 
c
;

1943 
off_t
 *
f›ld
;

1945 
p
 = 
ms
->
š_buf
->
pos
;

1947 
f›ld
 = 
ms
->
·r£r_¡©e
;

1950 *
f›ld
 = 0;

1952 
p
 !ð
ms
->
š_buf
->
Ï¡
) {

1954 
c
 = *
p
++;

1956 if(
c
 >= '0' && c <= '9') {

1957 (*
f›ld
èð(*f›ldè* 10 + (
c
 - '0');

1959 if(
c
 == '-') {

1960 if(
f›ld
 !ð&
ms
->
cu¼’t_¿nge_n
.
¡¬t
) {

1961 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

1963  
NGX_ERROR
;

1966 
f›ld
 = &
ms
->
cu¼’t_¿nge_n
.
’d
;

1969 if(
c
 == '/') {

1970 if(
f›ld
 !ð&
ms
->
cu¼’t_¿nge_n
.
’d
) {

1971 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

1973  
NGX_ERROR
;

1976 
f›ld
 = &
ms
->
cu¼’t_¿nge_n
.
tÙ®
;

1979 if(
c
 =ð
LF
) {

1980 if(
f›ld
 !ð&
ms
->
cu¼’t_¿nge_n
.
tÙ®
) {

1981 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

1983  
NGX_ERROR
;

1986 if(
ms
->
cu¼’t_¿nge_n
.
¡¬t
 >ðms->cu¼’t_¿nge_n.
’d
 || ms->cu¼’t_¿nge_n.¡¬ˆ>ðms->cu¼’t_¿nge_n.
tÙ®


1987 || 
ms
->
cu¼’t_¿nge_n
.
’d
 > ms->cu¼’t_¿nge_n.
tÙ®
)

1989 
	`ngx_log_debug3
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

1991 
ms
->
cu¼’t_¿nge_n
.
¡¬t
,

1992 
ms
->
cu¼’t_¿nge_n
.
’d
,

1993 
ms
->
cu¼’t_¿nge_n
.
tÙ®
);

1994  
NGX_ERROR
;

1997 if(
ms
->
cu¼’t_¿nge_n
.
tÙ®
 !ð
¿nge_n
->total) {

1998 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

2000  
NGX_ERROR
;

2003 
f›ld
 = &
ms
->
cu¼’t_¿nge_n
.
¡¬t
;

2005 if(
ms
->
cu¼’t_¿nge_n
.
’d
 + 1 < 
¿nge_n
->
¡¬t
) {

2010 if(
	`ngx_h‰p_u¶ßd_add_¿nge
(
ms
, &ms->
cu¼’t_¿nge_n
è!ð
NGX_OK
) {

2011  
NGX_ERROR
;

2014 
	`ngx_log_debug3
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

2015 "< %O-%O/%O", 
ms
->
cu¼’t_¿nge_n
.
¡¬t
,

2016 
ms
->
cu¼’t_¿nge_n
.
’d
, ms->cu¼’t_¿nge_n.
tÙ®
);

2020 if(
ms
->
cu¼’t_¿nge_n
.
¡¬t
 > 
¿nge_n
->
’d
 + 1) {

2025 if(!
ms
->
found_low”_bound
) {

2026 if(
	`ngx_h‰p_u¶ßd_add_¿nge
(
ms
, 
¿nge_n
è!ð
NGX_OK
) {

2027  
NGX_ERROR
;

2031 if(
	`ngx_h‰p_u¶ßd_add_¿nge
(
ms
, &ms->
cu¼’t_¿nge_n
è!ð
NGX_OK
) {

2032  
NGX_ERROR
;

2035 
	`ngx_log_debug6
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

2037 
¿nge_n
->
¡¬t
,

2038 
¿nge_n
->
’d
,

2039 
¿nge_n
->
tÙ®
,

2040 
ms
->
cu¼’t_¿nge_n
.
¡¬t
,

2041 
ms
->
cu¼’t_¿nge_n
.
’d
,

2042 
ms
->
cu¼’t_¿nge_n
.
tÙ®
);

2044 
ms
->
found_low”_bound
 = 1;

2051 
¿nge_n
->
¡¬t
 =„ªge_n->¡¬ˆ< 
ms
->
cu¼’t_¿nge_n
.start ?„ange_n->start : ms->current_range_n.start;

2052 
¿nge_n
->
’d
 =„ªge_n->’d > 
ms
->
cu¼’t_¿nge_n
.end ?„ange_n->end : ms->current_range_n.end;

2056 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

2057 "uÃx³ùed ch¬aù” %c", *
p
);

2058  
NGX_ERROR
;

2061 }
p
 !ð
ms
->
š_buf
->
Ï¡
);

2063 if(
ms
->
š_buf
->
Ï¡_buf
) {

2064 if(
f›ld
 !ð&
ms
->
cu¼’t_¿nge_n
.
¡¬t
) {

2065 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

2067  
NGX_ERROR
;

2070 if(!
ms
->
found_low”_bound
) {

2071 if(
	`ngx_h‰p_u¶ßd_add_¿nge
(
ms
, 
¿nge_n
è!ð
NGX_OK
) {

2072  
NGX_ERROR
;

2075 
	`ngx_log_debug3
(
NGX_LOG_DEBUG_CORE
, 
ms
->
log
, 0,

2077 
¿nge_n
->
¡¬t
,

2078 
¿nge_n
->
’d
,

2079 
¿nge_n
->
tÙ®
);

2081 
ms
->
com¶‘e_¿nges
 = (
¿nge_n
->
¡¬t
 =ð0è&& (¿nge_n->
’d
 =ð¿nge_n->
tÙ®
 - 1) ? 1 : 0;

2083 
ms
->
found_low”_bound
 = 1;

2087 
ms
->
·r£r_¡©e
 = 
f›ld
;

2089  
NGX_OK
;

2090 
	}
}

2092 
ngx_št_t


2093 
	$ngx_h‰p_u¶ßd_m”ge_¿nges
(
ngx_h‰p_u¶ßd_ùx_t
 *
u
, 
ngx_h‰p_u¶ßd_¿nge_t
 *
¿nge_n
) {

2094 
ngx_fže_t
 *
¡©e_fže
 = &
u
->state_file;

2095 
ngx_h‰p_u¶ßd_m”g”_¡©e_t
 
ms
;

2096 
off_t
 
»maššg
;

2097 
ssize_t
 
rc
;

2098 
	`__©Œibu‹__
((
__unu£d__
)è
»suÉ
;

2099 
ngx_buf_t
 
š_buf
;

2100 
ngx_buf_t
 
out_buf
;

2101 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
u
->
»que¡
, 
ngx_h‰p_u¶ßd_moduË
);

2102 
ngx_h‰p_u¶ßd_¿nge_t
 
¿nge_to_m”ge_n
;

2105 
¡©e_fže
->
fd
 = 
	`ngx_Ý’_fže
(¡©e_fže->
Çme
.
d©a
, 
NGX_FILE_RDWR
, 
NGX_FILE_CREATE_OR_OPEN
, 
ulcf
->
¡Üe_acûss
);

2107 ià(
¡©e_fže
->
fd
 =ð
NGX_INVALID_FILE
) {

2108 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u
->
log
, 
ngx_”ºo
,

2109 "çžedØü—‹ o¸Ý’ s‹ fž\"%V\"", &
¡©e_fže
->
Çme
);

2110  
NGX_ERROR
;

2113 
	`ngx_lock_fd
(
¡©e_fže
->
fd
);

2115 
	`ngx_fd_šfo
(
¡©e_fže
->
fd
, &¡©e_fže->
šfo
);

2117 
¡©e_fže
->
off£t
 = 0;

2118 
¡©e_fže
->
log
 = 
u
->log;

2120 
ms
.
š_buf
 = &in_buf;

2121 
ms
.
out_buf
 = &out_buf;

2122 
ms
.
·r£r_¡©e
 = &ms.
cu¼’t_¿nge_n
.
¡¬t
;

2123 
ms
.
log
 = 
u
->log;

2125 
ms
.
found_low”_bound
 = 0;

2126 
ms
.
com¶‘e_¿nges
 = 0;

2127 
ms
.
fœ¡_¿nge
 = 1;

2129 
ms
.
¿nge_h—d”_bufãr
 = 
u
->range_header_buffer;

2130 
ms
.
¿nge_h—d”_bufãr_pos
 = &
u
->range_header_buffer_pos;

2131 
ms
.
¿nge_h—d”_bufãr_’d
 = 
u
->range_header_buffer_end;

2133 
¿nge_to_m”ge_n
 = *
¿nge_n
;

2135 
out_buf
.
¡¬t
 = out_buf.
pos
 = out_buf.
Ï¡
 = 
u
->
m”ge_bufãr
;

2136 
out_buf
.
’d
 = 
u
->
m”ge_bufãr
 + (
ulcf
->
m”ge_bufãr_size
 >> 1è+ 
NGX_OFF_T_LEN
*3 + 2 + 1;

2137 
out_buf
.
fže_pos
 = 0;

2139 
š_buf
.
¡¬t
 = in_buf.
pos
 = in_buf.
Ï¡
 = 
out_buf
.
’d
;

2140 
š_buf
.
’d
 = 
u
->
m”ge_bufãr
 + 
ulcf
->
m”ge_bufãr_size
;

2143 
š_buf
.
fže_pos
 = 
¡©e_fže
->
off£t
;

2144 
š_buf
.
pos
 = in_buf.
Ï¡
 = in_buf.
¡¬t
;

2146 if(
¡©e_fže
->
off£t
 < s‹_fže->
šfo
.
¡_size
) {

2147 
»maššg
 = 
¡©e_fže
->
šfo
.
¡_size
 - s‹_fže->
off£t
 > 
š_buf
.
’d
 - in_buf.
¡¬t


2148 ? 
š_buf
.
’d
 - in_buf.
¡¬t
 : 
¡©e_fže
->
šfo
.
¡_size
 - s‹_fže->
off£t
;

2150 
rc
 = 
	`ngx_»ad_fže
(
¡©e_fže
, 
š_buf
.
pos
, 
»maššg
, s‹_fže->
off£t
);

2152 if(
rc
 < 0 ||„ø!ð
»maššg
) {

2153 
çžed
;

2156 
š_buf
.
Ï¡
 = in_buf.
pos
 + 
rc
;

2159 
š_buf
.
Ï¡_buf
 = 
¡©e_fže
->
off£t
 =ð¡©e_fže->
šfo
.
¡_size
 ? 1 : 0;

2161 if(
out_buf
.
pos
 !ðout_buf.
Ï¡
) {

2162 
rc
 = 
	`ngx_wr™e_fže
(
¡©e_fže
, 
out_buf
.
pos
, out_buf.
Ï¡
 - out_buf.pos, out_buf.
fže_pos
);

2164 if(
rc
 < 0 ||„ø!ð
out_buf
.
Ï¡
 - out_buf.
pos
) {

2165 
çžed
;

2168 
out_buf
.
fže_pos
 +ðout_buf.
Ï¡
 - out_buf.
pos
;

2171 
out_buf
.
pos
 = out_buf.
Ï¡
 = out_buf.
¡¬t
;

2173 if(
	`ngx_h‰p_u¶ßd_buf_m”ge_¿nge
(&
ms
, &
¿nge_to_m”ge_n
è!ð
NGX_OK
) {

2174 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u
->
log
, 0,

2175 "¡©fž\"%V\" i cÜru±", &
¡©e_fže
->
Çme
);

2176 
rc
 = 
NGX_ERROR
;

2177 
çžed
;

2179 } 
¡©e_fže
->
off£t
 < s‹_fže->
šfo
.
¡_size
);

2181 if(
out_buf
.
pos
 !ðout_buf.
Ï¡
) {

2182 
rc
 = 
	`ngx_wr™e_fže
(
¡©e_fže
, 
out_buf
.
pos
, out_buf.
Ï¡
 - out_buf.pos, out_buf.
fže_pos
);

2184 if(
rc
 < 0 ||„ø!ð
out_buf
.
Ï¡
 - out_buf.
pos
) {

2185 
çžed
;

2188 
out_buf
.
fže_pos
 +ðout_buf.
Ï¡
 - out_buf.
pos
;

2191 if(
out_buf
.
fže_pos
 < 
¡©e_fže
->
šfo
.
¡_size
) {

2192 
»suÉ
 = 
	`árunÿ‹
(
¡©e_fže
->
fd
, 
out_buf
.
fže_pos
);

2195 
rc
 = 
ms
.
com¶‘e_¿nges
 ? 
NGX_OK
 : 
NGX_AGAIN
;

2197 
çžed
:

2198 
	`ngx_uÆock_fd
(
¡©e_fže
->
fd
);

2200 
	`ngx_þo£_fže
(
¡©e_fže
->
fd
);

2202  
rc
;

2203 
	}
}

2206 
	$ngx_h‰p_u¶ßd_ü—‹_loc_cÚf
(
ngx_cÚf_t
 *
cf
)

2208 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
cÚf
;

2210 
cÚf
 = 
	`ngx_pÿÎoc
(
cf
->
poÞ
, (
ngx_h‰p_u¶ßd_loc_cÚf_t
));

2211 ià(
cÚf
 =ð
NULL
) {

2212  
NGX_CONF_ERROR
;

2215 
cÚf
->
¡Üe_acûss
 = 
NGX_CONF_UNSET_UINT
;

2216 
cÚf
->
fÜw¬d_¬gs
 = 
NGX_CONF_UNSET
;

2217 
cÚf
->
me_¬¿ys
 = 
NGX_CONF_UNSET
;

2218 
cÚf
->
»sumabË_u¶ßds
 = 
NGX_CONF_UNSET
;

2219 
cÚf
->
em±y_f›ld_Çmes
 = 
NGX_CONF_UNSET
;

2221 
cÚf
->
bufãr_size
 = 
NGX_CONF_UNSET_SIZE
;

2222 
cÚf
->
m”ge_bufãr_size
 = 
NGX_CONF_UNSET_SIZE
;

2223 
cÚf
->
¿nge_h—d”_bufãr_size
 = 
NGX_CONF_UNSET_SIZE
;

2224 
cÚf
->
max_h—d”_Ën
 = 
NGX_CONF_UNSET_SIZE
;

2225 
cÚf
->
max_ouut_body_Ën
 = 
NGX_CONF_UNSET_SIZE
;

2226 
cÚf
->
max_fže_size
 = 
NGX_CONF_UNSET
;

2227 
cÚf
->
lim™_¿‹
 = 
NGX_CONF_UNSET_SIZE
;

2237  
cÚf
;

2238 
	}
}

2241 
	$ngx_h‰p_u¶ßd_m”ge_loc_cÚf
(
ngx_cÚf_t
 *
cf
, *
·»Á
, *
chžd
)

2243 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
´ev
 = 
·»Á
;

2244 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
cÚf
 = 
chžd
;

2246 ià((
cÚf
->
u¾
.
Ën
 =ð0è&& (cÚf->
u¾_cv
 =ð
NULL
)) {

2247 
cÚf
->
u¾
 = 
´ev
->url;

2248 
cÚf
->
u¾_cv
 = 
´ev
->url_cv;

2251 if(
cÚf
->
u¾
.
Ën
 != 0) {

2252 
	`ngx_h‰p_u¶ßd_m”ge_·th_v®ue
(
cf
,

2253 &
cÚf
->
¡Üe_·th
,

2254 
´ev
->
¡Üe_·th
,

2255 &
ngx_h‰p_u¶ßd_‹mp_·th
);

2257 
	`ngx_h‰p_u¶ßd_m”ge_·th_v®ue
(
cf
,

2258 &
cÚf
->
¡©e_¡Üe_·th
,

2259 
´ev
->
¡©e_¡Üe_·th
,

2260 &
ngx_h‰p_u¶ßd_‹mp_·th
);

2263 
	`ngx_cÚf_m”ge_ušt_v®ue
(
cÚf
->
¡Üe_acûss
,

2264 
´ev
->
¡Üe_acûss
, 0600);

2266 
	`ngx_cÚf_m”ge_size_v®ue
(
cÚf
->
bufãr_size
,

2267 
´ev
->
bufãr_size
,

2268 (
size_t
è
ngx_·gesize
);

2270 
	`ngx_cÚf_m”ge_size_v®ue
(
cÚf
->
m”ge_bufãr_size
,

2271 
´ev
->
m”ge_bufãr_size
,

2272 (
size_t
è
ngx_·gesize
 >> 1);

2274 
	`ngx_cÚf_m”ge_size_v®ue
(
cÚf
->
¿nge_h—d”_bufãr_size
,

2275 
´ev
->
¿nge_h—d”_bufãr_size
,

2276 (
size_t
) 256);

2278 
	`ngx_cÚf_m”ge_size_v®ue
(
cÚf
->
max_h—d”_Ën
,

2279 
´ev
->
max_h—d”_Ën
,

2280 (
size_t
) 512);

2282 
	`ngx_cÚf_m”ge_size_v®ue
(
cÚf
->
max_ouut_body_Ën
,

2283 
´ev
->
max_ouut_body_Ën
,

2284 (
size_t
) 100 * 1024);

2286 
	`ngx_cÚf_m”ge_off_v®ue
(
cÚf
->
max_fže_size
,

2287 
´ev
->
max_fže_size
,

2290 
	`ngx_cÚf_m”ge_size_v®ue
(
cÚf
->
lim™_¿‹
, 
´ev
->limit_rate, 0);

2292 if(
cÚf
->
fÜw¬d_¬gs
 =ð
NGX_CONF_UNSET
) {

2293 
cÚf
->
fÜw¬d_¬gs
 = (
´ev
->fÜw¬d_¬g !ð
NGX_CONF_UNSET
) ?

2294 
´ev
->
fÜw¬d_¬gs
 : 0;

2297 if(
cÚf
->
me_¬¿ys
 =ð
NGX_CONF_UNSET
) {

2298 
cÚf
->
me_¬¿ys
 = (
´ev
->me_¬¿y !ð
NGX_CONF_UNSET
) ?

2299 
´ev
->
me_¬¿ys
 : 0;

2302 if(
cÚf
->
»sumabË_u¶ßds
 =ð
NGX_CONF_UNSET
) {

2303 
cÚf
->
»sumabË_u¶ßds
 = (
´ev
->»sumabË_u¶ßd !ð
NGX_CONF_UNSET
) ?

2304 
´ev
->
»sumabË_u¶ßds
 : 0;

2307 if(
cÚf
->
em±y_f›ld_Çmes
 =ð
NGX_CONF_UNSET
) {

2308 
cÚf
->
em±y_f›ld_Çmes
 = (
´ev
->em±y_f›ld_Çme !ð
NGX_CONF_UNSET
) ?

2309 
´ev
->
em±y_f›ld_Çmes
 : 0;

2312 if(
cÚf
->
f›ld_‹m¶©es
 =ð
NULL
) {

2313 
cÚf
->
f›ld_‹m¶©es
 = 
´ev
->field_templates;

2316 if(
cÚf
->
agg»g©e_f›ld_‹m¶©es
 =ð
NULL
) {

2317 
cÚf
->
agg»g©e_f›ld_‹m¶©es
 = 
´ev
->aggregate_field_templates;

2319 if(
´ev
->
md5
) {

2320 
cÚf
->
md5
 = 
´ev
->md5;

2323 if(
´ev
->
sha1
) {

2324 
cÚf
->
sha1
 = 
´ev
->sha1;

2327 if(
´ev
->
sha256
) {

2328 
cÚf
->
sha256
 = 
´ev
->sha256;

2331 if(
´ev
->
sha512
) {

2332 
cÚf
->
sha512
 = 
´ev
->sha512;

2335 if(
´ev
->
üc32
) {

2336 
cÚf
->
üc32
 = 
´ev
->crc32;

2340 if(
cÚf
->
f›ld_fž‹rs
 =ð
NULL
) {

2341 
cÚf
->
f›ld_fž‹rs
 = 
´ev
->field_filters;

2344 if(
cÚf
->
þ—nup_¡©u£s
 =ð
NULL
) {

2345 
cÚf
->
þ—nup_¡©u£s
 = 
´ev
->cleanup_statuses;

2348 if(
cÚf
->
h—d”_‹m¶©es
 =ð
NULL
) {

2349 
cÚf
->
h—d”_‹m¶©es
 = 
´ev
->header_templates;

2352  
NGX_CONF_OK
;

2353 
	}
}

2355 
ngx_št_t


2356 
	$ngx_h‰p_u¶ßd_add_v¬ŸbËs
(
ngx_cÚf_t
 *
cf
)

2358 
ngx_h‰p_v¬ŸbË_t
 *
v¬
, *
v
;

2360 
v
 = 
ngx_h‰p_u¶ßd_v¬ŸbËs
; v->
Çme
.
Ën
; v++) {

2361 
v¬
 = 
	`ngx_h‰p_add_v¬ŸbË
(
cf
, &
v
->
Çme
, v->
æags
);

2362 ià(
v¬
 =ð
NULL
) {

2363  
NGX_ERROR
;

2366 
v¬
->
g‘_hªdËr
 = 
v
->get_handler;

2367 
v¬
->
d©a
 = 
v
->data;

2370 
v
 = 
ngx_h‰p_u¶ßd_agg»g©e_v¬ŸbËs
; v->
Çme
.
Ën
; v++) {

2371 
v¬
 = 
	`ngx_h‰p_add_v¬ŸbË
(
cf
, &
v
->
Çme
, v->
æags
);

2372 ià(
v¬
 =ð
NULL
) {

2373  
NGX_ERROR
;

2376 
v¬
->
g‘_hªdËr
 = 
v
->get_handler;

2377 
v¬
->
d©a
 = 
v
->data;

2380  
NGX_OK
;

2381 
	}
}

2383 
ngx_št_t


2384 
	$ngx_h‰p_u¶ßd_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2385 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2387 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2388 
ngx_¡r_t
 *
v®ue
;

2390 
v
->
v®id
 = 1;

2391 
v
->
no_ÿch—bË
 = 0;

2392 
v
->
nÙ_found
 = 0;

2394 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2396 
v®ue
 = (
ngx_¡r_t
 *è((*è
u
 + 
d©a
);

2398 
v
->
d©a
 = 
v®ue
->data;

2399 
v
->
Ën
 = 
v®ue
->len;

2401  
NGX_OK
;

2402 
	}
}

2404 
ngx_št_t


2405 
	$ngx_h‰p_u¶ßd_hash_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2406 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
, 
u_ch¬
 *
dige¡
,

2407 
ngx_ušt_t
 
dige¡_Ën
)

2409 
ngx_ušt_t
 
i
;

2410 
u_ch¬
 *
c
;

2411 
u_ch¬
 *
p
;

2412 
u_ch¬
 *
hex_bË
;

2414 
v
->
v®id
 = 1;

2415 
v
->
no_ÿch—bË
 = 0;

2416 
v
->
nÙ_found
 = 0;

2418 
hex_bË
 = (
u_ch¬
*)
d©a
;

2420 
p
 = 
	`ngx_·Îoc
(
r
->
poÞ
, 
dige¡_Ën
 * 2);

2421 ià(
p
 =ð
NULL
) {

2422  
NGX_ERROR
;

2425 
c
 = 
p
 + 
dige¡_Ën
 * 2;

2426 
i
 = 
dige¡_Ën
;

2429 
i
--;

2430 *--
c
 = 
hex_bË
[
dige¡
[
i
] & 0xf];

2431 *--
c
 = 
hex_bË
[
dige¡
[
i
] >> 4];

2432 }
i
 != 0);

2434 
v
->
d©a
 = 
c
;

2435 
v
->
Ën
 = 
dige¡_Ën
 * 2;

2437  
NGX_OK
;

2438 
	}
}

2440 
ngx_št_t


2441 
	$ngx_h‰p_u¶ßd_md5_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2442 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2444 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2446 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2448 if(
u
->
sha1_ùx
 =ð
NULL
 || u->
·¹Ÿl_cÚ‹Á
) {

2449 
v
->
nÙ_found
 = 1;

2450  
NGX_OK
;

2452  
	`ngx_h‰p_u¶ßd_hash_v¬ŸbË
(
r
, 
v
, 
d©a
, 
u
->
md5_ùx
->
md5_dige¡
, 
MD5_DIGEST_LENGTH
);

2453 
	}
}

2455 
ngx_št_t


2456 
	$ngx_h‰p_u¶ßd_sha1_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2457 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2459 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2461 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2463 if(
u
->
sha1_ùx
 =ð
NULL
 || u->
·¹Ÿl_cÚ‹Á
) {

2464 
v
->
nÙ_found
 = 1;

2465  
NGX_OK
;

2468  
	`ngx_h‰p_u¶ßd_hash_v¬ŸbË
(
r
, 
v
, 
d©a
, 
u
->
sha1_ùx
->
sha1_dige¡
, 
SHA_DIGEST_LENGTH
);

2469 
	}
}

2471 
ngx_št_t


2472 
	$ngx_h‰p_u¶ßd_sha256_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2473 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2475 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2477 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2479 if(
u
->
sha256_ùx
 =ð
NULL
 || u->
·¹Ÿl_cÚ‹Á
) {

2480 
v
->
nÙ_found
 = 1;

2481  
NGX_OK
;

2484  
	`ngx_h‰p_u¶ßd_hash_v¬ŸbË
(
r
, 
v
, 
d©a
, 
u
->
sha256_ùx
->
sha256_dige¡
, 
SHA256_DIGEST_LENGTH
);

2485 
	}
}

2487 
ngx_št_t


2488 
	$ngx_h‰p_u¶ßd_sha512_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2489 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2491 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2493 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2495 if(
u
->
sha512_ùx
 =ð
NULL
 || u->
·¹Ÿl_cÚ‹Á
) {

2496 
v
->
nÙ_found
 = 1;

2497  
NGX_OK
;

2500  
	`ngx_h‰p_u¶ßd_hash_v¬ŸbË
(
r
, 
v
, 
d©a
, 
u
->
sha512_ùx
->
sha512_dige¡
, 
SHA512_DIGEST_LENGTH
);

2501 
	}
}

2503 
ngx_št_t


2504 
	$ngx_h‰p_u¶ßd_üc32_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2505 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2507 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2508 
u_ch¬
 *
p
;

2509 
ušt32_t
 *
v®ue
;

2511 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2513 if(
u
->
·¹Ÿl_cÚ‹Á
) {

2514 
v
->
nÙ_found
 = 1;

2515  
NGX_OK
;

2518 
v®ue
 = (
ušt32_t
 *è((*è
u
 + 
d©a
);

2520 
p
 = 
	`ngx_·Îoc
(
r
->
poÞ
, 
NGX_INT_T_LEN
);

2521 ià(
p
 =ð
NULL
) {

2522  
NGX_ERROR
;

2525 
v
->
Ën
 = 
	`ngx_¥rštf
(
p
, "%08uxd", *
v®ue
) -…;

2526 
v
->
v®id
 = 1;

2527 
v
->
no_ÿch—bË
 = 0;

2528 
v
->
nÙ_found
 = 0;

2529 
v
->
d©a
 = 
p
;

2531  
NGX_OK
;

2532 
	}
}

2534 
ngx_št_t


2535 
	$ngx_h‰p_u¶ßd_fže_size_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2536 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2538 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2539 
u_ch¬
 *
p
;

2540 
off_t
 *
v®ue
;

2542 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2544 
v®ue
 = (
off_t
 *è((*è
u
 + 
d©a
);

2546 
p
 = 
	`ngx_·Îoc
(
r
->
poÞ
, 
NGX_OFF_T_LEN
);

2547 ià(
p
 =ð
NULL
) {

2548  
NGX_ERROR
;

2551 
v
->
Ën
 = 
	`ngx_¥rštf
(
p
, "%O", *
v®ue
) -…;

2552 
v
->
v®id
 = 1;

2553 
v
->
no_ÿch—bË
 = 0;

2554 
v
->
nÙ_found
 = 0;

2555 
v
->
d©a
 = 
p
;

2557  
NGX_OK
;

2558 
	}
}

2561 
	$ngx_h‰p_u¶ßd_cÚ‹Á_¿nge_v¬ŸbË_£t
(
ngx_h‰p_»que¡_t
 *
r
,

2562 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2564 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2565 
ngx_¡r_t
 
v®
;

2566 
ngx_h‰p_u¶ßd_¿nge_t
 *
v®ue
;

2568 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2570 
v®ue
 = (
ngx_h‰p_u¶ßd_¿nge_t
 *è((*è
u
 + 
d©a
);

2572 
v®
.
Ën
 = 
v
->len;

2573 
v®
.
d©a
 = 
v
->data;

2575 if(
	`ngx_h‰p_u¶ßd_·r£_¿nge
(&
v®
, 
v®ue
è!ð
NGX_OK
) {

2576 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
r
->
cÚÃùiÚ
->
log
, 0,

2577 "šv®id„ªg\"%V\"", &
v®
);

2579 
	}
}

2581 
ngx_št_t


2582 
	$ngx_h‰p_u¶ßd_cÚ‹Á_¿nge_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2583 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2585 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2586 
u_ch¬
 *
p
;

2587 
ngx_h‰p_u¶ßd_¿nge_t
 *
v®ue
;

2589 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2591 
v®ue
 = (
ngx_h‰p_u¶ßd_¿nge_t
 *è((*è
u
 + 
d©a
);

2593 
p
 = 
	`ngx_·Îoc
(
r
->
poÞ
, ("by‹ "è- 1 + 3*
NGX_OFF_T_LEN
 + 2);

2594 ià(
p
 =ð
NULL
) {

2595  
NGX_ERROR
;

2598 
v
->
Ën
 = 
u
->
·¹Ÿl_cÚ‹Á
 ?

2599 
	`ngx_¥rštf
(
p
, "by‹ %O-%O/%O", 
v®ue
->
¡¬t
, v®ue->
’d
, v®ue->
tÙ®
) -… :

2600 
	`ngx_¥rštf
(
p
, "by‹ %O-%O/%O", (
off_t
)0, 
u
->
ouut_fže
.
off£t
, u->output_file.offset) -…

2602 
v
->
v®id
 = 1;

2603 
v
->
no_ÿch—bË
 = 0;

2604 
v
->
nÙ_found
 = 0;

2605 
v
->
d©a
 = 
p
;

2607  
NGX_OK
;

2608 
	}
}

2610 
ngx_št_t


2611 
	$ngx_h‰p_u¶ßd_ušt_v¬ŸbË
(
ngx_h‰p_»que¡_t
 *
r
,

2612 
ngx_h‰p_v¬ŸbË_v®ue_t
 *
v
, 
ušŒ_t
 
d©a
)

2614 
ngx_h‰p_u¶ßd_ùx_t
 *
u
;

2615 
u_ch¬
 *
p
;

2616 
ngx_ušt_t
 *
v®ue
;

2618 
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

2620 
v®ue
 = (
ngx_ušt_t
 *è((*è
u
 + 
d©a
);

2622 
p
 = 
	`ngx_·Îoc
(
r
->
poÞ
, ("18446744073709551616") - 1);

2623 ià(
p
 =ð
NULL
) {

2624  
NGX_ERROR
;

2627 
v
->
Ën
 = 
	`ngx_¥rštf
(
p
, "%ui", *
v®ue
) -…;

2628 
v
->
v®id
 = 1;

2629 
v
->
no_ÿch—bË
 = 0;

2630 
v
->
nÙ_found
 = 0;

2631 
v
->
d©a
 = 
p
;

2633  
NGX_OK
;

2634 
	}
}

2637 
	$ngx_h‰p_u¶ßd_£t_fÜm_f›ld
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
, *
cÚf
)

2639 
ngx_št_t
 
n
, 
i
;

2640 
ngx_¡r_t
 *
v®ue
;

2641 
ngx_h‰p_süt_compže_t
 
sc
;

2642 
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
 *
h
;

2643 
ngx_¬¿y_t
 **
f›ld
;

2644 
ngx_h‰p_v¬ŸbË_t
 *
v
;

2645 
u_ch¬
 *
m©ch
;

2646 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
cÚf
;

2648 
f›ld
 = (
ngx_¬¿y_t
**è(((
u_ch¬
*)
cÚf
è+ 
cmd
->
off£t
);

2650 
v®ue
 = 
cf
->
¬gs
->
–ts
;

2652 ià(*
f›ld
 =ð
NULL
) {

2653 *
f›ld
 = 
	`ngx_¬¿y_ü—‹
(
cf
->
poÞ
, 1,

2654 (
ngx_h‰p_u¶ßd_f›ld_‹m¶©e_t
));

2655 ià(*
f›ld
 =ð
NULL
) {

2656  
NGX_CONF_ERROR
;

2660 
h
 = 
	`ngx_¬¿y_push
(*
f›ld
);

2661 ià(
h
 =ð
NULL
) {

2662  
NGX_CONF_ERROR
;

2665 
h
->
v®ue
.
hash
 = 1;

2666 
h
->
v®ue
.
key
 = value[1];

2667 
h
->
v®ue
.value = value[2];

2668 
h
->
f›ld_Ëngths
 = 
NULL
;

2669 
h
->
f›ld_v®ues
 = 
NULL
;

2670 
h
->
v®ue_Ëngths
 = 
NULL
;

2671 
h
->
v®ue_v®ues
 = 
NULL
;

2676 
n
 = 
	`ngx_h‰p_süt_v¬ŸbËs_couÁ
(&
v®ue
[1]);

2678 ià(
n
 > 0) {

2679 
	`ngx_memz”o
(&
sc
, (
ngx_h‰p_süt_compže_t
));

2681 
sc
.
cf
 = cf;

2682 
sc
.
sourû
 = &
v®ue
[1];

2683 
sc
.
Ëngths
 = &
h
->
f›ld_Ëngths
;

2684 
sc
.
v®ues
 = &
h
->
f›ld_v®ues
;

2685 
sc
.
v¬ŸbËs
 = 
n
;

2686 
sc
.
com¶‘e_Ëngths
 = 1;

2687 
sc
.
com¶‘e_v®ues
 = 1;

2689 ià(
	`ngx_h‰p_süt_compže
(&
sc
è!ð
NGX_OK
) {

2690  
NGX_CONF_ERROR
;

2697 
n
 = 
	`ngx_h‰p_süt_v¬ŸbËs_couÁ
(&
v®ue
[2]);

2699 ià(
n
 > 0) {

2700 
	`ngx_memz”o
(&
sc
, (
ngx_h‰p_süt_compže_t
));

2702 
sc
.
cf
 = cf;

2703 
sc
.
sourû
 = &
v®ue
[2];

2704 
sc
.
Ëngths
 = &
h
->
v®ue_Ëngths
;

2705 
sc
.
v®ues
 = &
h
->
v®ue_v®ues
;

2706 
sc
.
v¬ŸbËs
 = 
n
;

2707 
sc
.
com¶‘e_Ëngths
 = 1;

2708 
sc
.
com¶‘e_v®ues
 = 1;

2710 ià(
	`ngx_h‰p_süt_compže
(&
sc
è!ð
NGX_OK
) {

2711  
NGX_CONF_ERROR
;

2718 
i
 = 1;i <= 2;i++) {

2719 
v
 = 
ngx_h‰p_u¶ßd_agg»g©e_v¬ŸbËs
; v->
Çme
.
Ën
; v++) {

2720 
m©ch
 = 
	`ngx_¡rÿ£¡º
(
v®ue
[
i
].
d©a
, (*)
v
->
Çme
.d©a, v->Çme.
Ën
 - 1);

2726 if(
m©ch
 !ð
NULL


2727 && ((
m©ch
 - 
v®ue
[
i
].
d©a
 >= 1 && match[-1] == '$')

2728 || (
m©ch
 - 
v®ue
[
i
].
d©a
 >= 2 && match[-2] == '$' && match[-1] == '{')))

2730 if(
cmd
->
off£t
 !ð
	`off£tof
(
ngx_h‰p_u¶ßd_loc_cÚf_t
, 
agg»g©e_f›ld_‹m¶©es
)) {

2731 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2744  
NGX_CONF_ERROR
;

2747 if(
v
->
g‘_hªdËr
 =ð
ngx_h‰p_u¶ßd_md5_v¬ŸbË
)

2748 
ulcf
->
md5
 = 1;

2750 if(
v
->
g‘_hªdËr
 =ð
ngx_h‰p_u¶ßd_sha1_v¬ŸbË
)

2751 
ulcf
->
sha1
 = 1;

2753 if(
v
->
g‘_hªdËr
 =ð
ngx_h‰p_u¶ßd_sha256_v¬ŸbË
)

2754 
ulcf
->
sha256
 = 1;

2756 if(
v
->
g‘_hªdËr
 =ð
ngx_h‰p_u¶ßd_sha512_v¬ŸbË
)

2757 
ulcf
->
sha512
 = 1;

2759 if(
v
->
g‘_hªdËr
 =ð
ngx_h‰p_u¶ßd_üc32_v¬ŸbË
)

2760 
ulcf
->
üc32
 = 1;

2765  
NGX_CONF_OK
;

2766 
	}
}

2769 
	$ngx_h‰p_u¶ßd_·ss_fÜm_f›ld
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
, *
cÚf
)

2771 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
cÚf
;

2773 
ngx_¡r_t
 *
v®ue
;

2774 #ià(
NGX_PCRE
)

2775 #ià
defšed
 
ngšx_v”siÚ
 &&‚ginx_version >= 8025

2776 
ngx_»gex_compže_t
 
rc
;

2777 
u_ch¬
 
”r¡r
[
NGX_MAX_CONF_ERRSTR
];

2779 
ngx_št_t
 
n
;

2780 
ngx_¡r_t
 
”r
;

2783 
ngx_h‰p_u¶ßd_f›ld_fž‹r_t
 *
f
;

2785 
v®ue
 = 
cf
->
¬gs
->
–ts
;

2787 ià(
ulcf
->
f›ld_fž‹rs
 =ð
NULL
) {

2788 
ulcf
->
f›ld_fž‹rs
 = 
	`ngx_¬¿y_ü—‹
(
cf
->
poÞ
, 1,

2789 (
ngx_h‰p_u¶ßd_f›ld_fž‹r_t
));

2790 ià(
ulcf
->
f›ld_fž‹rs
 =ð
NULL
) {

2791  
NGX_CONF_ERROR
;

2795 
f
 = 
	`ngx_¬¿y_push
(
ulcf
->
f›ld_fž‹rs
);

2796 ià(
f
 =ð
NULL
) {

2797  
NGX_CONF_ERROR
;

2800 #ià(
NGX_PCRE
)

2801 #ià
defšed
 
ngšx_v”siÚ
 &&‚ginx_version >= 8025

2802 
	`ngx_memz”o
(&
rc
, (
ngx_»gex_compže_t
));

2804 
rc
.
·‰”n
 = 
v®ue
[1];

2805 
rc
.
poÞ
 = 
cf
->pool;

2806 
rc
.
”r
.
Ën
 = 
NGX_MAX_CONF_ERRSTR
;

2807 
rc
.
”r
.
d©a
 = 
”r¡r
;

2809 if(
	`ngx_»gex_compže
(&
rc
è!ð
NGX_OK
) {

2810 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0, "%V", &
rc
.
”r
);

2811  
NGX_CONF_ERROR
;

2814 
f
->
»gex
 = 
rc
.regex;

2815 
f
->
nÿ±u»s
 = 
rc
.
ÿ±u»s
;

2817 
f
->
»gex
 = 
	`ngx_»gex_compže
(&
v®ue
[1], 0, 
cf
->
poÞ
, &
”r
);

2819 ià(
f
->
»gex
 =ð
NULL
) {

2820 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0, "%s", 
”r
.
d©a
);

2821  
NGX_CONF_ERROR
;

2824 
n
 = 
	`ngx_»gex_ÿ±u»_couÁ
(
f
->
»gex
);

2826 ià(
n
 < 0) {

2827 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2828 
ngx_»gex_ÿ±u»_couÁ_n
 " failed for "

2829 "·‰”À\"%V\"", &
v®ue
[1]);

2830  
NGX_CONF_ERROR
;

2833 
f
->
nÿ±u»s
 = 
n
;

2836 
f
->
‹xt
.
Ën
 = 
v®ue
[1].len;

2837 
f
->
‹xt
.
d©a
 = 
v®ue
[1].data;

2840  
NGX_CONF_OK
;

2841 
	}
}

2844 
	$ngx_h‰p_u¶ßd_þ—nup
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
, *
cÚf
)

2846 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
cÚf
;

2848 
ngx_¡r_t
 *
v®ue
;

2849 
ngx_ušt_t
 
i
;

2850 
ngx_št_t
 
¡©us
, 
lo
, 
hi
;

2851 
ušt16_t
 *
s
;

2853 
v®ue
 = 
cf
->
¬gs
->
–ts
;

2855 ià(
ulcf
->
þ—nup_¡©u£s
 =ð
NULL
) {

2856 
ulcf
->
þ—nup_¡©u£s
 = 
	`ngx_¬¿y_ü—‹
(
cf
->
poÞ
, 1,

2857 (
ušt16_t
));

2858 ià(
ulcf
->
þ—nup_¡©u£s
 =ð
NULL
) {

2859  
NGX_CONF_ERROR
;

2863 
i
 = 1; i < 
cf
->
¬gs
->
ÃÉs
; i++) {

2864 if(
v®ue
[
i
].
Ën
 > 4 && v®ue[i].
d©a
[3] == '-') {

2865 
lo
 = 
	`ngx_©oi
(
v®ue
[
i
].
d©a
, 3);

2867 ià(
lo
 =ð
NGX_ERROR
) {

2868 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2869 "šv®id†ow” bound \"%V\"", &
v®ue
[
i
]);

2870  
NGX_CONF_ERROR
;

2873 
hi
 = 
	`ngx_©oi
(
v®ue
[
i
].
d©a
 + 4, v®ue[i].
Ën
 - 4);

2875 ià(
hi
 =ð
NGX_ERROR
) {

2876 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2877 "šv®id uµ” bound \"%V\"", &
v®ue
[
i
]);

2878  
NGX_CONF_ERROR
;

2881 ià(
hi
 < 
lo
) {

2882 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2884 &
v®ue
[
i
]);

2885  
NGX_CONF_ERROR
;

2889 
¡©us
 = 
	`ngx_©oi
(
v®ue
[
i
].
d©a
, v®ue[i].
Ën
);

2891 ià(
¡©us
 =ð
NGX_ERROR
) {

2892 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2893 "šv®id v®u\"%V\"", &
v®ue
[
i
]);

2894  
NGX_CONF_ERROR
;

2897 
hi
 = 
lo
 = 
¡©us
;

2900 ià(
lo
 < 200 || 
hi
 > 599) {

2901 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2903 &
v®ue
[
i
]);

2904  
NGX_CONF_ERROR
;

2907 
¡©us
 = 
lo
 ; stu <ð
hi
; status++) {

2908 
s
 = 
	`ngx_¬¿y_push
(
ulcf
->
þ—nup_¡©u£s
);

2909 ià(
s
 =ð
NULL
) {

2910  
NGX_CONF_ERROR
;

2913 *
s
 = 
¡©us
;

2918  
NGX_CONF_OK
;

2919 
	}
}

2922 
	$ngx_h‰p_u¶ßd_·ss
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
, *
cÚf
)

2924 
ngx_h‰p_cÜe_loc_cÚf_t
 *
þcf
;

2925 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
 = 
cÚf
;

2926 
ngx_¡r_t
 *
v®ue
;

2927 
ngx_h‰p_compže_com¶ex_v®ue_t
 
ccv
;

2929 ià((
ulcf
->
u¾
.
Ën
 !ð0è|| (ulcf->
u¾_cv
 !ð
NULL
)) {

2933 
v®ue
 = 
cf
->
¬gs
->
–ts
;

2935 ià(
v®ue
[1].
Ën
 == 0) {

2936 
	`ngx_cÚf_log_”rÜ
(
NGX_LOG_EMERG
, 
cf
, 0,

2938 &
cmd
->
Çme
);

2940  
NGX_CONF_ERROR
;

2943 
þcf
 = 
	`ngx_h‰p_cÚf_g‘_moduË_loc_cÚf
(
cf
, 
ngx_h‰p_cÜe_moduË
);

2944 
þcf
->
hªdËr
 = 
ngx_h‰p_u¶ßd_hªdËr
;

2946 ià(
	`ngx_h‰p_süt_v¬ŸbËs_couÁ
(&
v®ue
[1])) {

2948 
ulcf
->
u¾_cv
 = 
	`ngx_·Îoc
(
cf
->
poÞ
, (
ngx_h‰p_com¶ex_v®ue_t
));

2949 ià(
ulcf
->
u¾_cv
 =ð
NULL
) {

2950  
NGX_CONF_ERROR
;

2953 
	`ngx_memz”o
(&
ccv
, (
ngx_h‰p_compže_com¶ex_v®ue_t
));

2955 
ccv
.
cf
 = cf;

2956 
ccv
.
v®ue
 = &value[1];

2957 
ccv
.
com¶ex_v®ue
 = 
ulcf
->
u¾_cv
;

2959 ià(
	`ngx_h‰p_compže_com¶ex_v®ue
(&
ccv
è!ð
NGX_OK
) {

2960  
NGX_CONF_ERROR
;

2964 
ulcf
->
u¾
 = 
v®ue
[1];

2967  
NGX_CONF_OK
;

2968 
	}
}

2971 
	$ngx_h‰p_u¶ßd_£t_·th_¦Ù
(
ngx_cÚf_t
 *
cf
, 
ngx_commªd_t
 *
cmd
, *
cÚf
)

2973 *
p
 = 
cÚf
;

2975 
ssize_t
 
Ëv–
;

2976 
ngx_¡r_t
 *
v®ue
;

2977 
ngx_ušt_t
 
i
, 
n
;

2978 
ngx_h‰p_u¶ßd_·th_t
 *
·th
, **
¦Ù
;

2979 
ngx_h‰p_compže_com¶ex_v®ue_t
 
ccv
;

2981 
¦Ù
 = (
ngx_h‰p_u¶ßd_·th_t
 **è(
p
 + 
cmd
->
off£t
);

2983 ià(*
¦Ù
) {

2987 
·th
 = 
	`ngx_pÿÎoc
(
cf
->
poÞ
, (
ngx_h‰p_u¶ßd_·th_t
));

2988 ià(
·th
 =ð
NULL
) {

2989  
NGX_CONF_ERROR
;

2992 
·th
->·th = 
	`ngx_pÿÎoc
(
cf
->
poÞ
, (
ngx_·th_t
));

2993 ià(
·th
->·th =ð
NULL
) {

2994  
NGX_CONF_ERROR
;

2997 
v®ue
 = 
cf
->
¬gs
->
–ts
;

2999 
·th
->·th->
Çme
 = 
v®ue
[1];

3001 ià(
·th
->·th->
Çme
.
d©a
[·th->·th->Çme.
Ën
 - 1] == '/') {

3002 
·th
->·th->
Çme
.
Ën
--;

3005 ià(
	`ngx_cÚf_fuÎ_Çme
(
cf
->
cyþe
, &
·th
->·th->
Çme
, 0è!ð
NGX_OK
) {

3006  
NULL
;

3009 
·th
->·th->
Ën
 = 0;

3010 
·th
->·th->
mªag”
 = 
NULL
;

3011 
·th
->·th->
lßd”
 = 
NULL
;

3012 
·th
->·th->
cÚf_fže
 = 
cf
->cÚf_fže->
fže
.
Çme
.
d©a
;

3013 
·th
->·th->
lše
 = 
cf
->
cÚf_fže
->line;

3015 
i
 = 0, 
n
 = 2;‚ < 
cf
->
¬gs
->
ÃÉs
; i++,‚++) {

3016 
Ëv–
 = 
	`ngx_©oi
(
v®ue
[
n
].
d©a
, v®ue[n].
Ën
);

3017 ià(
Ëv–
 =ð
NGX_ERROR
 ||†evel == 0) {

3021 
·th
->·th->
Ëv–
[
i
] =†evel;

3022 
·th
->·th->
Ën
 +ð
Ëv–
 + 1;

3025 
i
 < 3) {

3026 
·th
->·th->
Ëv–
[
i
++] = 0;

3029 *
¦Ù
 = 
·th
;

3031 if(
	`ngx_h‰p_süt_v¬ŸbËs_couÁ
(&
v®ue
[1])) {

3032 
	`ngx_memz”o
(&
ccv
, (
ngx_h‰p_compže_com¶ex_v®ue_t
));

3034 
ccv
.
cf
 = cf;

3035 
ccv
.
v®ue
 = &value[1];

3036 
ccv
.
com¶ex_v®ue
 = &
·th
->
dyÇmic
;

3038 ià(
	`ngx_h‰p_compže_com¶ex_v®ue
(&
ccv
è!ð
NGX_OK
) {

3039  
NGX_CONF_ERROR
;

3042 
·th
->
is_dyÇmic
 = 1;

3045 ià(
	`ngx_add_·th
(
cf
, &
·th
->·thè=ð
NGX_ERROR
) {

3046  
NGX_CONF_ERROR
;

3050  
NGX_CONF_OK
;

3051 
	}
}

3055 
	$ngx_h‰p_u¶ßd_m”ge_·th_v®ue
(
ngx_cÚf_t
 *
cf
, 
ngx_h‰p_u¶ßd_·th_t
 **
·th
,‚gx_h‰p_u¶ßd_·th_ˆ*
´ev
,

3056 
ngx_·th_š™_t
 *
š™
)

3058 ià(*
·th
) {

3059  
NGX_CONF_OK
;

3062 ià(
´ev
) {

3063 *
·th
 = 
´ev
;

3064  
NGX_CONF_OK
;

3067 *
·th
 = 
	`ngx_pÿÎoc
(
cf
->
poÞ
, (
ngx_h‰p_u¶ßd_·th_t
));

3068 if(*
·th
 =ð
NULL
) {

3069  
NGX_CONF_ERROR
;

3072 (*
·th
)->·th = 
	`ngx_pÿÎoc
(
cf
->
poÞ
, (
ngx_·th_t
));

3073 if((*
·th
)->·th =ð
NULL
) {

3074  
NGX_CONF_ERROR
;

3077 (*
·th
)->·th->
Çme
 = 
š™
->name;

3079 if(
	`ngx_cÚf_fuÎ_Çme
(
cf
->
cyþe
, &(*
·th
)->·th->
Çme
, 0è!ð
NGX_OK
) {

3080  
NGX_CONF_ERROR
;

3083 (*
·th
)->·th->
Ëv–
[0] = 
š™
->level[0];

3084 (*
·th
)->·th->
Ëv–
[1] = 
š™
->level[1];

3085 (*
·th
)->·th->
Ëv–
[2] = 
š™
->level[2];

3087 (*
·th
)->·th->
Ën
 = 
š™
->
Ëv–
[0] + (init->level[0] ? 1 : 0)

3088 + 
š™
->
Ëv–
[1] + (init->level[1] ? 1 : 0)

3089 + 
š™
->
Ëv–
[2] + (init->level[2] ? 1 : 0);

3091 (*
·th
)->·th->
mªag”
 = 
NULL
;

3092 (*
·th
)->·th->
lßd”
 = 
NULL
;

3093 (*
·th
)->·th->
cÚf_fže
 = 
NULL
;

3095 if(
	`ngx_add_·th
(
cf
, &(*
·th
)->·thè!ð
NGX_OK
) {

3096  
NGX_CONF_ERROR
;

3099  
NGX_CONF_OK
;

3100 
	}
}

3102 
ngx_št_t


3103 
	$ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body
(
ngx_h‰p_»que¡_t
 *
r
) {

3104 
ssize_t
 
size
, 
´”—d
;

3105 
ngx_buf_t
 *
b
;

3106 
ngx_chaš_t
 *
þ
, **
Ãxt
;

3107 
ngx_h‰p_»que¡_body_t
 *
rb
;

3108 
ngx_h‰p_cÜe_loc_cÚf_t
 *
þcf
;

3109 
ngx_h‰p_u¶ßd_ùx_t
 *
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

3111 #ià
defšed
 
ngšx_v”siÚ
 &&‚ginx_version >= 8011

3112 
r
->
maš
->
couÁ
++;

3115 ià(
r
->
»que¡_body
 ||„->
disÿrd_body
) {

3116  
NGX_OK
;

3119 
rb
 = 
	`ngx_pÿÎoc
(
r
->
poÞ
, (
ngx_h‰p_»que¡_body_t
));

3120 ià(
rb
 =ð
NULL
) {

3121 
	`u¶ßd_shutdown_ùx
(
u
);

3122  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3125 
r
->
»que¡_body
 = 
rb
;

3127 ià(
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
 <= 0) {

3128 
	`u¶ßd_shutdown_ùx
(
u
);

3129  
NGX_HTTP_BAD_REQUEST
;

3140 
´”—d
 = 
r
->
h—d”_š
->
Ï¡
 -„->h—d”_š->
pos
;

3142 ià(
´”—d
) {

3146 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_HTTP
, 
r
->
cÚÃùiÚ
->
log
, 0,

3147 "h‰°þ›Á„eque¡ body…»»ad %uz", 
´”—d
);

3149 
u
->
»ûived
 = 
´”—d
;

3151 
b
 = 
	`ngx_ÿÎoc_buf
(
r
->
poÞ
);

3152 ià(
b
 =ð
NULL
) {

3153 
	`u¶ßd_shutdown_ùx
(
u
);

3154  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3157 
b
->
‹mpÜ¬y
 = 1;

3158 
b
->
¡¬t
 = 
r
->
h—d”_š
->
pos
;

3159 
b
->
pos
 = 
r
->
h—d”_š
->pos;

3160 
b
->
Ï¡
 = 
r
->
h—d”_š
->last;

3161 
b
->
’d
 = 
r
->
h—d”_š
->end;

3163 
rb
->
bufs
 = 
	`ngx_®loc_chaš_lšk
(
r
->
poÞ
);

3164 ià(
rb
->
bufs
 =ð
NULL
) {

3165 
	`u¶ßd_shutdown_ùx
(
u
);

3166  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3169 
rb
->
bufs
->
buf
 = 
b
;

3170 
rb
->
bufs
->
Ãxt
 = 
NULL
;

3171 
rb
->
buf
 = 
b
;

3173 ià(
´”—d
 >ð
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
) {

3177 
r
->
h—d”_š
->
pos
 +ðr->
h—d”s_š
.
cÚ‹Á_Ëngth_n
;

3178 
r
->
»que¡_Ëngth
 +ðr->
h—d”s_š
.
cÚ‹Á_Ëngth_n
;

3180 ià(
	`ngx_h‰p_´oûss_»que¡_body
(
r
, 
rb
->
bufs
è!ð
NGX_OK
) {

3181 
	`u¶ßd_shutdown_ùx
(
u
);

3182  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3185 
	`u¶ßd_shutdown_ùx
(
u
);

3187  
	`ngx_h‰p_u¶ßd_body_hªdËr
(
r
);

3194 
r
->
h—d”_š
->
pos
 =„->h—d”_š->
Ï¡
;

3196 
r
->
»que¡_Ëngth
 +ð
´”—d
;

3198 
rb
->
»¡
 = 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
 - 
´”—d
;

3200 ià(
rb
->
»¡
 <ð(
off_t
è(
b
->
’d
 - b->
Ï¡
)) {

3204 
u
->
to_wr™e
 = 
rb
->
bufs
;

3206 
r
->
»ad_ev’t_hªdËr
 = 
ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body_hªdËr
;

3208  
	`ngx_h‰p_do_»ad_u¶ßd_þ›Á_»que¡_body
(
r
);

3211 
Ãxt
 = &
rb
->
bufs
->next;

3214 
b
 = 
NULL
;

3215 
rb
->
»¡
 = 
r
->
h—d”s_š
.
cÚ‹Á_Ëngth_n
;

3216 
Ãxt
 = &
rb
->
bufs
;

3219 
þcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_cÜe_moduË
);

3221 
size
 = 
þcf
->
þ›Á_body_bufãr_size
;

3222 
size
 += size >> 2;

3224 ià(
rb
->
»¡
 < (
ssize_t
è
size
) {

3225 
size
 = 
rb
->
»¡
;

3227 ià(
r
->
»que¡_body_š_sšgË_buf
) {

3228 
size
 +ð
´”—d
;

3232 
size
 = 
þcf
->
þ›Á_body_bufãr_size
;

3235 
b
 = 
NULL
;

3238 
rb
->
buf
 = 
	`ngx_ü—‹_‹mp_buf
(
r
->
poÞ
, 
size
);

3239 ià(
rb
->
buf
 =ð
NULL
) {

3240 
	`u¶ßd_shutdown_ùx
(
u
);

3241  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3244 
þ
 = 
	`ngx_®loc_chaš_lšk
(
r
->
poÞ
);

3245 ià(
þ
 =ð
NULL
) {

3246 
	`u¶ßd_shutdown_ùx
(
u
);

3247  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3250 
þ
->
buf
 = 
rb
->buf;

3251 
þ
->
Ãxt
 = 
NULL
;

3253 ià(
b
 && 
r
->
»que¡_body_š_sšgË_buf
) {

3254 
size
 = 
b
->
Ï¡
 - b->
pos
;

3255 
	`ngx_memýy
(
rb
->
buf
->
pos
, 
b
->pos, 
size
);

3256 
rb
->
buf
->
Ï¡
 +ð
size
;

3258 
Ãxt
 = &
rb
->
bufs
;

3261 *
Ãxt
 = 
þ
;

3263 
u
->
to_wr™e
 = 
rb
->
bufs
;

3265 
r
->
»ad_ev’t_hªdËr
 = 
ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body_hªdËr
;

3267  
	`ngx_h‰p_do_»ad_u¶ßd_þ›Á_»que¡_body
(
r
);

3268 
	}
}

3271 
	$ngx_h‰p_»ad_u¶ßd_þ›Á_»que¡_body_hªdËr
(
ngx_h‰p_»que¡_t
 *
r
)

3273 
ngx_št_t
 
rc
;

3274 
ngx_h‰p_u¶ßd_ùx_t
 *
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

3275 
ngx_ev’t_t
 *
»v
 = 
r
->
cÚÃùiÚ
->
»ad
;

3276 
ngx_h‰p_cÜe_loc_cÚf_t
 *
þcf
;

3278 ià(
»v
->
timedout
) {

3279 if(!
»v
->
d–ayed
) {

3280 
r
->
cÚÃùiÚ
->
timedout
 = 1;

3281 
	`u¶ßd_shutdown_ùx
(
u
);

3282 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
NGX_HTTP_REQUEST_TIME_OUT
);

3286 
»v
->
timedout
 = 0;

3287 
»v
->
d–ayed
 = 0;

3289 ià(!
»v
->
»ady
) {

3290 
þcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_cÜe_moduË
);

3291 
	`ngx_add_tim”
(
»v
, 
þcf
->
þ›Á_body_timeout
);

3293 ià(
	`ngx_hªdË_»ad_ev’t
(
»v
, 
þcf
->
£nd_low©
è!ð
NGX_OK
) {

3294 
	`u¶ßd_shutdown_ùx
(
u
);

3295 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
NGX_HTTP_INTERNAL_SERVER_ERROR
);

3302 ià(
r
->
cÚÃùiÚ
->
»ad
->
d–ayed
) {

3303 
þcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_cÜe_moduË
);

3304 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_HTTP
, 
»v
->
log
, 0,

3307 ià(
	`ngx_hªdË_»ad_ev’t
(
»v
, 
þcf
->
£nd_low©
è!ð
NGX_OK
) {

3308 
	`u¶ßd_shutdown_ùx
(
u
);

3309 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
NGX_HTTP_INTERNAL_SERVER_ERROR
);

3316 
rc
 = 
	`ngx_h‰p_do_»ad_u¶ßd_þ›Á_»que¡_body
(
r
);

3318 ià(
rc
 >ð
NGX_HTTP_SPECIAL_RESPONSE
) {

3319 
	`u¶ßd_shutdown_ùx
(
u
);

3320 
	`ngx_h‰p_fš®ize_»que¡
(
r
, 
rc
);

3322 
	}
}

3324 
ngx_št_t


3325 
	$ngx_h‰p_do_»ad_u¶ßd_þ›Á_»que¡_body
(
ngx_h‰p_»que¡_t
 *
r
)

3327 
ssize_t
 
size
, 
n
, 
lim™
;

3328 
ngx_cÚÃùiÚ_t
 *
c
;

3329 
ngx_h‰p_»que¡_body_t
 *
rb
;

3330 
ngx_h‰p_u¶ßd_ùx_t
 *
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

3331 
ngx_št_t
 
rc
;

3332 
ngx_h‰p_cÜe_loc_cÚf_t
 *
þcf
;

3333 
ngx_m£c_t
 
d–ay
;

3335 
c
 = 
r
->
cÚÃùiÚ
;

3336 
rb
 = 
r
->
»que¡_body
;

3338 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_HTTP
, 
c
->
log
, 0,

3343 ià(
rb
->
buf
->
Ï¡
 =ðrb->buf->
’d
) {

3345 
rc
 = 
	`ngx_h‰p_´oûss_»que¡_body
(
r
, 
u
->
to_wr™e
);

3347 
rc
) {

3348 
NGX_OK
:

3350 
NGX_UPLOAD_MALFORMED
:

3351  
NGX_HTTP_BAD_REQUEST
;

3352 
NGX_UPLOAD_TOOLARGE
:

3353  
NGX_HTTP_REQUEST_ENTITY_TOO_LARGE
;

3354 
NGX_UPLOAD_IOERROR
:

3355  
NGX_HTTP_SERVICE_UNAVAILABLE
;

3356 
NGX_UPLOAD_NOMEM
: 
NGX_UPLOAD_SCRIPTERROR
:

3358  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3361 
u
->
to_wr™e
 = 
rb
->
bufs
->
Ãxt
 ?„b->bufs->next :„b->bufs;

3362 
rb
->
buf
->
Ï¡
 =„b->buf->
¡¬t
;

3365 
size
 = 
rb
->
buf
->
’d
 -„b->buf->
Ï¡
;

3367 ià((
off_t
)
size
 > 
rb
->
»¡
) {

3368 
size
 = (
size_t
)
rb
->
»¡
;

3371 ià(
u
->
lim™_¿‹
) {

3372 
lim™
 = 
u
->
lim™_¿‹
 * (
	`ngx_time
(è- 
r
->
¡¬t_£c
 + 1è- u->
»ûived
;

3374 ià(
lim™
 < 0) {

3375 
c
->
»ad
->
d–ayed
 = 1;

3376 
	`ngx_add_tim”
(
c
->
»ad
,

3377 (
ngx_m£c_t
è(- 
lim™
 * 1000 / 
u
->
lim™_¿‹
 + 1));

3379  
NGX_AGAIN
;

3382 if(
lim™
 > 0 && 
size
 >†imit) {

3383 
size
 = 
lim™
;

3387 
n
 = 
c
->
	`»cv
(c, 
rb
->
buf
->
Ï¡
, 
size
);

3389 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_HTTP
, 
c
->
log
, 0,

3390 "h‰°þ›Á„eque¡ body„ecv %z", 
n
);

3392 ià(
n
 =ð
NGX_AGAIN
) {

3396 ià(
n
 == 0) {

3397 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
c
->
log
, 0,

3401 ià(
n
 =ð0 ||‚ =ð
NGX_ERROR
) {

3402 
c
->
”rÜ
 = 1;

3403  
NGX_HTTP_BAD_REQUEST
;

3406 
rb
->
buf
->
Ï¡
 +ð
n
;

3407 
rb
->
»¡
 -ð
n
;

3408 
r
->
»que¡_Ëngth
 +ð
n
;

3409 
u
->
»ûived
 +ð
n
;

3411 ià(
rb
->
»¡
 == 0) {

3415 ià(
rb
->
buf
->
Ï¡
 <„b->buf->
’d
) {

3419 ià(
u
->
lim™_¿‹
) {

3420 
d–ay
 = (
ngx_m£c_t
è(
n
 * 1000 / 
u
->
lim™_¿‹
 + 1);

3422 ià(
d–ay
 > 0) {

3423 
c
->
»ad
->
d–ayed
 = 1;

3424 
	`ngx_add_tim”
(
c
->
»ad
, 
d–ay
);

3425  
NGX_AGAIN
;

3430 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_HTTP
, 
c
->
log
, 0,

3431 "h‰°þ›Á„eque¡ body„e¡ %uz", 
rb
->
»¡
);

3433 ià(
rb
->
»¡
 == 0) {

3437 ià(!
c
->
»ad
->
»ady
) {

3438 
þcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
r
, 
ngx_h‰p_cÜe_moduË
);

3439 
	`ngx_add_tim”
(
c
->
»ad
, 
þcf
->
þ›Á_body_timeout
);

3441 ià(
	`ngx_hªdË_»ad_ev’t
(
c
->
»ad
, 0è!ð
NGX_OK
) {

3442  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3445  
NGX_AGAIN
;

3449 ià(
c
->
»ad
->
tim”_£t
) {

3450 
	`ngx_d–_tim”
(
c
->
»ad
);

3453 
rc
 = 
	`ngx_h‰p_´oûss_»que¡_body
(
r
, 
u
->
to_wr™e
);

3455 
rc
) {

3456 
NGX_OK
:

3458 
NGX_UPLOAD_MALFORMED
:

3459  
NGX_HTTP_BAD_REQUEST
;

3460 
NGX_UPLOAD_TOOLARGE
:

3461  
NGX_HTTP_REQUEST_ENTITY_TOO_LARGE
;

3462 
NGX_UPLOAD_IOERROR
:

3463  
NGX_HTTP_SERVICE_UNAVAILABLE
;

3464 
NGX_UPLOAD_NOMEM
: 
NGX_UPLOAD_SCRIPTERROR
:

3466  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3469 
	`u¶ßd_shutdown_ùx
(
u
);

3471  
	`ngx_h‰p_u¶ßd_body_hªdËr
(
r
);

3472 
	}
}

3474 
ngx_št_t


3475 
	$ngx_h‰p_´oûss_»que¡_body
(
ngx_h‰p_»que¡_t
 *
r
, 
ngx_chaš_t
 *
body
)

3477 
ngx_št_t
 
rc
;

3478 
ngx_h‰p_u¶ßd_ùx_t
 *
u
 = 
	`ngx_h‰p_g‘_moduË_ùx
(
r
, 
ngx_h‰p_u¶ßd_moduË
);

3481 
body
) {

3482 
rc
 = 
u
->
	`d©a_hªdËr
(u, 
body
->
buf
->
pos
, body->buf->
Ï¡
);

3484 if(
rc
 !ð
NGX_OK
)

3485  
rc
;

3487 
body
 = body->
Ãxt
;

3490 if(
u
->
¿w_šput
) {

3492 if(
r
->
»que¡_body
->
»¡
 == 0) {

3493 
rc
 = 
u
->
	`d©a_hªdËr
(u, 
NULL
, NULL);

3495 if(
rc
 !ð
NGX_OK
)

3496  
rc
;

3500  
NGX_OK
;

3501 
	}
}

3503 
ngx_št_t
 
	$u¶ßd_·r£_cÚ‹Á_di¥os™iÚ
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
ngx_¡r_t
 *
cÚ‹Á_di¥os™iÚ
) {

3504 *
fž’ame_¡¬t
, *
fž’ame_’d
;

3505 *
f›ldÇme_¡¬t
, *
f›ldÇme_’d
;

3506 *
p
, *
q
;

3508 
p
 = (*)
cÚ‹Á_di¥os™iÚ
->
d©a
;

3510 if(
	`¡ºÿ£cmp
(
FORM_DATA_STRING
, 
p
, (FORM_DATA_STRING)-1) &&

3511 
	`¡ºÿ£cmp
(
ATTACHMENT_STRING
, 
p
, (ATTACHMENT_STRING)-1)) {

3512 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3514  
NGX_UPLOAD_MALFORMED
;

3517 
fž’ame_¡¬t
 = 
	`¡r¡r
(
p
, 
FILENAME_STRING
);

3519 if(
fž’ame_¡¬t
 != 0) {

3521 
fž’ame_¡¬t
 +ð(
FILENAME_STRING
)-1;

3523 
fž’ame_’d
 = 
fž’ame_¡¬t
 + 
	`¡rc¥n
(filename_start, "\"");

3525 if(*
fž’ame_’d
 != '\"') {

3526 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3528  
NGX_UPLOAD_MALFORMED
;

3535 
q
 = 
fž’ame_’d
-1; q > 
fž’ame_¡¬t
; q--)

3536 if(*
q
 == '\\' || *q == '/') {

3537 
fž’ame_¡¬t
 = 
q
+1;

3541 
u¶ßd_ùx
->
fže_Çme
.
Ën
 = 
fž’ame_’d
 - 
fž’ame_¡¬t
;

3542 
u¶ßd_ùx
->
fže_Çme
.
d©a
 = 
	`ngx_·Îoc
(u¶ßd_ùx->
»que¡
->
poÞ
, u¶ßd_ùx->fže_Çme.
Ën
 + 1);

3544 if(
u¶ßd_ùx
->
fže_Çme
.
d©a
 =ð
NULL
)

3545  
NGX_UPLOAD_NOMEM
;

3547 
	`¡ºýy
((*)
u¶ßd_ùx
->
fže_Çme
.
d©a
, 
fž’ame_¡¬t
, 
fž’ame_’d
 - filename_start);

3550 
f›ldÇme_¡¬t
 = 
p
;

3553 
f›ldÇme_¡¬t
 = 
	`¡r¡r
(f›ldÇme_¡¬t, 
FIELDNAME_STRING
);

3556 if(
f›ldÇme_¡¬t
 != 0) {

3557 
f›ldÇme_¡¬t
 +ð(
FIELDNAME_STRING
)-1;

3559 if(
f›ldÇme_¡¬t
 !ð
fž’ame_¡¬t
) {

3560 
f›ldÇme_’d
 = 
f›ldÇme_¡¬t
 + 
	`¡rc¥n
(fieldname_start, "\"");

3562 if(*
f›ldÇme_’d
 != '\"') {

3563 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0,

3565  
NGX_UPLOAD_MALFORMED
;

3568 
u¶ßd_ùx
->
f›ld_Çme
.
Ën
 = 
f›ldÇme_’d
 - 
f›ldÇme_¡¬t
;

3569 
u¶ßd_ùx
->
f›ld_Çme
.
d©a
 = 
	`ngx_pÿÎoc
(u¶ßd_ùx->
»que¡
->
poÞ
, u¶ßd_ùx->f›ld_Çme.
Ën
 + 1);

3571 if(
u¶ßd_ùx
->
f›ld_Çme
.
d©a
 =ð
NULL
)

3572  
NGX_UPLOAD_NOMEM
;

3574 
	`¡ºýy
((*)
u¶ßd_ùx
->
f›ld_Çme
.
d©a
, 
f›ldÇme_¡¬t
, 
f›ldÇme_’d
 - fieldname_start);

3578  
NGX_OK
;

3579 
	}
}

3581 
ngx_št_t
 
	$u¶ßd_·r£_·¹_h—d”
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, *
h—d”
, *
h—d”_’d
) {

3582 
ngx_¡r_t
 
s
;

3584 if(!
	`¡ºÿ£cmp
(
CONTENT_DISPOSITION_STRING
, 
h—d”
, (CONTENT_DISPOSITION_STRING) - 1)) {

3585 *
p
 = 
h—d”
 + (
CONTENT_DISPOSITION_STRING
) - 1;

3587 
p
 +ð
	`¡r¥n
(p, " ");

3589 
s
.
d©a
 = (
u_ch¬
*)
p
;

3590 
s
.
Ën
 = 
h—d”_’d
 - 
p
;

3592 if(
	`u¶ßd_·r£_cÚ‹Á_di¥os™iÚ
(
u¶ßd_ùx
, &
s
è!ð
NGX_OK
) {

3593 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3595  
NGX_UPLOAD_MALFORMED
;

3598 if(!
	`¡ºÿ£cmp
(
CONTENT_TYPE_STRING
, 
h—d”
, (CONTENT_TYPE_STRING)-1)) {

3599 *
cÚ‹Á_ty³_¡r
 = 
h—d”
 + (
CONTENT_TYPE_STRING
)-1;

3601 
cÚ‹Á_ty³_¡r
 +ð
	`¡r¥n
(content_type_str, " ");

3602 
u¶ßd_ùx
->
cÚ‹Á_ty³
.
Ën
 = 
h—d”_’d
 - 
cÚ‹Á_ty³_¡r
;

3604 if(
u¶ßd_ùx
->
cÚ‹Á_ty³
.
Ën
 == 0) {

3605 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0,

3607  
NGX_UPLOAD_MALFORMED
;

3610 
u¶ßd_ùx
->
cÚ‹Á_ty³
.
d©a
 = 
	`ngx_pÿÎoc
(u¶ßd_ùx->
»que¡
->
poÞ
, u¶ßd_ùx->cÚ‹Á_ty³.
Ën
 + 1);

3612 if(
u¶ßd_ùx
->
cÚ‹Á_ty³
.
d©a
 =ð
NULL
)

3613  
NGX_UPLOAD_NOMEM
;

3615 
	`¡ºýy
((*)
u¶ßd_ùx
->
cÚ‹Á_ty³
.
d©a
, 
cÚ‹Á_ty³_¡r
, u¶ßd_ùx->cÚ‹Á_ty³.
Ën
);

3618  
NGX_OK
;

3619 
	}
}

3621 
	$u¶ßd_disÿrd_·¹_©Œibu‹s
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3622 
u¶ßd_ùx
->
fže_Çme
.
Ën
 = 0;

3623 
u¶ßd_ùx
->
fže_Çme
.
d©a
 = 
NULL
;

3625 
u¶ßd_ùx
->
f›ld_Çme
.
Ën
 = 0;

3626 
u¶ßd_ùx
->
f›ld_Çme
.
d©a
 = 
NULL
;

3628 
u¶ßd_ùx
->
cÚ‹Á_ty³
.
Ën
 = 0;

3629 
u¶ßd_ùx
->
cÚ‹Á_ty³
.
d©a
 = 
NULL
;

3631 
u¶ßd_ùx
->
cÚ‹Á_¿nge
.
Ën
 = 0;

3632 
u¶ßd_ùx
->
cÚ‹Á_¿nge
.
d©a
 = 
NULL
;

3634 
u¶ßd_ùx
->
£ssiÚ_id
.
Ën
 = 0;

3635 
u¶ßd_ùx
->
£ssiÚ_id
.
d©a
 = 
NULL
;

3637 
u¶ßd_ùx
->
·¹Ÿl_cÚ‹Á
 = 0;

3638 
	}
}

3640 
ngx_št_t
 
	$u¶ßd_¡¬t_fže
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3641 if(
u¶ßd_ùx
->
¡¬t_·¹_f
)

3642  
u¶ßd_ùx
->
	`¡¬t_·¹_f
(upload_ctx);

3644  
NGX_OK
;

3645 
	}
}

3647 
	$u¶ßd_fšish_fže
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3649 if(
u¶ßd_ùx
->
fšish_·¹_f
)

3650 
u¶ßd_ùx
->
	`fšish_·¹_f
(upload_ctx);

3652 
	`u¶ßd_disÿrd_·¹_©Œibu‹s
(
u¶ßd_ùx
);

3654 
u¶ßd_ùx
->
disÿrd_d©a
 = 0;

3655 
	}
}

3657 
	$u¶ßd_abÜt_fže
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3658 if(
u¶ßd_ùx
->
abÜt_·¹_f
)

3659 
u¶ßd_ùx
->
	`abÜt_·¹_f
(upload_ctx);

3661 
	`u¶ßd_disÿrd_·¹_©Œibu‹s
(
u¶ßd_ùx
);

3663 
u¶ßd_ùx
->
disÿrd_d©a
 = 0;

3664 
	}
}

3666 
	$u¶ßd_æush_ouut_bufãr
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3667 if(
u¶ßd_ùx
->
ouut_bufãr_pos
 > u¶ßd_ùx->
ouut_bufãr
) {

3668 if(
u¶ßd_ùx
->
æush_ouut_bufãr_f
)

3669 if(
u¶ßd_ùx
->
	`æush_ouut_bufãr_f
(u¶ßd_ùx, (*)u¶ßd_ùx->
ouut_bufãr
,

3670 (
size_t
)(
u¶ßd_ùx
->
ouut_bufãr_pos
 - u¶ßd_ùx->
ouut_bufãr
)è!ð
NGX_OK
)

3671 
u¶ßd_ùx
->
disÿrd_d©a
 = 1;

3673 
u¶ßd_ùx
->
ouut_bufãr_pos
 = u¶ßd_ùx->
ouut_bufãr
;

3675 
	}
}

3677 
	$u¶ßd_š™_ùx
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3678 
u¶ßd_ùx
->
bound¬y
.
d©a
 = u¶ßd_ùx->
bound¬y_¡¬t
 = u¶ßd_ùx->
bound¬y_pos
 = 0;

3680 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_bound¬y_£ek
;

3682 
	`u¶ßd_disÿrd_·¹_©Œibu‹s
(
u¶ßd_ùx
);

3684 
u¶ßd_ùx
->
disÿrd_d©a
 = 0;

3686 
u¶ßd_ùx
->
¡¬t_·¹_f
 = 
ngx_h‰p_u¶ßd_¡¬t_hªdËr
;

3687 
u¶ßd_ùx
->
fšish_·¹_f
 = 
ngx_h‰p_u¶ßd_fšish_hªdËr
;

3688 
u¶ßd_ùx
->
abÜt_·¹_f
 = 
ngx_h‰p_u¶ßd_abÜt_hªdËr
;

3689 
u¶ßd_ùx
->
æush_ouut_bufãr_f
 = 
ngx_h‰p_u¶ßd_æush_ouut_bufãr
;

3691 
u¶ßd_ùx
->
¡¬‹d
 = 0;

3692 
u¶ßd_ùx
->
uÃncoded
 = 0;

3696 
u¶ßd_ùx
->
d©a_hªdËr
 = 
u¶ßd_´oûss_buf
;

3697 
	}
}

3699 
	$u¶ßd_shutdown_ùx
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
) {

3700 if(
u¶ßd_ùx
 != 0) {

3702 if(
u¶ßd_ùx
->
¡©e
 =ð
u¶ßd_¡©e_d©a
) {

3703 
	`u¶ßd_æush_ouut_bufãr
(
u¶ßd_ùx
);

3704 
	`u¶ßd_abÜt_fže
(
u¶ßd_ùx
);

3707 
	`u¶ßd_disÿrd_·¹_©Œibu‹s
(
u¶ßd_ùx
);

3709 
	}
}

3711 
ngx_št_t
 
	$u¶ßd_¡¬t
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
) {

3712 if(
u¶ßd_ùx
 =ð
NULL
)

3713  
NGX_ERROR
;

3715 
u¶ßd_ùx
->
h—d”_accumuÏtÜ
 = 
	`ngx_pÿÎoc
(u¶ßd_ùx->
»que¡
->
poÞ
, 
ulcf
->
max_h—d”_Ën
 + 1);

3717 if(
u¶ßd_ùx
->
h—d”_accumuÏtÜ
 =ð
NULL
)

3718  
NGX_ERROR
;

3720 
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 = u¶ßd_ùx->
h—d”_accumuÏtÜ
;

3721 
u¶ßd_ùx
->
h—d”_accumuÏtÜ_’d
 = u¶ßd_ùx->
h—d”_accumuÏtÜ
 + 
ulcf
->
max_h—d”_Ën
;

3723 
u¶ßd_ùx
->
ouut_bufãr
 = 
	`ngx_pÿÎoc
(u¶ßd_ùx->
»que¡
->
poÞ
, 
ulcf
->
bufãr_size
);

3725 if(
u¶ßd_ùx
->
ouut_bufãr
 =ð
NULL
)

3726  
NGX_ERROR
;

3728 
u¶ßd_ùx
->
ouut_bufãr_pos
 = u¶ßd_ùx->
ouut_bufãr
;

3729 
u¶ßd_ùx
->
ouut_bufãr_’d
 = u¶ßd_ùx->
ouut_bufãr
 + 
ulcf
->
bufãr_size
;

3731 
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 = u¶ßd_ùx->
h—d”_accumuÏtÜ
;

3733 
u¶ßd_ùx
->
¿nge_h—d”_bufãr
 = 
	`ngx_pÿÎoc
(u¶ßd_ùx->
»que¡
->
poÞ
, 
ulcf
->
¿nge_h—d”_bufãr_size
);

3735 if(
u¶ßd_ùx
->
¿nge_h—d”_bufãr
 =ð
NULL
)

3736  
NGX_ERROR
;

3738 
u¶ßd_ùx
->
¿nge_h—d”_bufãr_pos
 = u¶ßd_ùx->
¿nge_h—d”_bufãr
;

3739 
u¶ßd_ùx
->
¿nge_h—d”_bufãr_’d
 = u¶ßd_ùx->
¿nge_h—d”_bufãr
 + 
ulcf
->
¿nge_h—d”_bufãr_size
;

3741 
u¶ßd_ùx
->
fœ¡_·¹
 = 1;

3743  
NGX_OK
;

3744 
	}
}

3746 
ngx_št_t


3747 
	$ngx_h‰p_u¶ßd_v®id©e_£ssiÚ_id
(
ngx_¡r_t
 *
£ssiÚ_id
) {

3748 
u_ch¬
 *
p
, *
q
;

3750 
p
 = 
£ssiÚ_id
->
d©a
;

3751 
q
 = 
£ssiÚ_id
->
d©a
 + sessiÚ_id->
Ën
;

3753 
p
 !ð
q
) {

3754 if(!((*
p
 >= '0' && *p <= '9') || (*p >= 'a' && *p <= 'z') || (*p >= 'A' && *p <= 'Z')

3755 || *
p
 == '_' || *p == '-'))

3757  
NGX_ERROR
;

3760 
p
++;

3763  
NGX_OK
;

3764 
	}
}

3766 
ngx_št_t
 
	$u¶ßd_·r£_»que¡_h—d”s
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
ngx_h‰p_h—d”s_š_t
 *
h—d”s_š
) {

3767 
ngx_¡r_t
 *
cÚ‹Á_ty³
, 
s
;

3768 
ngx_li¡_·¹_t
 *
·¹
;

3769 
ngx_bË_–t_t
 *
h—d”
;

3770 
ngx_ušt_t
 
i
;

3771 
u_ch¬
 *
mime_ty³_’d_±r
;

3772 
u_ch¬
 *
bound¬y_¡¬t_±r
, *
bound¬y_’d_±r
;

3773 
ngx_©omic_ušt_t
 
bound¬y
;

3774 
ngx_h‰p_u¶ßd_loc_cÚf_t
 *
ulcf
;

3776 
ulcf
 = 
	`ngx_h‰p_g‘_moduË_loc_cÚf
(
u¶ßd_ùx
->
»que¡
, 
ngx_h‰p_u¶ßd_moduË
);

3779 if(
h—d”s_š
->
cÚ‹Á_ty³
 =ð
NULL
) {

3780 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 
ngx_”ºo
,

3782  
NGX_HTTP_BAD_REQUEST
;

3785 
cÚ‹Á_ty³
 = &
h—d”s_š
->cÚ‹Á_ty³->
v®ue
;

3787 if(
	`ngx_¡ºÿ£cmp
(
cÚ‹Á_ty³
->
d©a
, (
u_ch¬
*è
MULTIPART_FORM_DATA_STRING
,

3788 (
MULTIPART_FORM_DATA_STRING
) - 1)) {

3790 if(!
ulcf
->
»sumabË_u¶ßds
) {

3791 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0,

3792 "CÚ‹Á-Ty³ i nÙ muÉ¬t/fÜm-d©¨ªd„esumabË u¶ßd ¬off: %V", 
cÚ‹Á_ty³
);

3793  
NGX_HTTP_UNSUPPORTED_MEDIA_TYPE
;

3799 
·¹
 = &
h—d”s_š
->
h—d”s
.part;

3800 
h—d”
 = 
·¹
->
–ts
;

3802 
i
 = 0;;i++) {

3803 ià(
i
 >ð
·¹
->
ÃÉs
) {

3804 ià(
·¹
->
Ãxt
 =ð
NULL
) {

3808 
·¹
 =…¬t->
Ãxt
;

3809 
h—d”
 = 
·¹
->
–ts
;

3810 
i
 = 0;

3813 if(!
	`¡ºÿ£cmp
(
CONTENT_DISPOSITION_STRING
, (*)
h—d”
[
i
].
key
.
d©a
, (CONTENT_DISPOSITION_STRING) - 1 - 1)) {

3814 if(
	`u¶ßd_·r£_cÚ‹Á_di¥os™iÚ
(
u¶ßd_ùx
, &
h—d”
[
i
].
v®ue
)) {

3815 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
u¶ßd_ùx
->
log
, 0,

3817  
NGX_ERROR
;

3820 
u¶ßd_ùx
->
is_fže
 = 1;

3821 
u¶ßd_ùx
->
uÃncoded
 = 1;

3822 
u¶ßd_ùx
->
¿w_šput
 = 1;

3824 
u¶ßd_ùx
->
d©a_hªdËr
 = 
u¶ßd_´oûss_¿w_buf
;

3825 }if(!
	`¡ºÿ£cmp
(
SESSION_ID_STRING
, (*)
h—d”
[
i
].
key
.
d©a
, (SESSION_ID_STRING) - 1 - 1)

3826 || !
	`¡ºÿ£cmp
(
X_SESSION_ID_STRING
, (*)
h—d”
[
i
].
key
.
d©a
, (X_SESSION_ID_STRING) - 1 - 1))

3828 if(
h—d”
[
i
].
v®ue
.
Ën
 == 0) {

3829 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3831  
NGX_ERROR
;

3834 if(
	`ngx_h‰p_u¶ßd_v®id©e_£ssiÚ_id
(&
h—d”
[
i
].
v®ue
è!ð
NGX_OK
) {

3835 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3837  
NGX_ERROR
;

3840 
u¶ßd_ùx
->
£ssiÚ_id
 = 
h—d”
[
i
].
v®ue
;

3842 
	`ngx_log_debug1
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3843 "£ssiÚ id %V", &
u¶ßd_ùx
->
£ssiÚ_id
);

3844 }if(!
	`¡ºÿ£cmp
(
CONTENT_RANGE_STRING
, (*)
h—d”
[
i
].
key
.
d©a
, (CONTENT_RANGE_STRING) - 1 - 1)

3845 || !
	`¡ºÿ£cmp
(
X_CONTENT_RANGE_STRING
, (*)
h—d”
[
i
].
key
.
d©a
, (X_CONTENT_RANGE_STRING) - 1 - 1))

3847 if(
h—d”
[
i
].
v®ue
.
Ën
 == 0) {

3848 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3850  
NGX_ERROR
;

3853 if(
	`¡ºÿ£cmp
((*)
h—d”
[
i
].
v®ue
.
d©a
, 
BYTES_UNIT_STRING
, (BYTES_UNIT_STRING) - 1)) {

3854 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3856  
NGX_ERROR
;

3859 
s
.
d©a
 = (
u_ch¬
*)(*)
h—d”
[
i
].
v®ue
.d©¨+ (
BYTES_UNIT_STRING
) - 1;

3860 
s
.
Ën
 = 
h—d”
[
i
].
v®ue
.ËÀ- (
BYTES_UNIT_STRING
) + 1;

3862 if(
	`ngx_h‰p_u¶ßd_·r£_¿nge
(&
s
, &
u¶ßd_ùx
->
cÚ‹Á_¿nge_n
è!ð
NGX_OK
) {

3863 
	`ngx_log_debug2
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3864 "šv®id„ªg%V (%V)", &
s
, &
h—d”
[
i
].
v®ue
);

3865  
NGX_ERROR
;

3868 
	`ngx_log_debug3
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3869 "·¹ŸÈcÚ‹Á,„ªg%O-%O/%O", 
u¶ßd_ùx
->
cÚ‹Á_¿nge_n
.
¡¬t
,

3870 
u¶ßd_ùx
->
cÚ‹Á_¿nge_n
.
’d
, u¶ßd_ùx->cÚ‹Á_¿nge_n.
tÙ®
);

3872 if(
ulcf
->
max_fže_size
 !ð0 && 
u¶ßd_ùx
->
cÚ‹Á_¿nge_n
.
tÙ®
 > ulcf->max_file_size) {

3873 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0,

3875  
NGX_HTTP_REQUEST_ENTITY_TOO_LARGE
;

3878 ifÐ(
u¶ßd_ùx
->
cÚ‹Á_¿nge_n
.
’d
 - u¶ßd_ùx->cÚ‹Á_¿nge_n.
¡¬t
 + 1)

3879 !ð
h—d”s_š
->
cÚ‹Á_Ëngth_n
)

3881 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0,

3883  
NGX_HTTP_RANGE_NOT_SATISFIABLE
;

3886 
u¶ßd_ùx
->
·¹Ÿl_cÚ‹Á
 = 1;

3890 if(!
u¶ßd_ùx
->
uÃncoded
) {

3891 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0,

3893  
NGX_HTTP_UNSUPPORTED_MEDIA_TYPE
;

3896 
u¶ßd_ùx
->
cÚ‹Á_ty³
 = *content_type;

3898 
bound¬y
 = 
	`ngx_Ãxt_‹mp_numb”
(0);

3900 
cÚ‹Á_ty³
->
d©a
 =

3901 
	`ngx_²®loc
(
u¶ßd_ùx
->
»que¡
->
poÞ
,

3902 (
MULTIPART_FORM_DATA_STRING
 "; boundary=") - 1

3903 + 
NGX_ATOMIC_T_LEN
);

3905 ià(
cÚ‹Á_ty³
->
d©a
 =ð
NULL
) {

3906  
NGX_ERROR
;

3909 
cÚ‹Á_ty³
->
Ën
 =

3910 
	`ngx_¥rštf
(
cÚ‹Á_ty³
->
d©a
,

3911 
MULTIPART_FORM_DATA_STRING
 "; boundary=%0muA",

3912 
bound¬y
)

3913 - 
cÚ‹Á_ty³
->
d©a
;

3915 
bound¬y_¡¬t_±r
 = 
cÚ‹Á_ty³
->
d©a
 + (
MULTIPART_FORM_DATA_STRING
 "; boundary=") - 1;

3916 
bound¬y_’d_±r
 = 
cÚ‹Á_ty³
->
d©a
 + cÚ‹Á_ty³->
Ën
;

3920 
mime_ty³_’d_±r
 = (
u_ch¬
*è
	`ngx_¡rchr
(
cÚ‹Á_ty³
->
d©a
, ';');

3922 
u¶ßd_ùx
->
bound¬y
.
d©a
 = 0;

3924 if(
mime_ty³_’d_±r
 =ð
NULL
) {

3925 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3927  
NGX_UPLOAD_MALFORMED
;

3930 
bound¬y_¡¬t_±r
 = 
	`ngx_¡r¡º
(
mime_ty³_’d_±r
, 
BOUNDARY_STRING
, (BOUNDARY_STRING) - 2);

3932 if(
bound¬y_¡¬t_±r
 =ð
NULL
) {

3933 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3935  
NGX_UPLOAD_MALFORMED
;

3938 
bound¬y_¡¬t_±r
 +ð(
BOUNDARY_STRING
) - 1;

3939 
bound¬y_’d_±r
 = 
bound¬y_¡¬t_±r
 + 
	`¡rc¥n
((*)boundary_start_ptr, " ;\n\r");

3941 if(
bound¬y_’d_±r
 =ð
bound¬y_¡¬t_±r
) {

3942 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_CORE
, 
u¶ßd_ùx
->
log
, 0,

3944  
NGX_UPLOAD_MALFORMED
;

3949 
u¶ßd_ùx
->
bound¬y
.
Ën
 = 
bound¬y_’d_±r
 - 
bound¬y_¡¬t_±r
 + 4;

3950 
u¶ßd_ùx
->
bound¬y
.
d©a
 = 
	`ngx_·Îoc
(u¶ßd_ùx->
»que¡
->
poÞ
, u¶ßd_ùx->bound¬y.
Ën
 + 1);

3952 if(
u¶ßd_ùx
->
bound¬y
.
d©a
 =ð
NULL
)

3953  
NGX_HTTP_INTERNAL_SERVER_ERROR
;

3955 
	`ngx_ýy¡º
(
u¶ßd_ùx
->
bound¬y
.
d©a
 + 4, 
bound¬y_¡¬t_±r
,

3956 
bound¬y_’d_±r
 - 
bound¬y_¡¬t_±r
 + 1);

3959 
u¶ßd_ùx
->
bound¬y
.
d©a
[0] = '\r';

3960 
u¶ßd_ùx
->
bound¬y
.
d©a
[1] = '\n';

3961 
u¶ßd_ùx
->
bound¬y
.
d©a
[2] = '-';

3962 
u¶ßd_ùx
->
bound¬y
.
d©a
[3] = '-';

3969 
u¶ßd_ùx
->
bound¬y_¡¬t
 = u¶ßd_ùx->
bound¬y
.
d©a
 + 2;

3970 
u¶ßd_ùx
->
bound¬y_pos
 = u¶ßd_ùx->
bound¬y_¡¬t
;

3972  
NGX_OK
;

3973 
	}
}

3975 
ngx_št_t


3976 
	$ngx_h‰p_u¶ßd_·r£_¿nge
(
ngx_¡r_t
 *
¿nge
, 
ngx_h‰p_u¶ßd_¿nge_t
 *
¿nge_n
)

3978 
u_ch¬
 *
p
 = 
¿nge
->
d©a
;

3979 
u_ch¬
 *
Ï¡
 = 
¿nge
->
d©a
 +„ªge->
Ën
;

3980 
off_t
 *
f›ld
 = &
¿nge_n
->
¡¬t
;

3982 if(
¿nge_n
 =ð
NULL
)

3983  
NGX_ERROR
;

3986 *
f›ld
 = 0;

3988 
p
 < 
Ï¡
) {

3990 if(*
p
 >= '0' && *p <= '9') {

3991 (*
f›ld
èð(*f›ldè* 10 + (*
p
 - '0');

3993 if(*
p
 == '-') {

3994 if(
f›ld
 !ð&
¿nge_n
->
¡¬t
) {

3995  
NGX_ERROR
;

3998 
f›ld
 = &
¿nge_n
->
’d
;

3999 
p
++;

4002 if(*
p
 == '/') {

4003 if(
f›ld
 !ð&
¿nge_n
->
’d
) {

4004  
NGX_ERROR
;

4007 
f›ld
 = &
¿nge_n
->
tÙ®
;

4008 
p
++;

4012  
NGX_ERROR
;

4015 
p
++;

4017 }
p
 < 
Ï¡
);

4019 if(
f›ld
 !ð&
¿nge_n
->
tÙ®
) {

4020  
NGX_ERROR
;

4023 if(
¿nge_n
->
¡¬t
 >„ªge_n->
’d
 ||„ªge_n->¡¬ˆ>ð¿nge_n->
tÙ®


4024 || 
¿nge_n
->
’d
 >ð¿nge_n->
tÙ®
)

4026  
NGX_ERROR
;

4029  
NGX_OK
;

4030 
	}
}

4032 
	$u¶ßd_putc
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
u_ch¬
 
c
) {

4033 if(!
u¶ßd_ùx
->
disÿrd_d©a
) {

4034 *
u¶ßd_ùx
->
ouut_bufãr_pos
 = 
c
;

4036 
u¶ßd_ùx
->
ouut_bufãr_pos
++;

4038 if(
u¶ßd_ùx
->
ouut_bufãr_pos
 =ðu¶ßd_ùx->
ouut_bufãr_’d
)

4039 
	`u¶ßd_æush_ouut_bufãr
(
u¶ßd_ùx
);

4041 
	}
}

4043 
ngx_št_t
 
	$u¶ßd_´oûss_buf
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
u_ch¬
 *
¡¬t
, u_ch¬ *
’d
) {

4045 
u_ch¬
 *
p
;

4046 
ngx_št_t
 
rc
;

4049 if(
¡¬t
 =ð
’d
) {

4050 if(
u¶ßd_ùx
->
¡©e
 !ð
u¶ßd_¡©e_fšish
) {

4051 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0, "prematureƒnd of body");

4052  
NGX_UPLOAD_MALFORMED
;

4055  
NGX_OK
;

4058 
p
 = 
¡¬t
;… !ð
’d
;…++) {

4059 
u¶ßd_ùx
->
¡©e
) {

4063 
u¶ßd_¡©e_bound¬y_£ek
:

4064 if(*
p
 =ð*
u¶ßd_ùx
->
bound¬y_pos
)

4065 
u¶ßd_ùx
->
bound¬y_pos
++;

4067 
u¶ßd_ùx
->
bound¬y_pos
 = u¶ßd_ùx->
bound¬y_¡¬t
;

4069 if(
u¶ßd_ùx
->
bound¬y_pos
 =ðu¶ßd_ùx->
bound¬y
.
d©a
 + u¶ßd_ùx->bound¬y.
Ën
) {

4070 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_aá”_bound¬y
;

4071 
u¶ßd_ùx
->
bound¬y_¡¬t
 = u¶ßd_ùx->
bound¬y
.
d©a
;

4072 
u¶ßd_ùx
->
bound¬y_pos
 = u¶ßd_ùx->
bound¬y_¡¬t
;

4075 
u¶ßd_¡©e_aá”_bound¬y
:

4076 *
p
) {

4078 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_h—d”s
;

4079 
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 = u¶ßd_ùx->
h—d”_accumuÏtÜ
;

4083 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_fšish
;

4090 
u¶ßd_¡©e_h—d”s
:

4091 *
p
) {

4093 if(
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 =ðu¶ßd_ùx->
h—d”_accumuÏtÜ
) {

4094 
u¶ßd_ùx
->
is_fže
 = (u¶ßd_ùx->
fže_Çme
.
d©a
 =ð0è|| (u¶ßd_ùx->fže_Çme.
Ën
 == 0) ? 0 : 1;

4096 
rc
 = 
	`u¶ßd_¡¬t_fže
(
u¶ßd_ùx
);

4098 if(
rc
 !ð
NGX_OK
) {

4099 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_fšish
;

4100  
rc
;

4102 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_d©a
;

4103 
u¶ßd_ùx
->
ouut_bufãr_pos
 = u¶ßd_ùx->
ouut_bufãr
;

4106 *
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 = '\0';

4108 
rc
 = 
	`u¶ßd_·r£_·¹_h—d”
(
u¶ßd_ùx
, (*)u¶ßd_ùx->
h—d”_accumuÏtÜ
,

4109 (*)
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
);

4111 if(
rc
 !ð
NGX_OK
) {

4112 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_fšish
;

4113  
rc
;

4115 
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 = u¶ßd_ùx->
h—d”_accumuÏtÜ
;

4120 if(
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
 < u¶ßd_ùx->
h—d”_accumuÏtÜ_’d
 - 1)

4121 *
u¶ßd_ùx
->
h—d”_accumuÏtÜ_pos
++ = *
p
;

4123 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
u¶ßd_ùx
->
log
, 0, "part header isoo†ong");

4125 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_fšish
;

4126  
NGX_UPLOAD_MALFORMED
;

4135 
u¶ßd_¡©e_d©a
:

4136 if(*
p
 =ð*
u¶ßd_ùx
->
bound¬y_pos
)

4137 
u¶ßd_ùx
->
bound¬y_pos
++;

4139 if(
u¶ßd_ùx
->
bound¬y_pos
 =ðu¶ßd_ùx->
bound¬y_¡¬t
) {

4141 if(*
p
 == '\n') {

4146 
u¶ßd_ùx
->
bound¬y_pos
 = u¶ßd_ùx->
bound¬y
.
d©a
 + 2;

4147 
u¶ßd_ùx
->
bound¬y_¡¬t
 = u¶ßd_ùx->
bound¬y
.
d©a
 + 1;

4149 
	`u¶ßd_putc
(
u¶ßd_ùx
, *
p
);

4152 
u_ch¬
 *
q
;

4153 
q
 = 
u¶ßd_ùx
->
bound¬y_¡¬t
; q !ðu¶ßd_ùx->
bound¬y_pos
; q++)

4154 
	`u¶ßd_putc
(
u¶ßd_ùx
, *
q
);

4156 
p
--;

4159 
u¶ßd_ùx
->
bound¬y_¡¬t
 = u¶ßd_ùx->
bound¬y
.
d©a
;

4160 
u¶ßd_ùx
->
bound¬y_pos
 = u¶ßd_ùx->
bound¬y_¡¬t
;

4164 if(
u¶ßd_ùx
->
bound¬y_pos
 =ðu¶ßd_ùx->
bound¬y
.
d©a
 + u¶ßd_ùx->bound¬y.
Ën
) {

4165 
u¶ßd_ùx
->
¡©e
 = 
u¶ßd_¡©e_aá”_bound¬y
;

4166 
u¶ßd_ùx
->
bound¬y_pos
 = u¶ßd_ùx->
bound¬y_¡¬t
;

4168 
	`u¶ßd_æush_ouut_bufãr
(
u¶ßd_ùx
);

4169 if(!
u¶ßd_ùx
->
disÿrd_d©a
)

4170 
	`u¶ßd_fšish_fže
(
u¶ßd_ùx
);

4172 
	`u¶ßd_abÜt_fže
(
u¶ßd_ùx
);

4178 
u¶ßd_¡©e_fšish
:

4183  
NGX_OK
;

4184 
	}
}

4186 
ngx_št_t


4187 
	$u¶ßd_´oûss_¿w_buf
(
ngx_h‰p_u¶ßd_ùx_t
 *
u¶ßd_ùx
, 
u_ch¬
 *
¡¬t
, u_ch¬ *
’d
) {

4188 
ngx_št_t
 
rc
;

4190 if(
¡¬t
 =ð
’d
) {

4191 if(!
u¶ßd_ùx
->
disÿrd_d©a
)

4192 
	`u¶ßd_fšish_fže
(
u¶ßd_ùx
);

4194 
	`u¶ßd_abÜt_fže
(
u¶ßd_ùx
);

4195  
NGX_OK
;

4198 if(!
u¶ßd_ùx
->
¡¬‹d
) {

4199 
rc
 = 
	`u¶ßd_¡¬t_fže
(
u¶ßd_ùx
);

4201 if(
rc
 !ð
NGX_OK
) {

4202  
rc
;

4205 
u¶ßd_ùx
->
¡¬‹d
 = 1;

4208 if(
u¶ßd_ùx
->
æush_ouut_bufãr_f
)

4209 if(
u¶ßd_ùx
->
	`æush_ouut_bufãr_f
(u¶ßd_ùx, (*)
¡¬t
,

4210 (
size_t
)(
’d
 - 
¡¬t
)è!ð
NGX_OK
)

4211 
u¶ßd_ùx
->
disÿrd_d©a
 = 1;

4213  
NGX_OK
;

4215 
	}
}

4218 
	$ngx_u¶ßd_þ—nup_hªdËr
(*
d©a
)

4220 
ngx_u¶ßd_þ—nup_t
 *
þn
 = 
d©a
;

4221 
ngx_ušt_t
 
i
;

4222 
ušt16_t
 *
s
;

4223 
u_ch¬
 
do_þ—nup
 = 0;

4225 if(!
þn
->
abÜ‹d
) {

4226 if(
þn
->
fd
 >= 0) {

4227 ià(
	`ngx_þo£_fže
(
þn
->
fd
è=ð
NGX_FILE_ERROR
) {

4228 
	`ngx_log_”rÜ
(
NGX_LOG_ALERT
, 
þn
->
log
, 
ngx_”ºo
,

4229 
ngx_þo£_fže_n
 " \"%s\" fažed", 
þn
->
fž’ame
);

4233 if(
þn
->
þ—nup_¡©u£s
 !ð
NULL
) {

4234 
s
 = 
þn
->
þ—nup_¡©u£s
->
–ts
;

4236 
i
 = 0; i < 
þn
->
þ—nup_¡©u£s
->
ÃÉs
; i++) {

4237 if(
þn
->
h—d”s_out
->
¡©us
 =ð
s
[
i
]) {

4238 
do_þ—nup
 = 1;

4243 if(
do_þ—nup
) {

4244 if(
	`ngx_d–‘e_fže
(
þn
->
fž’ame
è=ð
NGX_FILE_ERROR
) {

4245 
	`ngx_log_”rÜ
(
NGX_LOG_ERR
, 
þn
->
log
, 
ngx_”ºo


4247 , 
þn
->
fž’ame


4248 , 
þn
->
h—d”s_out
->
¡©us


4251 
	`ngx_log_”rÜ
(
NGX_LOG_INFO
, 
þn
->
log
, 0

4253 , 
þn
->
fž’ame


4254 , 
þn
->
h—d”s_out
->
¡©us


4258 
	}
}

4260 
ngx_št_t


4261 
	$ngx_h‰p_u¶ßd_‹¡_ex³ù
(
ngx_h‰p_»que¡_t
 *
r
)

4263 
ngx_št_t
 
n
;

4264 
ngx_¡r_t
 *
ex³ù
;

4266 ià(
r
->
ex³ù_‹¡ed


4267 || 
r
->
h—d”s_š
.
ex³ù
 =ð
NULL


4268 || 
r
->
h‰p_v”siÚ
 < 
NGX_HTTP_VERSION_11
)

4270  
NGX_OK
;

4273 
r
->
ex³ù_‹¡ed
 = 1;

4275 
ex³ù
 = &
r
->
h—d”s_š
.ex³ù->
v®ue
;

4277 ià(
ex³ù
->
Ën
 != ("100-continue") - 1

4278 || 
	`ngx_¡ºÿ£cmp
(
ex³ù
->
d©a
, (
u_ch¬
 *) "100-continue",

4282  
NGX_OK
;

4285 
	`ngx_log_debug0
(
NGX_LOG_DEBUG_HTTP
, 
r
->
cÚÃùiÚ
->
log
, 0,

4288 
n
 = 
r
->
cÚÃùiÚ
->
	`£nd
(r->connection,

4289 (
u_ch¬
 *è"HTTP/1.1 100 CÚtšue" 
CRLF
 CRLF,

4290 ("HTTP/1.1 100 CÚtšue" 
CRLF
 CRLF) - 1);

4292 ià(
n
 =ð("HTTP/1.1 100 CÚtšue" 
CRLF
 CRLF) - 1) {

4293  
NGX_OK
;

4298  
NGX_ERROR
;

4299 
	}
}

	@/usr/include/openssl/md5.h

10 #iâdeà
HEADER_MD5_H


11 
	#HEADER_MD5_H


	)

13 
	~<Ý’s¦/Ý’s¦cÚf.h
>

15 #iâdeà
OPENSSL_NO_MD5


16 
	~<Ý’s¦/e_os2.h
>

17 
	~<¡ddef.h
>

18 #ifdeà 
__ýlu¥lus


27 
	#MD5_LONG
 

	)

29 
	#MD5_CBLOCK
 64

	)

30 
	#MD5_LBLOCK
 (
MD5_CBLOCK
/4)

	)

31 
	#MD5_DIGEST_LENGTH
 16

	)

33 
	sMD5¡©e_¡
 {

34 
MD5_LONG
 
A
, 
B
, 
C
, 
D
;

35 
MD5_LONG
 
Nl
, 
Nh
;

36 
MD5_LONG
 
d©a
[
MD5_LBLOCK
];

37 
num
;

38 } 
	tMD5_CTX
;

40 
MD5_In™
(
MD5_CTX
 *
c
);

41 
MD5_Upd©e
(
MD5_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

42 
MD5_Fš®
(*
md
, 
MD5_CTX
 *
c
);

43 *
MD5
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

44 
MD5_T¿nsfÜm
(
MD5_CTX
 *
c
, cÚ¡ *
b
);

45 #ifdeà 
__ýlu¥lus


	@/usr/include/openssl/sha.h

10 #iâdeà
HEADER_SHA_H


11 
	#HEADER_SHA_H


	)

13 
	~<Ý’s¦/e_os2.h
>

14 
	~<¡ddef.h
>

16 #ifdeà 
__ýlu¥lus


25 
	#SHA_LONG
 

	)

27 
	#SHA_LBLOCK
 16

	)

28 
	#SHA_CBLOCK
 (
SHA_LBLOCK
*4)

	)

31 
	#SHA_LAST_BLOCK
 (
SHA_CBLOCK
-8)

	)

32 
	#SHA_DIGEST_LENGTH
 20

	)

34 
	sSHA¡©e_¡
 {

35 
SHA_LONG
 
h0
, 
h1
, 
h2
, 
h3
, 
h4
;

36 
SHA_LONG
 
Nl
, 
Nh
;

37 
SHA_LONG
 
d©a
[
SHA_LBLOCK
];

38 
num
;

39 } 
	tSHA_CTX
;

41 
SHA1_In™
(
SHA_CTX
 *
c
);

42 
SHA1_Upd©e
(
SHA_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

43 
SHA1_Fš®
(*
md
, 
SHA_CTX
 *
c
);

44 *
SHA1
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

45 
SHA1_T¿nsfÜm
(
SHA_CTX
 *
c
, cÚ¡ *
d©a
);

47 
	#SHA256_CBLOCK
 (
SHA_LBLOCK
*4)

	)

51 
	sSHA256¡©e_¡
 {

52 
SHA_LONG
 
h
[8];

53 
SHA_LONG
 
Nl
, 
Nh
;

54 
SHA_LONG
 
d©a
[
SHA_LBLOCK
];

55 
num
, 
md_Ën
;

56 } 
	tSHA256_CTX
;

58 
SHA224_In™
(
SHA256_CTX
 *
c
);

59 
SHA224_Upd©e
(
SHA256_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

60 
SHA224_Fš®
(*
md
, 
SHA256_CTX
 *
c
);

61 *
SHA224
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

62 
SHA256_In™
(
SHA256_CTX
 *
c
);

63 
SHA256_Upd©e
(
SHA256_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

64 
SHA256_Fš®
(*
md
, 
SHA256_CTX
 *
c
);

65 *
SHA256
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

66 
SHA256_T¿nsfÜm
(
SHA256_CTX
 *
c
, cÚ¡ *
d©a
);

68 
	#SHA224_DIGEST_LENGTH
 28

	)

69 
	#SHA256_DIGEST_LENGTH
 32

	)

70 
	#SHA384_DIGEST_LENGTH
 48

	)

71 
	#SHA512_DIGEST_LENGTH
 64

	)

83 
	#SHA512_CBLOCK
 (
SHA_LBLOCK
*8)

	)

84 #ià(
defšed
(
_WIN32
è|| defšed(
_WIN64
)è&& !defšed(
__MINGW32__
)

85 
	#SHA_LONG64
 
__št64


	)

86 
	#U64
(
C
èC##
UI64


	)

87 #–ià
defšed
(
__¬ch64__
)

88 
	#SHA_LONG64
 

	)

89 
	#U64
(
C
èC##
UL


	)

91 
	#SHA_LONG64
 

	)

92 
	#U64
(
C
èC##
ULL


	)

95 
	sSHA512¡©e_¡
 {

96 
SHA_LONG64
 
h
[8];

97 
SHA_LONG64
 
Nl
, 
Nh
;

99 
SHA_LONG64
 
d
[
SHA_LBLOCK
];

100 
p
[
SHA512_CBLOCK
];

101 } 
u
;

102 
num
, 
md_Ën
;

103 } 
	tSHA512_CTX
;

105 
SHA384_In™
(
SHA512_CTX
 *
c
);

106 
SHA384_Upd©e
(
SHA512_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

107 
SHA384_Fš®
(*
md
, 
SHA512_CTX
 *
c
);

108 *
SHA384
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

109 
SHA512_In™
(
SHA512_CTX
 *
c
);

110 
SHA512_Upd©e
(
SHA512_CTX
 *
c
, cÚ¡ *
d©a
, 
size_t
 
Ën
);

111 
SHA512_Fš®
(*
md
, 
SHA512_CTX
 *
c
);

112 *
SHA512
(cÚ¡ *
d
, 
size_t
 
n
, *
md
);

113 
SHA512_T¿nsfÜm
(
SHA512_CTX
 *
c
, cÚ¡ *
d©a
);

115 #ifdeà 
__ýlu¥lus


	@/usr/include/openssl/e_os2.h

10 #iâdeà
HEADER_E_OS2_H


11 
	#HEADER_E_OS2_H


	)

13 
	~<Ý’s¦/Ý’s¦cÚf.h
>

15 #ifdeà 
__ýlu¥lus


25 
	#OPENSSL_SYS_UNIX


	)

33 #ià
defšed
(
OPENSSL_SYS_MSDOS
)

34 #undeà
OPENSSL_SYS_UNIX


45 #ià
defšed
(
OPENSSL_SYS_UEFI
)

46 #undeà
OPENSSL_SYS_UNIX


47 #–ià
defšed
(
OPENSSL_SYS_UWIN
)

48 #undeà
OPENSSL_SYS_UNIX


49 
	#OPENSSL_SYS_WIN32_UWIN


	)

51 #ià
defšed
(
__CYGWIN__
è|| defšed(
OPENSSL_SYS_CYGWIN
)

52 
	#OPENSSL_SYS_WIN32_CYGWIN


	)

54 #ià
defšed
(
_WIN32
è|| defšed(
OPENSSL_SYS_WIN32
)

55 #undeà
OPENSSL_SYS_UNIX


56 #ià!
defšed
(
OPENSSL_SYS_WIN32
)

57 
	#OPENSSL_SYS_WIN32


	)

60 #ià
defšed
(
_WIN64
è|| defšed(
OPENSSL_SYS_WIN64
)

61 #undeà
OPENSSL_SYS_UNIX


62 #ià!
defšed
(
OPENSSL_SYS_WIN64
)

63 
	#OPENSSL_SYS_WIN64


	)

66 #ià
defšed
(
OPENSSL_SYS_WINNT
)

67 #undeà
OPENSSL_SYS_UNIX


69 #ià
defšed
(
OPENSSL_SYS_WINCE
)

70 #undeà
OPENSSL_SYS_UNIX


76 #ià
defšed
(
OPENSSL_SYS_WIN32
è|| defšed(
OPENSSL_SYS_WIN64
è|| defšed(
OPENSSL_SYS_WINNT
è|| defšed(
OPENSSL_SYS_WINCE
)

77 #undeà
OPENSSL_SYS_UNIX


78 
	#OPENSSL_SYS_WINDOWS


	)

79 #iâdeà
OPENSSL_SYS_MSDOS


80 
	#OPENSSL_SYS_MSDOS


	)

89 #ifdeà
OPENSSL_SYS_WINDOWS


90 #iâdeà
OPENSSL_OPT_WINDLL


91 #ià
defšed
(
_WINDLL
)

93 
	#OPENSSL_OPT_WINDLL


	)

99 #ià
defšed
(
__VMS
è|| defšed(
VMS
è|| defšed(
OPENSSL_SYS_VMS
)

100 #ià!
defšed
(
OPENSSL_SYS_VMS
)

101 #undeà
OPENSSL_SYS_UNIX


103 
	#OPENSSL_SYS_VMS


	)

104 #ià
defšed
(
__DECC
)

105 
	#OPENSSL_SYS_VMS_DECC


	)

106 #–ià
defšed
(
__DECCXX
)

107 
	#OPENSSL_SYS_VMS_DECC


	)

108 
	#OPENSSL_SYS_VMS_DECCXX


	)

110 
	#OPENSSL_SYS_VMS_NODECC


	)

115 #ifdeà
OPENSSL_SYS_UNIX


116 #ià
defšed
(
lšux
è|| defšed(
__lšux__
è&& !defšed(
OPENSSL_SYS_LINUX
)

117 
	#OPENSSL_SYS_LINUX


	)

119 #ià
defšed
(
_AIX
è&& !defšed(
OPENSSL_SYS_AIX
)

120 
	#OPENSSL_SYS_AIX


	)

125 #ià
defšed
(
__VOS__
è&& !defšed(
OPENSSL_SYS_VOS
)

126 
	#OPENSSL_SYS_VOS


	)

127 #ifdeà
__HPPA__


128 
	#OPENSSL_SYS_VOS_HPPA


	)

130 #ifdeà
__IA32__


131 
	#OPENSSL_SYS_VOS_IA32


	)

140 #ifdeà
OPENSSL_SYS_MSDOS


141 
	#OPENSSL_UNISTD_IO
 <
io
.
h
>

	)

142 
	#OPENSSL_DECLARE_EXIT
 
	`ex™
();

	)

144 
	#OPENSSL_UNISTD_IO
 
OPENSSL_UNISTD


	)

145 
	#OPENSSL_DECLARE_EXIT


	)

167 #ià
defšed
(
OPENSSL_SYS_WINDOWS
è&& defšed(
OPENSSL_OPT_WINDLL
)

168 
	#OPENSSL_EXPORT
 
	`__deþ¥ec
(
dÎexpÜt
)

	)

169 
	#OPENSSL_EXTERN
 
	`__deþ¥ec
(
dÎimpÜt
)

	)

171 
	#OPENSSL_EXPORT
 

	)

172 
	#OPENSSL_EXTERN
 

	)

186 #ifdeà
OPENSSL_EXPORT_VAR_AS_FUNCTION


187 
	#OPENSSL_IMPLEMENT_GLOBAL
(
ty³
,
Çme
,
v®ue
) \

188 
ty³
 *
_shadow_
##
	`Çme
() \

189 { 
ty³
 
_hide_
##
Çme
=
v®ue
;  &_hide_##Çme; }

	)

190 
	#OPENSSL_DECLARE_GLOBAL
(
ty³
,
Çme
èty³ *
_shadow_
##
	`Çme
()

	)

191 
	#OPENSSL_GLOBAL_REF
(
Çme
è(*(
_shadow_
##
	`Çme
()))

	)

193 
	#OPENSSL_IMPLEMENT_GLOBAL
(
ty³
,
Çme
,
v®ue
èty³ 
_shadow_
##Çme=v®ue;

	)

194 
	#OPENSSL_DECLARE_GLOBAL
(
ty³
,
Çme
è
OPENSSL_EXPORT
y³ 
_shadow_
##
	)
name

195 
	#OPENSSL_GLOBAL_REF
(
Çme
è
_shadow_
##
	)
name

198 #ifdeà
_WIN32


199 #ifdeà
_WIN64


200 
	#os¦_ssize_t
 
__št64


	)

201 
	#OSSL_SSIZE_MAX
 
_I64_MAX


	)

203 
	#os¦_ssize_t
 

	)

204 
	#OSSL_SSIZE_MAX
 
INT_MAX


	)

208 #ià
defšed
(
OPENSSL_SYS_UEFI
è&& !defšed(
os¦_ssize_t
)

209 
	#os¦_ssize_t
 
INTN


	)

210 
	#OSSL_SSIZE_MAX
 
MAX_INTN


	)

213 #iâdeà
os¦_ssize_t


214 
	#os¦_ssize_t
 
ssize_t


	)

215 #ià
defšed
(
SSIZE_MAX
)

216 
	#OSSL_SSIZE_MAX
 
SSIZE_MAX


	)

217 #–ià
defšed
(
_POSIX_SSIZE_MAX
)

218 
	#OSSL_SSIZE_MAX
 
_POSIX_SSIZE_MAX


	)

220 
	#OSSL_SSIZE_MAX
 ((
ssize_t
)(
SIZE_MAX
>>1))

	)

224 #ifdeà
DEBUG_UNUSED


225 
	#__owur
 
	`__©Œibu‹__
((
__w¬n_unu£d_»suÉ__
))

	)

227 
	#__owur


	)

231 #ià
defšed
(
OPENSSL_SYS_UEFI
)

232 
INT8
 
	tšt8_t
;

233 
UINT8
 
	tušt8_t
;

234 
INT16
 
	tšt16_t
;

235 
UINT16
 
	tušt16_t
;

236 
INT32
 
	tšt32_t
;

237 
UINT32
 
	tušt32_t
;

238 
INT64
 
	tšt64_t
;

239 
UINT64
 
	tušt64_t
;

240 #–ià(
defšed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L) || \

241 
defšed
(
__osf__
è|| defšed(
__sgi
è|| defšed(
__hpux
) || \

242 
defšed
(
OPENSSL_SYS_VMS
è|| defšed (
__O³nBSD__
)

243 
	~<š‰y³s.h
>

244 #–ià
defšed
(
_MSC_VER
) && _MSC_VER<=1500

249 sigÃd 
	tšt8_t
;

250 
	tušt8_t
;

251 
	tšt16_t
;

252 
	tušt16_t
;

253 
	tšt32_t
;

254 
	tušt32_t
;

255 
__št64
 
	tšt64_t
;

256 
	t__št64
 
	tušt64_t
;

258 
	~<¡dšt.h
>

262 #ià!
defšed
(
šlše
è&& !defšed(
__ýlu¥lus
)

263 #ià
defšed
(
__STDC_VERSION__
) && __STDC_VERSION__>=199901L

265 
	#os¦_šlše
 
šlše


	)

266 #–ià
defšed
(
__GNUC__
) && __GNUC__>=2

267 
	#os¦_šlše
 
__šlše__


	)

268 #–ià
defšed
(
_MSC_VER
)

274 
	#os¦_šlše
 
__šlše


	)

276 
	#os¦_šlše


	)

279 
	#os¦_šlše
 
šlše


	)

282 #ià
defšed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 201112L

283 
	#os¦_nÜ‘uº
 
_NÜ‘uº


	)

284 #–ià
defšed
(
__GNUC__
) && __GNUC__ >= 2

285 
	#os¦_nÜ‘uº
 
	`__©Œibu‹__
((
nÜ‘uº
))

	)

287 
	#os¦_nÜ‘uº


	)

290 #ifdeà 
__ýlu¥lus


	@/usr/include/openssl/opensslconf.h

13 
	~<Ý’s¦/Ý’s¦v.h
>

15 #ifdeà 
__ýlu¥lus


19 #ifdeà
OPENSSL_ALGORITHM_DEFINES


20 #”rÜ 
OPENSSL_ALGORITHM_DEFINES
 
no
 
lÚg”
 
suµÜ‹d


27 #iâdeà
OPENSSL_NO_MD2


28 
	#OPENSSL_NO_MD2


	)

30 #iâdeà
OPENSSL_NO_RC5


31 
	#OPENSSL_NO_RC5


	)

33 #iâdeà
OPENSSL_THREADS


34 
	#OPENSSL_THREADS


	)

36 #iâdeà
OPENSSL_RAND_SEED_OS


37 
	#OPENSSL_RAND_SEED_OS


	)

39 #iâdeà
OPENSSL_NO_ASAN


40 
	#OPENSSL_NO_ASAN


	)

42 #iâdeà
OPENSSL_NO_CRYPTO_MDEBUG


43 
	#OPENSSL_NO_CRYPTO_MDEBUG


	)

45 #iâdeà
OPENSSL_NO_CRYPTO_MDEBUG_BACKTRACE


46 
	#OPENSSL_NO_CRYPTO_MDEBUG_BACKTRACE


	)

48 #iâdeà
OPENSSL_NO_DEVCRYPTOENG


49 
	#OPENSSL_NO_DEVCRYPTOENG


	)

51 #iâdeà
OPENSSL_NO_EGD


52 
	#OPENSSL_NO_EGD


	)

54 #iâdeà
OPENSSL_NO_EXTERNAL_TESTS


55 
	#OPENSSL_NO_EXTERNAL_TESTS


	)

57 #iâdeà
OPENSSL_NO_FUZZ_AFL


58 
	#OPENSSL_NO_FUZZ_AFL


	)

60 #iâdeà
OPENSSL_NO_FUZZ_LIBFUZZER


61 
	#OPENSSL_NO_FUZZ_LIBFUZZER


	)

63 #iâdeà
OPENSSL_NO_HEARTBEATS


64 
	#OPENSSL_NO_HEARTBEATS


	)

66 #iâdeà
OPENSSL_NO_MSAN


67 
	#OPENSSL_NO_MSAN


	)

69 #iâdeà
OPENSSL_NO_SCTP


70 
	#OPENSSL_NO_SCTP


	)

72 #iâdeà
OPENSSL_NO_SSL_TRACE


73 
	#OPENSSL_NO_SSL_TRACE


	)

75 #iâdeà
OPENSSL_NO_SSL3


76 
	#OPENSSL_NO_SSL3


	)

78 #iâdeà
OPENSSL_NO_SSL3_METHOD


79 
	#OPENSSL_NO_SSL3_METHOD


	)

81 #iâdeà
OPENSSL_NO_UBSAN


82 
	#OPENSSL_NO_UBSAN


	)

84 #iâdeà
OPENSSL_NO_UNIT_TEST


85 
	#OPENSSL_NO_UNIT_TEST


	)

87 #iâdeà
OPENSSL_NO_WEAK_SSL_CIPHERS


88 
	#OPENSSL_NO_WEAK_SSL_CIPHERS


	)

90 #iâdeà
OPENSSL_NO_STATIC_ENGINE


91 
	#OPENSSL_NO_STATIC_ENGINE


	)

99 
	#NON_EMPTY_TRANSLATION_UNIT
 *
dummy
 = &dummy;

	)

107 #iâdeà
DECLARE_DEPRECATED


108 
	#DECLARE_DEPRECATED
(
f
èf;

	)

109 #ifdeà
__GNUC__


110 #ià
__GNUC__
 > 3 || (__GNUC__ =ð3 && 
__GNUC_MINOR__
 > 0)

111 #undeà
DECLARE_DEPRECATED


112 
	#DECLARE_DEPRECATED
(
f
èà
	`__©Œibu‹__
 ((
d•»ÿ‹d
));

	)

117 #iâdeà
OPENSSL_FILE


118 #ifdeà
OPENSSL_NO_FILENAMES


119 
	#OPENSSL_FILE
 ""

	)

120 
	#OPENSSL_LINE
 0

	)

122 
	#OPENSSL_FILE
 
__FILE__


	)

123 
	#OPENSSL_LINE
 
__LINE__


	)

127 #iâdeà
OPENSSL_MIN_API


128 
	#OPENSSL_MIN_API
 0

	)

131 #ià!
defšed
(
OPENSSL_API_COMPAT
è|| OPENSSL_API_COMPAT < 
OPENSSL_MIN_API


132 #undeà
OPENSSL_API_COMPAT


133 
	#OPENSSL_API_COMPAT
 
OPENSSL_MIN_API


	)

140 #ià
OPENSSL_VERSION_NUMBER
 < 0x10200000L

141 
	#DEPRECATEDIN_1_2_0
(
f
èf;

	)

142 #–ià
OPENSSL_API_COMPAT
 < 0x10200000L

143 
	#DEPRECATEDIN_1_2_0
(
f
è
	`DECLARE_DEPRECATED
(f)

	)

145 
	#DEPRECATEDIN_1_2_0
(
f
)

	)

148 #ià
OPENSSL_API_COMPAT
 < 0x10100000L

149 
	#DEPRECATEDIN_1_1_0
(
f
è
	`DECLARE_DEPRECATED
(f)

	)

151 
	#DEPRECATEDIN_1_1_0
(
f
)

	)

154 #ià
OPENSSL_API_COMPAT
 < 0x10000000L

155 
	#DEPRECATEDIN_1_0_0
(
f
è
	`DECLARE_DEPRECATED
(f)

	)

157 
	#DEPRECATEDIN_1_0_0
(
f
)

	)

160 #ià
OPENSSL_API_COMPAT
 < 0x00908000L

161 
	#DEPRECATEDIN_0_9_8
(
f
è
	`DECLARE_DEPRECATED
(f)

	)

163 
	#DEPRECATEDIN_0_9_8
(
f
)

	)

167 #undeà
I386_ONLY


169 #undeà
OPENSSL_UNISTD


170 
	#OPENSSL_UNISTD
 <
uni¡d
.
h
>

	)

172 #undeà
OPENSSL_EXPORT_VAR_AS_FUNCTION


177 #ià!
defšed
(
OPENSSL_SYS_UEFI
)

178 #undeà
BN_LLONG


180 
	#SIXTY_FOUR_BIT_LONG


	)

181 #undeà
SIXTY_FOUR_BIT


182 #undeà
THIRTY_TWO_BIT


185 
	#RC4_INT
 

	)

187 #ifdeà 
__ýlu¥lus


	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ýlu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

43 #ià
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Î"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #ià
__WORDSIZE
 == 64

273 
	mquÙ
;

274 
	m»m
;

275 } 
	timaxdiv_t
;

282 
__ex‹nsiÚ__
 
	mquÙ
;

283 
__ex‹nsiÚ__
 
	m»m
;

284 } 
	timaxdiv_t
;

290 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

294 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

297 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

298 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

301 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

302 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

305 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

306 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

307 
__THROW
;

310 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

311 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

312 
__THROW
;

314 #ifdeà
__USE_EXTERN_INLINES


316 #ià
__WORDSIZE
 == 64

318 
	$__¡¹Þ_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

319 **
__»¡riù
 
__’d±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

323 
__ex‹º_šlše
 
štmax_t


324 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

325 
ba£
))

327  
	`__¡¹Þ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

328 
	}
}

330 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 ** 
__»¡riù
 
__’d±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

335 
__ex‹º_šlše
 
uštmax_t


336 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

337 
ba£
))

339  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc¡Þ_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

343 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

347 
__ex‹º_šlše
 
štmax_t


348 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

349 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

351  
	`__wc¡Þ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

355 
__»¡riù
 
__ÅŒ
,

356 
__gwch¬_t
 **

357 
__»¡riù
 
__’d±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

361 
__ex‹º_šlše
 
uštmax_t


362 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

363 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

365  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

366 
	}
}

370 
__ex‹nsiÚ__


371 
	$__¡¹Þl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

372 **
__»¡riù
 
__’d±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

376 
__ex‹º_šlše
 
štmax_t


377 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

378 
ba£
))

380  
	`__¡¹Þl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

381 
	}
}

383 
__ex‹nsiÚ__


384 
	$__¡¹ouÎ_š‹º®
 (const *

385 
__»¡riù
 
__ÅŒ
,

387 
__»¡riù
 
__’d±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

392 
__ex‹º_šlše
 
uštmax_t


393 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

394 
ba£
))

396  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

397 
	}
}

399 
__ex‹nsiÚ__


400 
	$__wc¡Þl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

401 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

405 
__ex‹º_šlše
 
štmax_t


406 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

407 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

409  
	`__wc¡Þl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

410 
	}
}

413 
__ex‹nsiÚ__


414 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

415 
__»¡riù
 
__ÅŒ
,

416 
__gwch¬_t
 **

417 
__»¡riù
 
__’d±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

422 
__ex‹º_šlše
 
uštmax_t


423 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

424 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

426  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/openssl/opensslv.h

10 #iâdeà
HEADER_OPENSSLV_H


11 
	#HEADER_OPENSSLV_H


	)

13 #ifdeà 
__ýlu¥lus


42 
	#OPENSSL_VERSION_NUMBER
 0x1010100fL

	)

43 
	#OPENSSL_VERSION_TEXT
 "O³nSSL 1.1.1 11 S• 2018"

	)

94 
	#SHLIB_VERSION_HISTORY
 ""

	)

95 
	#SHLIB_VERSION_NUMBER
 "1.1"

	)

98 #ifdeà 
__ýlu¥lus


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wch¬.h
>

29 
	~<b™s/wÜdsize.h
>

34 
	~<b™s/¡dšt-šŠ.h
>

37 
	~<b™s/¡dšt-ušŠ.h
>

43 
__št_Ëa¡8_t
 
	tšt_Ëa¡8_t
;

44 
__št_Ëa¡16_t
 
	tšt_Ëa¡16_t
;

45 
__št_Ëa¡32_t
 
	tšt_Ëa¡32_t
;

46 
__št_Ëa¡64_t
 
	tšt_Ëa¡64_t
;

49 
__ušt_Ëa¡8_t
 
	tušt_Ëa¡8_t
;

50 
__ušt_Ëa¡16_t
 
	tušt_Ëa¡16_t
;

51 
__ušt_Ëa¡32_t
 
	tušt_Ëa¡32_t
;

52 
__ušt_Ëa¡64_t
 
	tušt_Ëa¡64_t
;

58 sigÃd 
	tšt_ç¡8_t
;

59 #ià
__WORDSIZE
 == 64

60 
	tšt_ç¡16_t
;

61 
	tšt_ç¡32_t
;

62 
	tšt_ç¡64_t
;

64 
	tšt_ç¡16_t
;

65 
	tšt_ç¡32_t
;

66 
__ex‹nsiÚ__


67 
	tšt_ç¡64_t
;

71 
	tušt_ç¡8_t
;

72 #ià
__WORDSIZE
 == 64

73 
	tušt_ç¡16_t
;

74 
	tušt_ç¡32_t
;

75 
	tušt_ç¡64_t
;

77 
	tušt_ç¡16_t
;

78 
	tušt_ç¡32_t
;

79 
__ex‹nsiÚ__


80 
	tušt_ç¡64_t
;

85 #ià
__WORDSIZE
 == 64

86 #iâdeà
__šŒ_t_defšed


87 
	tšŒ_t
;

88 
	#__šŒ_t_defšed


	)

90 
	tušŒ_t
;

92 #iâdeà
__šŒ_t_defšed


93 
	tšŒ_t
;

94 
	#__šŒ_t_defšed


	)

96 
	tušŒ_t
;

101 
__štmax_t
 
	tštmax_t
;

102 
__uštmax_t
 
	tuštmax_t
;

105 #ià
__WORDSIZE
 == 64

106 
	#__INT64_C
(
c
èø## 
L


	)

107 
	#__UINT64_C
(
c
èø## 
UL


	)

109 
	#__INT64_C
(
c
èø## 
LL


	)

110 
	#__UINT64_C
(
c
èø## 
ULL


	)

116 
	#INT8_MIN
 (-128)

	)

117 
	#INT16_MIN
 (-32767-1)

	)

118 
	#INT32_MIN
 (-2147483647-1)

	)

119 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

121 
	#INT8_MAX
 (127)

	)

122 
	#INT16_MAX
 (32767)

	)

123 
	#INT32_MAX
 (2147483647)

	)

124 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

127 
	#UINT8_MAX
 (255)

	)

128 
	#UINT16_MAX
 (65535)

	)

129 
	#UINT32_MAX
 (4294967295U)

	)

130 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

134 
	#INT_LEAST8_MIN
 (-128)

	)

135 
	#INT_LEAST16_MIN
 (-32767-1)

	)

136 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

137 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

139 
	#INT_LEAST8_MAX
 (127)

	)

140 
	#INT_LEAST16_MAX
 (32767)

	)

141 
	#INT_LEAST32_MAX
 (2147483647)

	)

142 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

145 
	#UINT_LEAST8_MAX
 (255)

	)

146 
	#UINT_LEAST16_MAX
 (65535)

	)

147 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

148 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

152 
	#INT_FAST8_MIN
 (-128)

	)

153 #ià
__WORDSIZE
 == 64

154 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

155 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

157 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

158 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

160 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

162 
	#INT_FAST8_MAX
 (127)

	)

163 #ià
__WORDSIZE
 == 64

164 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

165 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

167 
	#INT_FAST16_MAX
 (2147483647)

	)

168 
	#INT_FAST32_MAX
 (2147483647)

	)

170 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

173 
	#UINT_FAST8_MAX
 (255)

	)

174 #ià
__WORDSIZE
 == 64

175 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

176 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

178 
	#UINT_FAST16_MAX
 (4294967295U)

	)

179 
	#UINT_FAST32_MAX
 (4294967295U)

	)

181 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

185 #ià
__WORDSIZE
 == 64

186 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

187 
	#INTPTR_MAX
 (9223372036854775807L)

	)

188 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

190 
	#INTPTR_MIN
 (-2147483647-1)

	)

191 
	#INTPTR_MAX
 (2147483647)

	)

192 
	#UINTPTR_MAX
 (4294967295U)

	)

197 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

199 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

202 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

208 #ià
__WORDSIZE
 == 64

209 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

210 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

212 #ià
__WORDSIZE32_PTRDIFF_LONG


213 
	#PTRDIFF_MIN
 (-2147483647L-1)

	)

214 
	#PTRDIFF_MAX
 (2147483647L)

	)

216 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

217 
	#PTRDIFF_MAX
 (2147483647)

	)

222 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

223 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

226 #ià
__WORDSIZE
 == 64

227 
	#SIZE_MAX
 (18446744073709551615UL)

	)

229 #ià
__WORDSIZE32_SIZE_ULONG


230 
	#SIZE_MAX
 (4294967295UL)

	)

232 
	#SIZE_MAX
 (4294967295U)

	)

237 #iâdeà
WCHAR_MIN


239 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

240 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

244 
	#WINT_MIN
 (0u)

	)

245 
	#WINT_MAX
 (4294967295u)

	)

248 
	#INT8_C
(
c
è
	)
c

249 
	#INT16_C
(
c
è
	)
c

250 
	#INT32_C
(
c
è
	)
c

251 #ià
__WORDSIZE
 == 64

252 
	#INT64_C
(
c
èø## 
L


	)

254 
	#INT64_C
(
c
èø## 
LL


	)

258 
	#UINT8_C
(
c
è
	)
c

259 
	#UINT16_C
(
c
è
	)
c

260 
	#UINT32_C
(
c
èø## 
U


	)

261 #ià
__WORDSIZE
 == 64

262 
	#UINT64_C
(
c
èø## 
UL


	)

264 
	#UINT64_C
(
c
èø## 
ULL


	)

268 #ià
__WORDSIZE
 == 64

269 
	#INTMAX_C
(
c
èø## 
L


	)

270 
	#UINTMAX_C
(
c
èø## 
UL


	)

272 
	#INTMAX_C
(
c
èø## 
LL


	)

273 
	#UINTMAX_C
(
c
èø## 
ULL


	)

276 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT
)

278 
	#INT8_WIDTH
 8

	)

279 
	#UINT8_WIDTH
 8

	)

280 
	#INT16_WIDTH
 16

	)

281 
	#UINT16_WIDTH
 16

	)

282 
	#INT32_WIDTH
 32

	)

283 
	#UINT32_WIDTH
 32

	)

284 
	#INT64_WIDTH
 64

	)

285 
	#UINT64_WIDTH
 64

	)

287 
	#INT_LEAST8_WIDTH
 8

	)

288 
	#UINT_LEAST8_WIDTH
 8

	)

289 
	#INT_LEAST16_WIDTH
 16

	)

290 
	#UINT_LEAST16_WIDTH
 16

	)

291 
	#INT_LEAST32_WIDTH
 32

	)

292 
	#UINT_LEAST32_WIDTH
 32

	)

293 
	#INT_LEAST64_WIDTH
 64

	)

294 
	#UINT_LEAST64_WIDTH
 64

	)

296 
	#INT_FAST8_WIDTH
 8

	)

297 
	#UINT_FAST8_WIDTH
 8

	)

298 
	#INT_FAST16_WIDTH
 
__WORDSIZE


	)

299 
	#UINT_FAST16_WIDTH
 
__WORDSIZE


	)

300 
	#INT_FAST32_WIDTH
 
__WORDSIZE


	)

301 
	#UINT_FAST32_WIDTH
 
__WORDSIZE


	)

302 
	#INT_FAST64_WIDTH
 64

	)

303 
	#UINT_FAST64_WIDTH
 64

	)

305 
	#INTPTR_WIDTH
 
__WORDSIZE


	)

306 
	#UINTPTR_WIDTH
 
__WORDSIZE


	)

308 
	#INTMAX_WIDTH
 64

	)

309 
	#UINTMAX_WIDTH
 64

	)

311 
	#PTRDIFF_WIDTH
 
__WORDSIZE


	)

312 
	#SIG_ATOMIC_WIDTH
 32

	)

313 
	#SIZE_WIDTH
 
__WORDSIZE


	)

314 
	#WCHAR_WIDTH
 32

	)

315 
	#WINT_WIDTH
 32

	)

	@/usr/include/bits/libc-header-start.h

27 #iâdeà
__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


31 #undeà
__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


33 
	~<ã©u»s.h
>

37 #undeà
__GLIBC_USE_LIB_EXT2


38 #ià(
defšed
 
__USE_GNU
 \

39 || (
defšed
 
	g__STDC_WANT_LIB_EXT2__
 && __STDC_WANT_LIB_EXT2__ > 0))

40 
	#__GLIBC_USE_LIB_EXT2
 1

	)

42 
	#__GLIBC_USE_LIB_EXT2
 0

	)

47 #undeà
__GLIBC_USE_IEC_60559_BFP_EXT


48 #ià
defšed
 
__USE_GNU
 || defšed 
__STDC_WANT_IEC_60559_BFP_EXT__


49 
	#__GLIBC_USE_IEC_60559_BFP_EXT
 1

	)

51 
	#__GLIBC_USE_IEC_60559_BFP_EXT
 0

	)

56 #undeà
__GLIBC_USE_IEC_60559_FUNCS_EXT


57 #ià
defšed
 
__USE_GNU
 || defšed 
__STDC_WANT_IEC_60559_FUNCS_EXT__


58 
	#__GLIBC_USE_IEC_60559_FUNCS_EXT
 1

	)

60 
	#__GLIBC_USE_IEC_60559_FUNCS_EXT
 0

	)

65 #undeà
__GLIBC_USE_IEC_60559_TYPES_EXT


66 #ià
defšed
 
__USE_GNU
 || defšed 
__STDC_WANT_IEC_60559_TYPES_EXT__


67 
	#__GLIBC_USE_IEC_60559_TYPES_EXT
 1

	)

69 
	#__GLIBC_USE_IEC_60559_TYPES_EXT
 0

	)

	@/usr/include/bits/stdint-intn.h

19 #iâdeà
_BITS_STDINT_INTN_H


20 
	#_BITS_STDINT_INTN_H
 1

	)

22 
	~<b™s/ty³s.h
>

24 
__št8_t
 
	tšt8_t
;

25 
__št16_t
 
	tšt16_t
;

26 
__št32_t
 
	tšt32_t
;

27 
__št64_t
 
	tšt64_t
;

	@/usr/include/bits/stdint-uintn.h

19 #iâdeà
_BITS_STDINT_UINTN_H


20 
	#_BITS_STDINT_UINTN_H
 1

	)

22 
	~<b™s/ty³s.h
>

24 
__ušt8_t
 
	tušt8_t
;

25 
__ušt16_t
 
	tušt16_t
;

26 
__ušt32_t
 
	tušt32_t
;

27 
__ušt64_t
 
	tušt64_t
;

	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 
__št8_t
 
	t__št_Ëa¡8_t
;

52 
__ušt8_t
 
	t__ušt_Ëa¡8_t
;

53 
__št16_t
 
	t__št_Ëa¡16_t
;

54 
__ušt16_t
 
	t__ušt_Ëa¡16_t
;

55 
__št32_t
 
	t__št_Ëa¡32_t
;

56 
__ušt32_t
 
	t__ušt_Ëa¡32_t
;

57 
__št64_t
 
	t__št_Ëa¡64_t
;

58 
__ušt64_t
 
	t__ušt_Ëa¡64_t
;

61 #ià
__WORDSIZE
 == 64

62 
	t__quad_t
;

63 
	t__u_quad_t
;

65 
__ex‹nsiÚ__
 
	t__quad_t
;

66 
__ex‹nsiÚ__
 
	t__u_quad_t
;

70 #ià
__WORDSIZE
 == 64

71 
	t__štmax_t
;

72 
	t__uštmax_t
;

74 
__ex‹nsiÚ__
 
	t__štmax_t
;

75 
__ex‹nsiÚ__
 
	t__uštmax_t
;

108 
	#__S16_TYPE
 

	)

109 
	#__U16_TYPE
 

	)

110 
	#__S32_TYPE
 

	)

111 
	#__U32_TYPE
 

	)

112 
	#__SLONGWORD_TYPE
 

	)

113 
	#__ULONGWORD_TYPE
 

	)

114 #ià
__WORDSIZE
 == 32

115 
	#__SQUAD_TYPE
 
__quad_t


	)

116 
	#__UQUAD_TYPE
 
__u_quad_t


	)

117 
	#__SWORD_TYPE
 

	)

118 
	#__UWORD_TYPE
 

	)

119 
	#__SLONG32_TYPE
 

	)

120 
	#__ULONG32_TYPE
 

	)

121 
	#__S64_TYPE
 
__quad_t


	)

122 
	#__U64_TYPE
 
__u_quad_t


	)

125 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

126 #–ià
__WORDSIZE
 == 64

127 
	t__SQUAD_TYPE
 

	)

128 
	t__UQUAD_TYPE
 

	)

129 
	t__SWORD_TYPE
 

	)

130 
	t__UWORD_TYPE
 

	)

131 
	t__SLONG32_TYPE
 

	)

132 
	t__ULONG32_TYPE
 

	)

133 
	t__S64_TYPE
 

	)

134 
	t__U64_TYPE
 

	)

136 
	t__STD_TYPE
 

	)

140 
	~<b™s/ty³sizes.h
>

143 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

144 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

145 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

146 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

147 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

148 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

149 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

150 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

151 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

152 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

153 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

154 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__þock_t
;

155 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

156 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

157 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

158 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

159 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

160 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

162 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

163 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

166 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__þockid_t
;

169 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

172 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

177 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

178 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

181 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

182 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

185 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfžút_t
;

186 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfžút64_t
;

189 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

191 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

194 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

196 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

200 
__off64_t
 
	t__loff_t
;

201 *
	t__ÿddr_t
;

204 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

207 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

212 
	t__sig_©omic_t
;

214 #undeà
__STD_TYPE


	@/usr/include/bits/wchar.h

19 #iâdeà
_BITS_WCHAR_H


20 
	#_BITS_WCHAR_H
 1

	)

33 #ifdeà
__WCHAR_MAX__


34 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

35 #–ià
L
'\0' - 1 > 0

36 
	#__WCHAR_MAX
 (0xffffffffu + 
L
'\0')

	)

38 
	#__WCHAR_MAX
 (0x7ffffffà+ 
L
'\0')

	)

41 #ifdeà
__WCHAR_MIN__


42 
	#__WCHAR_MIN
 
__WCHAR_MIN__


	)

43 #–ià
L
'\0' - 1 > 0

44 
	#__WCHAR_MIN
 (
L
'\0' + 0)

	)

46 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

7 
	#__WORDSIZE32_SIZE_ULONG
 0

	)

8 
	#__WORDSIZE32_PTRDIFF_LONG
 0

	)

11 #ifdeà
__x86_64__


12 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

14 
	#__SYSCALL_WORDSIZE
 64

	)

16 
	#__WORDSIZE_TIME64_COMPAT32
 0

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

119 #undeà
__USE_ISOC11


120 #undeà
__USE_ISOC99


121 #undeà
__USE_ISOC95


122 #undeà
__USE_ISOCXX11


123 #undeà
__USE_POSIX


124 #undeà
__USE_POSIX2


125 #undeà
__USE_POSIX199309


126 #undeà
__USE_POSIX199506


127 #undeà
__USE_XOPEN


128 #undeà
__USE_XOPEN_EXTENDED


129 #undeà
__USE_UNIX98


130 #undeà
__USE_XOPEN2K


131 #undeà
__USE_XOPEN2KXSI


132 #undeà
__USE_XOPEN2K8


133 #undeà
__USE_XOPEN2K8XSI


134 #undeà
__USE_LARGEFILE


135 #undeà
__USE_LARGEFILE64


136 #undeà
__USE_FILE_OFFSET64


137 #undeà
__USE_MISC


138 #undeà
__USE_ATFILE


139 #undeà
__USE_GNU


140 #undeà
__USE_FORTIFY_LEVEL


141 #undeà
__KERNEL_STRICT_NAMES


142 #undeà
__GLIBC_USE_DEPRECATED_GETS


146 #iâdeà
_LOOSE_KERNEL_NAMES


147 
	#__KERNEL_STRICT_NAMES


	)

157 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


158 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

159 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ð((
maj
è<< 16è+ (
mš
))

	)

161 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

168 #ià
defšed
 
__þªg_majÜ__
 && defšed 
__þªg_mšÜ__


169 
	#__glibc_þªg_´”eq
(
maj
, 
mš
) \

170 ((
__þªg_majÜ__
 << 16è+ 
__þªg_mšÜ__
 >ð((
maj
è<< 16è+ (
mš
))

	)

172 
	#__glibc_þªg_´”eq
(
maj
, 
mš
è0

	)

176 
	#__GLIBC_USE
(
F
è
__GLIBC_USE_
 ## 
	)
F

182 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

183 && !
defšed
 
	g_DEFAULT_SOURCE


185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

190 #ifdeà
_GNU_SOURCE


191 #undeà
_ISOC95_SOURCE


192 
	#_ISOC95_SOURCE
 1

	)

193 #undeà
_ISOC99_SOURCE


194 
	#_ISOC99_SOURCE
 1

	)

195 #undeà
_ISOC11_SOURCE


196 
	#_ISOC11_SOURCE
 1

	)

197 #undeà
_POSIX_SOURCE


198 
	#_POSIX_SOURCE
 1

	)

199 #undeà
_POSIX_C_SOURCE


200 
	#_POSIX_C_SOURCE
 200809L

	)

201 #undeà
_XOPEN_SOURCE


202 
	#_XOPEN_SOURCE
 700

	)

203 #undeà
_XOPEN_SOURCE_EXTENDED


204 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

205 #undeà
_LARGEFILE64_SOURCE


206 
	#_LARGEFILE64_SOURCE
 1

	)

207 #undeà
_DEFAULT_SOURCE


208 
	#_DEFAULT_SOURCE
 1

	)

209 #undeà
_ATFILE_SOURCE


210 
	#_ATFILE_SOURCE
 1

	)

215 #ià(
defšed
 
_DEFAULT_SOURCE
 \

216 || (!
defšed
 
	g__STRICT_ANSI__
 \

217 && !
defšed
 
	g_ISOC99_SOURCE
 && !defšed 
	g_ISOC11_SOURCE
 \

218 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

219 && !
defšed
 
	g_XOPEN_SOURCE
))

220 #undeà
_DEFAULT_SOURCE


221 
	#_DEFAULT_SOURCE
 1

	)

225 #ià(
defšed
 
_ISOC11_SOURCE
 \

226 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

227 
	#__USE_ISOC11
 1

	)

231 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

232 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

233 
	#__USE_ISOC99
 1

	)

237 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

238 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

239 
	#__USE_ISOC95
 1

	)

242 #ifdeà
__ýlu¥lus


244 #ià
__ýlu¥lus
 >= 201703L

245 
	#__USE_ISOC11
 1

	)

249 #ià
__ýlu¥lus
 >ð201103L || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__


250 
	#__USE_ISOCXX11
 1

	)

251 
	#__USE_ISOC99
 1

	)

258 #ifdeà
_DEFAULT_SOURCE


259 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


260 
	#__USE_POSIX_IMPLICITLY
 1

	)

262 #undeà
_POSIX_SOURCE


263 
	#_POSIX_SOURCE
 1

	)

264 #undeà
_POSIX_C_SOURCE


265 
	#_POSIX_C_SOURCE
 200809L

	)

268 #ià((!
defšed
 
__STRICT_ANSI__
 \

269 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

270 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

271 
	#_POSIX_SOURCE
 1

	)

272 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

273 
	#_POSIX_C_SOURCE
 2

	)

274 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

275 
	#_POSIX_C_SOURCE
 199506L

	)

276 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

277 
	#_POSIX_C_SOURCE
 200112L

	)

279 
	#_POSIX_C_SOURCE
 200809L

	)

281 
	#__USE_POSIX_IMPLICITLY
 1

	)

290 #ià((!
defšed
 
_POSIX_C_SOURCE
 || (_POSIX_C_SOURCE - 0) < 199506L) \

291 && (
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE
))

292 
	#_POSIX_SOURCE
 1

	)

293 #undeà
_POSIX_C_SOURCE


294 
	#_POSIX_C_SOURCE
 199506L

	)

297 #ià(
defšed
 
_POSIX_SOURCE
 \

298 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

299 || 
defšed
 
_XOPEN_SOURCE
)

300 
	#__USE_POSIX
 1

	)

303 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ð2 || defšed 
_XOPEN_SOURCE


304 
	#__USE_POSIX2
 1

	)

307 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

308 
	#__USE_POSIX199309
 1

	)

311 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

312 
	#__USE_POSIX199506
 1

	)

315 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

316 
	#__USE_XOPEN2K
 1

	)

317 #undeà
__USE_ISOC95


318 
	#__USE_ISOC95
 1

	)

319 #undeà
__USE_ISOC99


320 
	#__USE_ISOC99
 1

	)

323 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

324 
	#__USE_XOPEN2K8
 1

	)

325 #undeà
_ATFILE_SOURCE


326 
	#_ATFILE_SOURCE
 1

	)

329 #ifdef 
_XOPEN_SOURCE


330 
	#__USE_XOPEN
 1

	)

331 #ià(
_XOPEN_SOURCE
 - 0) >= 500

332 
	#__USE_XOPEN_EXTENDED
 1

	)

333 
	#__USE_UNIX98
 1

	)

334 #undeà
_LARGEFILE_SOURCE


335 
	#_LARGEFILE_SOURCE
 1

	)

336 #ià(
_XOPEN_SOURCE
 - 0) >= 600

337 #ià(
_XOPEN_SOURCE
 - 0) >= 700

338 
	#__USE_XOPEN2K8
 1

	)

339 
	#__USE_XOPEN2K8XSI
 1

	)

341 
	#__USE_XOPEN2K
 1

	)

342 
	#__USE_XOPEN2KXSI
 1

	)

343 #undeà
__USE_ISOC95


344 
	#__USE_ISOC95
 1

	)

345 #undeà
__USE_ISOC99


346 
	#__USE_ISOC99
 1

	)

349 #ifdeà
_XOPEN_SOURCE_EXTENDED


350 
	#__USE_XOPEN_EXTENDED
 1

	)

355 #ifdeà
_LARGEFILE_SOURCE


356 
	#__USE_LARGEFILE
 1

	)

359 #ifdeà
_LARGEFILE64_SOURCE


360 
	#__USE_LARGEFILE64
 1

	)

363 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

364 
	#__USE_FILE_OFFSET64
 1

	)

367 #ià
defšed
 
_DEFAULT_SOURCE


368 
	#__USE_MISC
 1

	)

371 #ifdef 
_ATFILE_SOURCE


372 
	#__USE_ATFILE
 1

	)

375 #ifdef 
_GNU_SOURCE


376 
	#__USE_GNU
 1

	)

379 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0

380 #ià!
defšed
 
__OPTIMIZE__
 || __OPTIMIZE__ <= 0

381 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
compžšg
 
w™h
 
Ýtimiz©iÚ
 (-
O
)

382 #–ià!
__GNUC_PREREQ
 (4, 1)

383 #w¬nšg 
_FORTIFY_SOURCE
 
»quœes
 
GCC
 4.1 
Ü
 
Ï‹r


384 #–ià
_FORTIFY_SOURCE
 > 1

385 
	#__USE_FORTIFY_LEVEL
 2

	)

387 
	#__USE_FORTIFY_LEVEL
 1

	)

390 #iâdeà
__USE_FORTIFY_LEVEL


391 
	#__USE_FORTIFY_LEVEL
 0

	)

398 #ià
defšed
 
__ýlu¥lus
 ? __ýlu¥lu >ð201402L : defšed 
__USE_ISOC11


399 
	#__GLIBC_USE_DEPRECATED_GETS
 0

	)

401 
	#__GLIBC_USE_DEPRECATED_GETS
 1

	)

406 
	~<¡dc-´edef.h
>

414 #undeà
__GNU_LIBRARY__


415 
	#__GNU_LIBRARY__
 6

	)

419 
	#__GLIBC__
 2

	)

420 
	#__GLIBC_MINOR__
 28

	)

422 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

423 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ð((
maj
è<< 16è+ (
mš
))

	)

426 #iâdeà
__ASSEMBLER__


427 #iâdeà
_SYS_CDEFS_H


428 
	~<sys/cdefs.h
>

433 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


434 
	#__USE_LARGEFILE
 1

	)

435 
	#__USE_LARGEFILE64
 1

	)

441 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

442 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

443 && 
defšed
 
	g__ex‹º_šlše


444 
	#__USE_EXTERN_INLINES
 1

	)

452 
	~<gnu/¡ubs.h
>

	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

74 
	#__CPU_MASK_TYPE
 
__SYSCALL_ULONG_TYPE


	)

76 #ifdeà
__x86_64__


80 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

83 
	#__INO_T_MATCHES_INO64_T
 1

	)

86 
	#__RLIM_T_MATCHES_RLIM64_T
 1

	)

88 
	#__RLIM_T_MATCHES_RLIM64_T
 0

	)

92 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

58 
	#__STDC_ISO_10646__
 201706L

	)

	@/usr/include/sys/cdefs.h

18 #iâdef 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #iâdeà
_FEATURES_H


23 
	~<ã©u»s.h
>

29 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


34 #undeà
__P


35 #undeà
__PMT


37 #ifdeà
__GNUC__


41 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


42 
	#__LEAF
 , 
__Ëaf__


	)

43 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #ià!
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

57 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

58 
	#__NTHNL
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

60 #ià
defšed
 
__ýlu¥lus
 && 
__GNUC_PREREQ
 (2,8)

61 
	#__THROW
 
	`throw
 ()

	)

62 
	#__THROWNL
 
	`throw
 ()

	)

63 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

64 
	#__NTHNL
(
fù
èfù 
	`throw
 ()

	)

66 
	#__THROW


	)

67 
	#__THROWNL


	)

68 
	#__NTH
(
fù
è
	)
fct

69 
	#__NTHNL
(
fù
è
	)
fct

75 #ià(
defšed
 
__ýlu¥lus
 \

76 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

77 
	#__šlše
 
šlše


	)

79 
	#__šlše


	)

82 
	#__THROW


	)

83 
	#__THROWNL


	)

84 
	#__NTH
(
fù
è
	)
fct

91 #ià
defšed
 
__þªg__
 && defšed 
__has_ex‹nsiÚ


92 
	#__glibc_þªg_has_ex‹nsiÚ
(
ext
è
	`__has_ex‹nsiÚ
 (ext)

	)

94 
	#__glibc_þªg_has_ex‹nsiÚ
(
ext
è0

	)

99 
	#__P
(
¬gs
è
	)
args

100 
	#__PMT
(
¬gs
è
	)
args

105 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

106 
	#__STRING
(
x
è#x

	)

109 
	#__±r_t
 *

	)

113 #ifdef 
__ýlu¥lus


114 
	#__BEGIN_DECLS
 "C" {

	)

115 
	#__END_DECLS
 }

	)

117 
	#__BEGIN_DECLS


	)

118 
	#__END_DECLS


	)

123 
	#__bos
(
±r
è
	`__bužtš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

124 
	#__bos0
(
±r
è
	`__bužtš_objeù_size
 (±r, 0)

	)

126 #ià
__GNUC_PREREQ
 (4,3)

127 
	#__w¬ndeþ
(
Çme
, 
msg
) \

128 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

129 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

130 
	#__”rÜdeþ
(
Çme
, 
msg
) \

131 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

133 
	#__w¬ndeþ
(
Çme
, 
msg
è
	`Çme
 ()

	)

134 
	#__w¬Ç‰r
(
msg
)

	)

135 
	#__”rÜdeþ
(
Çme
, 
msg
è
	`Çme
 ()

	)

142 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

143 
	#__æex¬r
 []

	)

144 
	#__glibc_c99_æex¬r_avažabË
 1

	)

145 #–ià
__GNUC_PREREQ
 (2,97)

148 
	#__æex¬r
 []

	)

149 
	#__glibc_c99_æex¬r_avažabË
 1

	)

150 #–ià
defšed
 
__GNUC__


153 
	#__æex¬r
 [0]

	)

154 
	#__glibc_c99_æex¬r_avažabË
 1

	)

157 
	#__æex¬r
 [1]

	)

158 
	#__glibc_c99_æex¬r_avažabË
 0

	)

172 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

174 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

175 #ifdeà
__ýlu¥lus


176 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

177 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

179 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

181 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

182 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

183 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

184 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

186 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

187 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

200 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

201 
	#__©Œibu‹__
(
xyz
è

	)

207 #ià
__GNUC_PREREQ
 (2,96)

208 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

210 
	#__©Œibu‹_m®loc__


	)

215 #ià
__GNUC_PREREQ
 (4, 3)

216 
	#__©Œibu‹_®loc_size__
(
·¿ms
) \

217 
	`__©Œibu‹__
 ((
__®loc_size__
 
·¿ms
))

	)

219 
	#__©Œibu‹_®loc_size__
(
·¿ms
è

	)

225 #ià
__GNUC_PREREQ
 (2,96)

226 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

228 
	#__©Œibu‹_pu»__


	)

232 #ià
__GNUC_PREREQ
 (2,5)

233 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

235 
	#__©Œibu‹_cÚ¡__


	)

241 #ià
__GNUC_PREREQ
 (3,1)

242 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

243 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

246 
	#__©Œibu‹_nošlše__


	)

250 #ià
__GNUC_PREREQ
 (3,2)

251 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

253 
	#__©Œibu‹_d•»ÿ‹d__


	)

259 #ià
__GNUC_PREREQ
 (4,5) || \

260 
	$__glibc_þªg_has_ex‹nsiÚ
 (
__©Œibu‹_d•»ÿ‹d_w™h_mes§ge__
)

261 
	#__©Œibu‹_d•»ÿ‹d_msg__
(
msg
) \

262 
	`__©Œibu‹__
 ((
	`__d•»ÿ‹d__
 (
msg
)))

	)

264 
	#__©Œibu‹_d•»ÿ‹d_msg__
(
msg
è
__©Œibu‹_d•»ÿ‹d__


	)

273 #ià
	`__GNUC_PREREQ
 (2,8)

274 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

276 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

283 #ià
	`__GNUC_PREREQ
 (2,97)

284 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

285 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

287 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

292 #ià
	`__GNUC_PREREQ
 (3,3)

293 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

295 
	#__nÚnuÎ
(
·¿ms
)

	)

300 #ià
	`__GNUC_PREREQ
 (3,4)

301 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

302 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

303 #ià
__USE_FORTIFY_LEVEL
 > 0

304 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

307 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

309 #iâdeà
__wur


310 
	#__wur


	)

314 #ià
	`__GNUC_PREREQ
 (3,2)

318 #undeà
__®ways_šlše


319 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

321 #undeà
__®ways_šlše


322 
	#__®ways_šlše
 
__šlše


	)

327 #ià
	`__GNUC_PREREQ
 (4,3)

328 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

330 
	#__©Œibu‹_¬tificŸl__


	)

342 #ià(!
defšed
 
__ýlu¥lus
 || 
	`__GNUC_PREREQ
 (4,3) \

343 || (
defšed
 
__þªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

344 || 
defšed
 
__GNUC_GNU_INLINE__
)))

345 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ýlu¥lus


346 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

347 
	#__ex‹º_®ways_šlše
 \

348 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

350 
	#__ex‹º_šlše
 
__šlše


	)

351 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

355 #ifdeà
__ex‹º_®ways_šlše


356 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

361 #ià
	`__GNUC_PREREQ
 (4,3)

362 
	#__va_¬g_·ck
(è
	`__bužtš_va_¬g_·ck
 ()

	)

363 
	#__va_¬g_·ck_Ën
(è
	`__bužtš_va_¬g_·ck_Ën
 ()

	)

370 #ià!
	`__GNUC_PREREQ
 (2,8)

371 
	#__ex‹nsiÚ__


	)

375 #ià!
	`__GNUC_PREREQ
 (2,92)

376 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

377 
	#__»¡riù
 
»¡riù


	)

379 
	#__»¡riù


	)

386 #ià
	`__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


387 
	#__»¡riù_¬r
 
__»¡riù


	)

389 #ifdeà
__GNUC__


390 
	#__»¡riù_¬r


	)

392 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

393 
	#__»¡riù_¬r
 
»¡riù


	)

396 
	#__»¡riù_¬r


	)

401 #ià
__GNUC__
 >= 3

402 
	#__glibc_uÆik–y
(
cÚd
è
	`__bužtš_ex³ù
 ((cÚd), 0)

	)

403 
	#__glibc_lik–y
(
cÚd
è
	`__bužtš_ex³ù
 ((cÚd), 1)

	)

405 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

406 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

409 #ifdeà
__has_©Œibu‹


410 
	#__glibc_has_©Œibu‹
(
©Œ
è
	`__has_©Œibu‹
 (©Œ)

	)

412 
	#__glibc_has_©Œibu‹
(
©Œ
è0

	)

415 #ià(!
defšed
 
_NÜ‘uº
 \

416 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

417 && !
	$__GNUC_PREREQ
 (4,7))

418 #ià
	`__GNUC_PREREQ
 (2,8)

419 
	#_NÜ‘uº
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

	)

421 
	#_NÜ‘uº


	)

425 #ià
	`__GNUC_PREREQ
 (8, 0)

429 
	#__©Œibu‹_nÚ¡ršg__
 
	`__©Œibu‹__
 ((
__nÚ¡ršg__
))

	)

431 
	#__©Œibu‹_nÚ¡ršg__


	)

434 #ià(!
defšed
 
_Stic_as£¹
 && !defšed 
__ýlu¥lus
 \

435 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

436 && (!
	`__GNUC_PREREQ
 (4, 6è|| 
defšed
 
__STRICT_ANSI__
))

437 
	#_Stic_as£¹
(
ex´
, 
dŸgno¡ic
) \

438 (*
	`__Stic_as£¹_funùiÚ
 ()) \

439 [!! (¡ruù { 
__”rÜ_if_Ãg©ive
: (
ex´
è? 2 : -1; })]

	)

442 
	~<b™s/wÜdsize.h
>

443 
	~<b™s/lÚg-doubË.h
>

445 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


446 
	#__LDBL_COMPAT
 1

	)

447 #ifdeà
__REDIRECT


448 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

449 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

450 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

451 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

452 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

453 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

454 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

455 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

456 
	#__LDBL_REDIR_DECL
(
Çme
) \

457 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

458 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

459 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

460 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

461 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

464 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


465 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

466 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

467 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

468 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

469 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

470 #ifdeà
__REDIRECT


471 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

472 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

473 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

482 #ià
	`__GNUC_PREREQ
 (4,8è|| 
	`__glibc_þªg_´”eq
 (3,5)

483 
	#__glibc_maüo_w¬nšg1
(
mes§ge
è
	`_P¿gma
 (#mes§ge)

	)

484 
	#__glibc_maüo_w¬nšg
(
mes§ge
) \

485 
	`__glibc_maüo_w¬nšg1
 (
GCC
 
w¬nšg
 
mes§ge
)

	)

487 
	#__glibc_maüo_w¬nšg
(
msg
)

	)

497 #ià!
defšed
 
__ýlu¥lus
 \

498 && (
	`__GNUC_PREREQ
 (4, 9) \

499 || 
	`__glibc_þªg_has_ex‹nsiÚ
 (
c_g’”ic_£ËùiÚs
) \

500 || (!
defšed
 
__GNUC__
 && defšed 
__STDC_VERSION__
 \

501 && 
__STDC_VERSION__
 >= 201112L))

502 
	#__HAVE_GENERIC_SELECTION
 1

	)

504 
	#__HAVE_GENERIC_SELECTION
 0

	)

	@/usr/include/bits/long-double.h

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£Žogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@
1
.
1
/usr/include
21
596
ngx_http_upload_module.c
/usr/include/openssl/md5.h
/usr/include/openssl/sha.h
/usr/include/openssl/e_os2.h
/usr/include/openssl/opensslconf.h
/usr/include/inttypes.h
/usr/include/openssl/opensslv.h
/usr/include/stdint.h
/usr/include/bits/libc-header-start.h
/usr/include/bits/stdint-intn.h
/usr/include/bits/stdint-uintn.h
/usr/include/bits/types.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/features.h
/usr/include/bits/typesizes.h
/usr/include/gnu/stubs.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/bits/long-double.h
/usr/include/gnu/stubs-64.h
